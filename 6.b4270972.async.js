(self.webpackChunkgptminer=self.webpackChunkgptminer||[]).push([[6],{31050:function(He,q,K){"use strict";var Z;Z={value:!0},Z=Z=Z=q.Xx=Z=Z=q._w=q.aP=q.KS=Z=q.jQ=void 0;const ve=K(31416),_=K(93350),Ie=K(17309);q.jQ=64,Z=32,q.KS=64,q.aP=32;function J(H){const k=new Float64Array(16);if(H)for(let M=0;M<H.length;M++)k[M]=H[M];return k}const Ee=new Uint8Array(32);Ee[0]=9;const De=J(),ae=J([1]),ue=J([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),fe=J([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Te=J([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Pe=J([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),me=J([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function le(H,k){for(let M=0;M<16;M++)H[M]=k[M]|0}function ke(H){let k=1;for(let M=0;M<16;M++){let l=H[M]+k+65535;k=Math.floor(l/65536),H[M]=l-k*65536}H[0]+=k-1+37*(k-1)}function at(H,k,M){const l=~(M-1);for(let C=0;C<16;C++){const Ce=l&(H[C]^k[C]);H[C]^=Ce,k[C]^=Ce}}function Je(H,k){const M=J(),l=J();for(let C=0;C<16;C++)l[C]=k[C];ke(l),ke(l),ke(l);for(let C=0;C<2;C++){M[0]=l[0]-65517;for(let $e=1;$e<15;$e++)M[$e]=l[$e]-65535-(M[$e-1]>>16&1),M[$e-1]&=65535;M[15]=l[15]-32767-(M[14]>>16&1);const Ce=M[15]>>16&1;M[14]&=65535,at(l,M,1-Ce)}for(let C=0;C<16;C++)H[2*C]=l[C]&255,H[2*C+1]=l[C]>>8}function Me(H,k){let M=0;for(let l=0;l<32;l++)M|=H[l]^k[l];return(1&M-1>>>8)-1}function ce(H,k){const M=new Uint8Array(32),l=new Uint8Array(32);return Je(M,H),Je(l,k),Me(M,l)}function re(H){const k=new Uint8Array(32);return Je(k,H),k[0]&1}function he(H,k){for(let M=0;M<16;M++)H[M]=k[2*M]+(k[2*M+1]<<8);H[15]&=32767}function de(H,k,M){for(let l=0;l<16;l++)H[l]=k[l]+M[l]}function L(H,k,M){for(let l=0;l<16;l++)H[l]=k[l]-M[l]}function Q(H,k,M){let l,C,Ce=0,$e=0,it=0,mt=0,Qe=0,tt=0,Xt=0,cr=0,er=0,Vt=0,Mt=0,Dt=0,xt=0,ct=0,dt=0,_t=0,ht=0,zt=0,tr=0,hr=0,lr=0,Nt=0,je=0,rr=0,qr=0,yr=0,Xr=0,mi=0,Li=0,_i=0,ai=0,Ut=M[0],Lt=M[1],$t=M[2],Pt=M[3],ir=M[4],kt=M[5],Gt=M[6],nr=M[7],Wt=M[8],Jt=M[9],Ft=M[10],pt=M[11],Zt=M[12],we=M[13],Qt=M[14],Yt=M[15];l=k[0],Ce+=l*Ut,$e+=l*Lt,it+=l*$t,mt+=l*Pt,Qe+=l*ir,tt+=l*kt,Xt+=l*Gt,cr+=l*nr,er+=l*Wt,Vt+=l*Jt,Mt+=l*Ft,Dt+=l*pt,xt+=l*Zt,ct+=l*we,dt+=l*Qt,_t+=l*Yt,l=k[1],$e+=l*Ut,it+=l*Lt,mt+=l*$t,Qe+=l*Pt,tt+=l*ir,Xt+=l*kt,cr+=l*Gt,er+=l*nr,Vt+=l*Wt,Mt+=l*Jt,Dt+=l*Ft,xt+=l*pt,ct+=l*Zt,dt+=l*we,_t+=l*Qt,ht+=l*Yt,l=k[2],it+=l*Ut,mt+=l*Lt,Qe+=l*$t,tt+=l*Pt,Xt+=l*ir,cr+=l*kt,er+=l*Gt,Vt+=l*nr,Mt+=l*Wt,Dt+=l*Jt,xt+=l*Ft,ct+=l*pt,dt+=l*Zt,_t+=l*we,ht+=l*Qt,zt+=l*Yt,l=k[3],mt+=l*Ut,Qe+=l*Lt,tt+=l*$t,Xt+=l*Pt,cr+=l*ir,er+=l*kt,Vt+=l*Gt,Mt+=l*nr,Dt+=l*Wt,xt+=l*Jt,ct+=l*Ft,dt+=l*pt,_t+=l*Zt,ht+=l*we,zt+=l*Qt,tr+=l*Yt,l=k[4],Qe+=l*Ut,tt+=l*Lt,Xt+=l*$t,cr+=l*Pt,er+=l*ir,Vt+=l*kt,Mt+=l*Gt,Dt+=l*nr,xt+=l*Wt,ct+=l*Jt,dt+=l*Ft,_t+=l*pt,ht+=l*Zt,zt+=l*we,tr+=l*Qt,hr+=l*Yt,l=k[5],tt+=l*Ut,Xt+=l*Lt,cr+=l*$t,er+=l*Pt,Vt+=l*ir,Mt+=l*kt,Dt+=l*Gt,xt+=l*nr,ct+=l*Wt,dt+=l*Jt,_t+=l*Ft,ht+=l*pt,zt+=l*Zt,tr+=l*we,hr+=l*Qt,lr+=l*Yt,l=k[6],Xt+=l*Ut,cr+=l*Lt,er+=l*$t,Vt+=l*Pt,Mt+=l*ir,Dt+=l*kt,xt+=l*Gt,ct+=l*nr,dt+=l*Wt,_t+=l*Jt,ht+=l*Ft,zt+=l*pt,tr+=l*Zt,hr+=l*we,lr+=l*Qt,Nt+=l*Yt,l=k[7],cr+=l*Ut,er+=l*Lt,Vt+=l*$t,Mt+=l*Pt,Dt+=l*ir,xt+=l*kt,ct+=l*Gt,dt+=l*nr,_t+=l*Wt,ht+=l*Jt,zt+=l*Ft,tr+=l*pt,hr+=l*Zt,lr+=l*we,Nt+=l*Qt,je+=l*Yt,l=k[8],er+=l*Ut,Vt+=l*Lt,Mt+=l*$t,Dt+=l*Pt,xt+=l*ir,ct+=l*kt,dt+=l*Gt,_t+=l*nr,ht+=l*Wt,zt+=l*Jt,tr+=l*Ft,hr+=l*pt,lr+=l*Zt,Nt+=l*we,je+=l*Qt,rr+=l*Yt,l=k[9],Vt+=l*Ut,Mt+=l*Lt,Dt+=l*$t,xt+=l*Pt,ct+=l*ir,dt+=l*kt,_t+=l*Gt,ht+=l*nr,zt+=l*Wt,tr+=l*Jt,hr+=l*Ft,lr+=l*pt,Nt+=l*Zt,je+=l*we,rr+=l*Qt,qr+=l*Yt,l=k[10],Mt+=l*Ut,Dt+=l*Lt,xt+=l*$t,ct+=l*Pt,dt+=l*ir,_t+=l*kt,ht+=l*Gt,zt+=l*nr,tr+=l*Wt,hr+=l*Jt,lr+=l*Ft,Nt+=l*pt,je+=l*Zt,rr+=l*we,qr+=l*Qt,yr+=l*Yt,l=k[11],Dt+=l*Ut,xt+=l*Lt,ct+=l*$t,dt+=l*Pt,_t+=l*ir,ht+=l*kt,zt+=l*Gt,tr+=l*nr,hr+=l*Wt,lr+=l*Jt,Nt+=l*Ft,je+=l*pt,rr+=l*Zt,qr+=l*we,yr+=l*Qt,Xr+=l*Yt,l=k[12],xt+=l*Ut,ct+=l*Lt,dt+=l*$t,_t+=l*Pt,ht+=l*ir,zt+=l*kt,tr+=l*Gt,hr+=l*nr,lr+=l*Wt,Nt+=l*Jt,je+=l*Ft,rr+=l*pt,qr+=l*Zt,yr+=l*we,Xr+=l*Qt,mi+=l*Yt,l=k[13],ct+=l*Ut,dt+=l*Lt,_t+=l*$t,ht+=l*Pt,zt+=l*ir,tr+=l*kt,hr+=l*Gt,lr+=l*nr,Nt+=l*Wt,je+=l*Jt,rr+=l*Ft,qr+=l*pt,yr+=l*Zt,Xr+=l*we,mi+=l*Qt,Li+=l*Yt,l=k[14],dt+=l*Ut,_t+=l*Lt,ht+=l*$t,zt+=l*Pt,tr+=l*ir,hr+=l*kt,lr+=l*Gt,Nt+=l*nr,je+=l*Wt,rr+=l*Jt,qr+=l*Ft,yr+=l*pt,Xr+=l*Zt,mi+=l*we,Li+=l*Qt,_i+=l*Yt,l=k[15],_t+=l*Ut,ht+=l*Lt,zt+=l*$t,tr+=l*Pt,hr+=l*ir,lr+=l*kt,Nt+=l*Gt,je+=l*nr,rr+=l*Wt,qr+=l*Jt,yr+=l*Ft,Xr+=l*pt,mi+=l*Zt,Li+=l*we,_i+=l*Qt,ai+=l*Yt,Ce+=38*ht,$e+=38*zt,it+=38*tr,mt+=38*hr,Qe+=38*lr,tt+=38*Nt,Xt+=38*je,cr+=38*rr,er+=38*qr,Vt+=38*yr,Mt+=38*Xr,Dt+=38*mi,xt+=38*Li,ct+=38*_i,dt+=38*ai,C=1,l=Ce+C+65535,C=Math.floor(l/65536),Ce=l-C*65536,l=$e+C+65535,C=Math.floor(l/65536),$e=l-C*65536,l=it+C+65535,C=Math.floor(l/65536),it=l-C*65536,l=mt+C+65535,C=Math.floor(l/65536),mt=l-C*65536,l=Qe+C+65535,C=Math.floor(l/65536),Qe=l-C*65536,l=tt+C+65535,C=Math.floor(l/65536),tt=l-C*65536,l=Xt+C+65535,C=Math.floor(l/65536),Xt=l-C*65536,l=cr+C+65535,C=Math.floor(l/65536),cr=l-C*65536,l=er+C+65535,C=Math.floor(l/65536),er=l-C*65536,l=Vt+C+65535,C=Math.floor(l/65536),Vt=l-C*65536,l=Mt+C+65535,C=Math.floor(l/65536),Mt=l-C*65536,l=Dt+C+65535,C=Math.floor(l/65536),Dt=l-C*65536,l=xt+C+65535,C=Math.floor(l/65536),xt=l-C*65536,l=ct+C+65535,C=Math.floor(l/65536),ct=l-C*65536,l=dt+C+65535,C=Math.floor(l/65536),dt=l-C*65536,l=_t+C+65535,C=Math.floor(l/65536),_t=l-C*65536,Ce+=C-1+37*(C-1),C=1,l=Ce+C+65535,C=Math.floor(l/65536),Ce=l-C*65536,l=$e+C+65535,C=Math.floor(l/65536),$e=l-C*65536,l=it+C+65535,C=Math.floor(l/65536),it=l-C*65536,l=mt+C+65535,C=Math.floor(l/65536),mt=l-C*65536,l=Qe+C+65535,C=Math.floor(l/65536),Qe=l-C*65536,l=tt+C+65535,C=Math.floor(l/65536),tt=l-C*65536,l=Xt+C+65535,C=Math.floor(l/65536),Xt=l-C*65536,l=cr+C+65535,C=Math.floor(l/65536),cr=l-C*65536,l=er+C+65535,C=Math.floor(l/65536),er=l-C*65536,l=Vt+C+65535,C=Math.floor(l/65536),Vt=l-C*65536,l=Mt+C+65535,C=Math.floor(l/65536),Mt=l-C*65536,l=Dt+C+65535,C=Math.floor(l/65536),Dt=l-C*65536,l=xt+C+65535,C=Math.floor(l/65536),xt=l-C*65536,l=ct+C+65535,C=Math.floor(l/65536),ct=l-C*65536,l=dt+C+65535,C=Math.floor(l/65536),dt=l-C*65536,l=_t+C+65535,C=Math.floor(l/65536),_t=l-C*65536,Ce+=C-1+37*(C-1),H[0]=Ce,H[1]=$e,H[2]=it,H[3]=mt,H[4]=Qe,H[5]=tt,H[6]=Xt,H[7]=cr,H[8]=er,H[9]=Vt,H[10]=Mt,H[11]=Dt,H[12]=xt,H[13]=ct,H[14]=dt,H[15]=_t}function ne(H,k){Q(H,k,k)}function _e(H,k){const M=J();let l;for(l=0;l<16;l++)M[l]=k[l];for(l=253;l>=0;l--)ne(M,M),l!==2&&l!==4&&Q(M,M,k);for(l=0;l<16;l++)H[l]=M[l]}function m(H,k){const M=J();let l;for(l=0;l<16;l++)M[l]=k[l];for(l=250;l>=0;l--)ne(M,M),l!==1&&Q(M,M,k);for(l=0;l<16;l++)H[l]=M[l]}function I(H,k){const M=J(),l=J(),C=J(),Ce=J(),$e=J(),it=J(),mt=J(),Qe=J(),tt=J();L(M,H[1],H[0]),L(tt,k[1],k[0]),Q(M,M,tt),de(l,H[0],H[1]),de(tt,k[0],k[1]),Q(l,l,tt),Q(C,H[3],k[3]),Q(C,C,fe),Q(Ce,H[2],k[2]),de(Ce,Ce,Ce),L($e,l,M),L(it,Ce,C),de(mt,Ce,C),de(Qe,l,M),Q(H[0],$e,it),Q(H[1],Qe,mt),Q(H[2],mt,it),Q(H[3],$e,Qe)}function p(H,k,M){for(let l=0;l<4;l++)at(H[l],k[l],M)}function g(H,k){const M=J(),l=J(),C=J();_e(C,k[2]),Q(M,k[0],C),Q(l,k[1],C),Je(H,l),H[31]^=re(M)<<7}function y(H,k,M){le(H[0],De),le(H[1],ae),le(H[2],ae),le(H[3],De);for(let l=255;l>=0;--l){const C=M[l/8|0]>>(l&7)&1;p(H,k,C),I(k,H),I(H,H),p(H,k,C)}}function E(H,k){const M=[J(),J(),J(),J()];le(M[0],Te),le(M[1],Pe),le(M[2],ae),Q(M[3],Te,Pe),y(H,M,k)}function F(H){if(H.length!==q.aP)throw new Error(`ed25519: seed must be ${q.aP} bytes`);const k=(0,_.hash)(H);k[0]&=248,k[31]&=127,k[31]|=64;const M=new Uint8Array(32),l=[J(),J(),J(),J()];E(l,k),g(M,l);const C=new Uint8Array(64);return C.set(H),C.set(M,32),{publicKey:M,secretKey:C}}q._w=F;function j(H){const k=(0,ve.randomBytes)(32,H),M=F(k);return(0,Ie.wipe)(k),M}Z=j;function W(H){if(H.length!==q.KS)throw new Error(`ed25519: secret key must be ${q.KS} bytes`);return new Uint8Array(H.subarray(32))}Z=W;const O=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function V(H,k){let M,l,C,Ce;for(l=63;l>=32;--l){for(M=0,C=l-32,Ce=l-12;C<Ce;++C)k[C]+=M-16*k[l]*O[C-(l-32)],M=Math.floor((k[C]+128)/256),k[C]-=M*256;k[C]+=M,k[l]=0}for(M=0,C=0;C<32;C++)k[C]+=M-(k[31]>>4)*O[C],M=k[C]>>8,k[C]&=255;for(C=0;C<32;C++)k[C]-=M*O[C];for(l=0;l<32;l++)k[l+1]+=k[l]>>8,H[l]=k[l]&255}function Ae(H){const k=new Float64Array(64);for(let M=0;M<64;M++)k[M]=H[M];for(let M=0;M<64;M++)H[M]=0;V(H,k)}function ge(H,k){const M=new Float64Array(64),l=[J(),J(),J(),J()],C=(0,_.hash)(H.subarray(0,32));C[0]&=248,C[31]&=127,C[31]|=64;const Ce=new Uint8Array(64);Ce.set(C.subarray(32),32);const $e=new _.SHA512;$e.update(Ce.subarray(32)),$e.update(k);const it=$e.digest();$e.clean(),Ae(it),E(l,it),g(Ce,l),$e.reset(),$e.update(Ce.subarray(0,32)),$e.update(H.subarray(32)),$e.update(k);const mt=$e.digest();Ae(mt);for(let Qe=0;Qe<32;Qe++)M[Qe]=it[Qe];for(let Qe=0;Qe<32;Qe++)for(let tt=0;tt<32;tt++)M[Qe+tt]+=mt[Qe]*C[tt];return V(Ce.subarray(32),M),Ce}q.Xx=ge;function Re(H,k){const M=J(),l=J(),C=J(),Ce=J(),$e=J(),it=J(),mt=J();return le(H[2],ae),he(H[1],k),ne(C,H[1]),Q(Ce,C,ue),L(C,C,H[2]),de(Ce,H[2],Ce),ne($e,Ce),ne(it,$e),Q(mt,it,$e),Q(M,mt,C),Q(M,M,Ce),m(M,M),Q(M,M,C),Q(M,M,Ce),Q(M,M,Ce),Q(H[0],M,Ce),ne(l,H[0]),Q(l,l,Ce),ce(l,C)&&Q(H[0],H[0],me),ne(l,H[0]),Q(l,l,Ce),ce(l,C)?-1:(re(H[0])===k[31]>>7&&L(H[0],De,H[0]),Q(H[3],H[0],H[1]),0)}function Tt(H,k,M){const l=new Uint8Array(32),C=[J(),J(),J(),J()],Ce=[J(),J(),J(),J()];if(M.length!==q.jQ)throw new Error(`ed25519: signature must be ${q.jQ} bytes`);if(Re(Ce,H))return!1;const $e=new _.SHA512;$e.update(M.subarray(0,32)),$e.update(H),$e.update(k);const it=$e.digest();return Ae(it),y(C,Ce,it),E(Ce,M.subarray(32)),I(C,Ce),g(l,C),!Me(M,l)}Z=Tt;function wr(H){let k=[J(),J(),J(),J()];if(Re(k,H))throw new Error("Ed25519: invalid public key");let M=J(),l=J(),C=k[1];de(M,ae,C),L(l,ae,C),_e(l,l),Q(M,M,l);let Ce=new Uint8Array(32);return Je(Ce,M),Ce}Z=wr;function Et(H){const k=(0,_.hash)(H.subarray(0,32));k[0]&=248,k[31]&=127,k[31]|=64;const M=new Uint8Array(k.subarray(0,32));return(0,Ie.wipe)(k),M}Z=Et},93350:function(He,q,K){"use strict";Object.defineProperty(q,"__esModule",{value:!0});var Z=K(98099),ve=K(17309);q.DIGEST_LENGTH=64,q.BLOCK_SIZE=128;var _=function(){function De(){this.digestLength=q.DIGEST_LENGTH,this.blockSize=q.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return De.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},De.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},De.prototype.clean=function(){ve.wipe(this._buffer),ve.wipe(this._tempHi),ve.wipe(this._tempLo),this.reset()},De.prototype.update=function(ae,ue){if(ue===void 0&&(ue=ae.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var fe=0;if(this._bytesHashed+=ue,this._bufferLength>0){for(;this._bufferLength<q.BLOCK_SIZE&&ue>0;)this._buffer[this._bufferLength++]=ae[fe++],ue--;this._bufferLength===this.blockSize&&(J(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(ue>=this.blockSize&&(fe=J(this._tempHi,this._tempLo,this._stateHi,this._stateLo,ae,fe,ue),ue%=this.blockSize);ue>0;)this._buffer[this._bufferLength++]=ae[fe++],ue--;return this},De.prototype.finish=function(ae){if(!this._finished){var ue=this._bytesHashed,fe=this._bufferLength,Te=ue/536870912|0,Pe=ue<<3,me=ue%128<112?128:256;this._buffer[fe]=128;for(var le=fe+1;le<me-8;le++)this._buffer[le]=0;Z.writeUint32BE(Te,this._buffer,me-8),Z.writeUint32BE(Pe,this._buffer,me-4),J(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,me),this._finished=!0}for(var le=0;le<this.digestLength/8;le++)Z.writeUint32BE(this._stateHi[le],ae,le*8),Z.writeUint32BE(this._stateLo[le],ae,le*8+4);return this},De.prototype.digest=function(){var ae=new Uint8Array(this.digestLength);return this.finish(ae),ae},De.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},De.prototype.restoreState=function(ae){return this._stateHi.set(ae.stateHi),this._stateLo.set(ae.stateLo),this._bufferLength=ae.bufferLength,ae.buffer&&this._buffer.set(ae.buffer),this._bytesHashed=ae.bytesHashed,this._finished=!1,this},De.prototype.cleanSavedState=function(ae){ve.wipe(ae.stateHi),ve.wipe(ae.stateLo),ae.buffer&&ve.wipe(ae.buffer),ae.bufferLength=0,ae.bytesHashed=0},De}();q.SHA512=_;var Ie=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function J(De,ae,ue,fe,Te,Pe,me){for(var le=ue[0],ke=ue[1],at=ue[2],Je=ue[3],Me=ue[4],ce=ue[5],re=ue[6],he=ue[7],de=fe[0],L=fe[1],Q=fe[2],ne=fe[3],_e=fe[4],m=fe[5],I=fe[6],p=fe[7],g,y,E,F,j,W,O,V;me>=128;){for(var Ae=0;Ae<16;Ae++){var ge=8*Ae+Pe;De[Ae]=Z.readUint32BE(Te,ge),ae[Ae]=Z.readUint32BE(Te,ge+4)}for(var Ae=0;Ae<80;Ae++){var Re=le,Tt=ke,wr=at,Et=Je,H=Me,k=ce,M=re,l=he,C=de,Ce=L,$e=Q,it=ne,mt=_e,Qe=m,tt=I,Xt=p;if(g=he,y=p,j=y&65535,W=y>>>16,O=g&65535,V=g>>>16,g=(Me>>>14|_e<<32-14)^(Me>>>18|_e<<32-18)^(_e>>>41-32|Me<<32-(41-32)),y=(_e>>>14|Me<<32-14)^(_e>>>18|Me<<32-18)^(Me>>>41-32|_e<<32-(41-32)),j+=y&65535,W+=y>>>16,O+=g&65535,V+=g>>>16,g=Me&ce^~Me&re,y=_e&m^~_e&I,j+=y&65535,W+=y>>>16,O+=g&65535,V+=g>>>16,g=Ie[Ae*2],y=Ie[Ae*2+1],j+=y&65535,W+=y>>>16,O+=g&65535,V+=g>>>16,g=De[Ae%16],y=ae[Ae%16],j+=y&65535,W+=y>>>16,O+=g&65535,V+=g>>>16,W+=j>>>16,O+=W>>>16,V+=O>>>16,E=O&65535|V<<16,F=j&65535|W<<16,g=E,y=F,j=y&65535,W=y>>>16,O=g&65535,V=g>>>16,g=(le>>>28|de<<32-28)^(de>>>34-32|le<<32-(34-32))^(de>>>39-32|le<<32-(39-32)),y=(de>>>28|le<<32-28)^(le>>>34-32|de<<32-(34-32))^(le>>>39-32|de<<32-(39-32)),j+=y&65535,W+=y>>>16,O+=g&65535,V+=g>>>16,g=le&ke^le&at^ke&at,y=de&L^de&Q^L&Q,j+=y&65535,W+=y>>>16,O+=g&65535,V+=g>>>16,W+=j>>>16,O+=W>>>16,V+=O>>>16,l=O&65535|V<<16,Xt=j&65535|W<<16,g=Et,y=it,j=y&65535,W=y>>>16,O=g&65535,V=g>>>16,g=E,y=F,j+=y&65535,W+=y>>>16,O+=g&65535,V+=g>>>16,W+=j>>>16,O+=W>>>16,V+=O>>>16,Et=O&65535|V<<16,it=j&65535|W<<16,ke=Re,at=Tt,Je=wr,Me=Et,ce=H,re=k,he=M,le=l,L=C,Q=Ce,ne=$e,_e=it,m=mt,I=Qe,p=tt,de=Xt,Ae%16===15)for(var ge=0;ge<16;ge++)g=De[ge],y=ae[ge],j=y&65535,W=y>>>16,O=g&65535,V=g>>>16,g=De[(ge+9)%16],y=ae[(ge+9)%16],j+=y&65535,W+=y>>>16,O+=g&65535,V+=g>>>16,E=De[(ge+1)%16],F=ae[(ge+1)%16],g=(E>>>1|F<<32-1)^(E>>>8|F<<32-8)^E>>>7,y=(F>>>1|E<<32-1)^(F>>>8|E<<32-8)^(F>>>7|E<<32-7),j+=y&65535,W+=y>>>16,O+=g&65535,V+=g>>>16,E=De[(ge+14)%16],F=ae[(ge+14)%16],g=(E>>>19|F<<32-19)^(F>>>61-32|E<<32-(61-32))^E>>>6,y=(F>>>19|E<<32-19)^(E>>>61-32|F<<32-(61-32))^(F>>>6|E<<32-6),j+=y&65535,W+=y>>>16,O+=g&65535,V+=g>>>16,W+=j>>>16,O+=W>>>16,V+=O>>>16,De[ge]=O&65535|V<<16,ae[ge]=j&65535|W<<16}g=le,y=de,j=y&65535,W=y>>>16,O=g&65535,V=g>>>16,g=ue[0],y=fe[0],j+=y&65535,W+=y>>>16,O+=g&65535,V+=g>>>16,W+=j>>>16,O+=W>>>16,V+=O>>>16,ue[0]=le=O&65535|V<<16,fe[0]=de=j&65535|W<<16,g=ke,y=L,j=y&65535,W=y>>>16,O=g&65535,V=g>>>16,g=ue[1],y=fe[1],j+=y&65535,W+=y>>>16,O+=g&65535,V+=g>>>16,W+=j>>>16,O+=W>>>16,V+=O>>>16,ue[1]=ke=O&65535|V<<16,fe[1]=L=j&65535|W<<16,g=at,y=Q,j=y&65535,W=y>>>16,O=g&65535,V=g>>>16,g=ue[2],y=fe[2],j+=y&65535,W+=y>>>16,O+=g&65535,V+=g>>>16,W+=j>>>16,O+=W>>>16,V+=O>>>16,ue[2]=at=O&65535|V<<16,fe[2]=Q=j&65535|W<<16,g=Je,y=ne,j=y&65535,W=y>>>16,O=g&65535,V=g>>>16,g=ue[3],y=fe[3],j+=y&65535,W+=y>>>16,O+=g&65535,V+=g>>>16,W+=j>>>16,O+=W>>>16,V+=O>>>16,ue[3]=Je=O&65535|V<<16,fe[3]=ne=j&65535|W<<16,g=Me,y=_e,j=y&65535,W=y>>>16,O=g&65535,V=g>>>16,g=ue[4],y=fe[4],j+=y&65535,W+=y>>>16,O+=g&65535,V+=g>>>16,W+=j>>>16,O+=W>>>16,V+=O>>>16,ue[4]=Me=O&65535|V<<16,fe[4]=_e=j&65535|W<<16,g=ce,y=m,j=y&65535,W=y>>>16,O=g&65535,V=g>>>16,g=ue[5],y=fe[5],j+=y&65535,W+=y>>>16,O+=g&65535,V+=g>>>16,W+=j>>>16,O+=W>>>16,V+=O>>>16,ue[5]=ce=O&65535|V<<16,fe[5]=m=j&65535|W<<16,g=re,y=I,j=y&65535,W=y>>>16,O=g&65535,V=g>>>16,g=ue[6],y=fe[6],j+=y&65535,W+=y>>>16,O+=g&65535,V+=g>>>16,W+=j>>>16,O+=W>>>16,V+=O>>>16,ue[6]=re=O&65535|V<<16,fe[6]=I=j&65535|W<<16,g=he,y=p,j=y&65535,W=y>>>16,O=g&65535,V=g>>>16,g=ue[7],y=fe[7],j+=y&65535,W+=y>>>16,O+=g&65535,V+=g>>>16,W+=j>>>16,O+=W>>>16,V+=O>>>16,ue[7]=he=O&65535|V<<16,fe[7]=p=j&65535|W<<16,Pe+=128,me-=128}return Pe}function Ee(De){var ae=new _;ae.update(De);var ue=ae.digest();return ae.clean(),ue}q.hash=Ee},20933:function(He,q,K){"use strict";K.r(q),K.d(q,{__assign:function(){return J},__asyncDelegator:function(){return re},__asyncGenerator:function(){return ce},__asyncValues:function(){return he},__await:function(){return Me},__awaiter:function(){return fe},__classPrivateFieldGet:function(){return ne},__classPrivateFieldSet:function(){return _e},__createBinding:function(){return Pe},__decorate:function(){return De},__exportStar:function(){return me},__extends:function(){return Ie},__generator:function(){return Te},__importDefault:function(){return Q},__importStar:function(){return L},__makeTemplateObject:function(){return de},__metadata:function(){return ue},__param:function(){return ae},__read:function(){return ke},__rest:function(){return Ee},__spread:function(){return at},__spreadArrays:function(){return Je},__values:function(){return le}});var Z=K(52677),ve=K.n(Z);var _=function(I,p){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var E in y)y.hasOwnProperty(E)&&(g[E]=y[E])},_(I,p)};function Ie(m,I){_(m,I);function p(){this.constructor=m}m.prototype=I===null?Object.create(I):(p.prototype=I.prototype,new p)}var J=function(){return J=Object.assign||function(p){for(var g,y=1,E=arguments.length;y<E;y++){g=arguments[y];for(var F in g)Object.prototype.hasOwnProperty.call(g,F)&&(p[F]=g[F])}return p},J.apply(this,arguments)};function Ee(m,I){var p={};for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&I.indexOf(g)<0&&(p[g]=m[g]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,g=Object.getOwnPropertySymbols(m);y<g.length;y++)I.indexOf(g[y])<0&&Object.prototype.propertyIsEnumerable.call(m,g[y])&&(p[g[y]]=m[g[y]]);return p}function De(m,I,p,g){var y=arguments.length,E=y<3?I:g===null?g=Object.getOwnPropertyDescriptor(I,p):g,F;if((typeof Reflect>"u"?"undefined":ve()(Reflect))==="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(m,I,p,g);else for(var j=m.length-1;j>=0;j--)(F=m[j])&&(E=(y<3?F(E):y>3?F(I,p,E):F(I,p))||E);return y>3&&E&&Object.defineProperty(I,p,E),E}function ae(m,I){return function(p,g){I(p,g,m)}}function ue(m,I){if((typeof Reflect>"u"?"undefined":ve()(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(m,I)}function fe(m,I,p,g){function y(E){return E instanceof p?E:new p(function(F){F(E)})}return new(p||(p=Promise))(function(E,F){function j(V){try{O(g.next(V))}catch(Ae){F(Ae)}}function W(V){try{O(g.throw(V))}catch(Ae){F(Ae)}}function O(V){V.done?E(V.value):y(V.value).then(j,W)}O((g=g.apply(m,I||[])).next())})}function Te(m,I){var p={label:0,sent:function(){if(E[0]&1)throw E[1];return E[1]},trys:[],ops:[]},g,y,E,F;return F={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function j(O){return function(V){return W([O,V])}}function W(O){if(g)throw new TypeError("Generator is already executing.");for(;p;)try{if(g=1,y&&(E=O[0]&2?y.return:O[0]?y.throw||((E=y.return)&&E.call(y),0):y.next)&&!(E=E.call(y,O[1])).done)return E;switch(y=0,E&&(O=[O[0]&2,E.value]),O[0]){case 0:case 1:E=O;break;case 4:return p.label++,{value:O[1],done:!1};case 5:p.label++,y=O[1],O=[0];continue;case 7:O=p.ops.pop(),p.trys.pop();continue;default:if(E=p.trys,!(E=E.length>0&&E[E.length-1])&&(O[0]===6||O[0]===2)){p=0;continue}if(O[0]===3&&(!E||O[1]>E[0]&&O[1]<E[3])){p.label=O[1];break}if(O[0]===6&&p.label<E[1]){p.label=E[1],E=O;break}if(E&&p.label<E[2]){p.label=E[2],p.ops.push(O);break}E[2]&&p.ops.pop(),p.trys.pop();continue}O=I.call(m,p)}catch(V){O=[6,V],y=0}finally{g=E=0}if(O[0]&5)throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}}function Pe(m,I,p,g){g===void 0&&(g=p),m[g]=I[p]}function me(m,I){for(var p in m)p!=="default"&&!I.hasOwnProperty(p)&&(I[p]=m[p])}function le(m){var I=typeof Symbol=="function"&&Symbol.iterator,p=I&&m[I],g=0;if(p)return p.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&g>=m.length&&(m=void 0),{value:m&&m[g++],done:!m}}};throw new TypeError(I?"Object is not iterable.":"Symbol.iterator is not defined.")}function ke(m,I){var p=typeof Symbol=="function"&&m[Symbol.iterator];if(!p)return m;var g=p.call(m),y,E=[],F;try{for(;(I===void 0||I-- >0)&&!(y=g.next()).done;)E.push(y.value)}catch(j){F={error:j}}finally{try{y&&!y.done&&(p=g.return)&&p.call(g)}finally{if(F)throw F.error}}return E}function at(){for(var m=[],I=0;I<arguments.length;I++)m=m.concat(ke(arguments[I]));return m}function Je(){for(var m=0,I=0,p=arguments.length;I<p;I++)m+=arguments[I].length;for(var g=Array(m),y=0,I=0;I<p;I++)for(var E=arguments[I],F=0,j=E.length;F<j;F++,y++)g[y]=E[F];return g}function Me(m){return this instanceof Me?(this.v=m,this):new Me(m)}function ce(m,I,p){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=p.apply(m,I||[]),y,E=[];return y={},F("next"),F("throw"),F("return"),y[Symbol.asyncIterator]=function(){return this},y;function F(ge){g[ge]&&(y[ge]=function(Re){return new Promise(function(Tt,wr){E.push([ge,Re,Tt,wr])>1||j(ge,Re)})})}function j(ge,Re){try{W(g[ge](Re))}catch(Tt){Ae(E[0][3],Tt)}}function W(ge){ge.value instanceof Me?Promise.resolve(ge.value.v).then(O,V):Ae(E[0][2],ge)}function O(ge){j("next",ge)}function V(ge){j("throw",ge)}function Ae(ge,Re){ge(Re),E.shift(),E.length&&j(E[0][0],E[0][1])}}function re(m){var I,p;return I={},g("next"),g("throw",function(y){throw y}),g("return"),I[Symbol.iterator]=function(){return this},I;function g(y,E){I[y]=m[y]?function(F){return(p=!p)?{value:Me(m[y](F)),done:y==="return"}:E?E(F):F}:E}}function he(m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var I=m[Symbol.asyncIterator],p;return I?I.call(m):(m=typeof le=="function"?le(m):m[Symbol.iterator](),p={},g("next"),g("throw"),g("return"),p[Symbol.asyncIterator]=function(){return this},p);function g(E){p[E]=m[E]&&function(F){return new Promise(function(j,W){F=m[E](F),y(j,W,F.done,F.value)})}}function y(E,F,j,W){Promise.resolve(W).then(function(O){E({value:O,done:j})},F)}}function de(m,I){return Object.defineProperty?Object.defineProperty(m,"raw",{value:I}):m.raw=I,m}function L(m){if(m&&m.__esModule)return m;var I={};if(m!=null)for(var p in m)Object.hasOwnProperty.call(m,p)&&(I[p]=m[p]);return I.default=m,I}function Q(m){return m&&m.__esModule?m:{default:m}}function ne(m,I){if(!I.has(m))throw new TypeError("attempted to get private field on non-instance");return I.get(m)}function _e(m,I,p){if(!I.has(m))throw new TypeError("attempted to set private field on non-instance");return I.set(m,p),p}},57875:function(He,q,K){"use strict";K.r(q),K.d(q,{__assign:function(){return J},__asyncDelegator:function(){return re},__asyncGenerator:function(){return ce},__asyncValues:function(){return he},__await:function(){return Me},__awaiter:function(){return fe},__classPrivateFieldGet:function(){return ne},__classPrivateFieldSet:function(){return _e},__createBinding:function(){return Pe},__decorate:function(){return De},__exportStar:function(){return me},__extends:function(){return Ie},__generator:function(){return Te},__importDefault:function(){return Q},__importStar:function(){return L},__makeTemplateObject:function(){return de},__metadata:function(){return ue},__param:function(){return ae},__read:function(){return ke},__rest:function(){return Ee},__spread:function(){return at},__spreadArrays:function(){return Je},__values:function(){return le}});var Z=K(52677),ve=K.n(Z);var _=function(I,p){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var E in y)y.hasOwnProperty(E)&&(g[E]=y[E])},_(I,p)};function Ie(m,I){_(m,I);function p(){this.constructor=m}m.prototype=I===null?Object.create(I):(p.prototype=I.prototype,new p)}var J=function(){return J=Object.assign||function(p){for(var g,y=1,E=arguments.length;y<E;y++){g=arguments[y];for(var F in g)Object.prototype.hasOwnProperty.call(g,F)&&(p[F]=g[F])}return p},J.apply(this,arguments)};function Ee(m,I){var p={};for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&I.indexOf(g)<0&&(p[g]=m[g]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,g=Object.getOwnPropertySymbols(m);y<g.length;y++)I.indexOf(g[y])<0&&Object.prototype.propertyIsEnumerable.call(m,g[y])&&(p[g[y]]=m[g[y]]);return p}function De(m,I,p,g){var y=arguments.length,E=y<3?I:g===null?g=Object.getOwnPropertyDescriptor(I,p):g,F;if((typeof Reflect>"u"?"undefined":ve()(Reflect))==="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(m,I,p,g);else for(var j=m.length-1;j>=0;j--)(F=m[j])&&(E=(y<3?F(E):y>3?F(I,p,E):F(I,p))||E);return y>3&&E&&Object.defineProperty(I,p,E),E}function ae(m,I){return function(p,g){I(p,g,m)}}function ue(m,I){if((typeof Reflect>"u"?"undefined":ve()(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(m,I)}function fe(m,I,p,g){function y(E){return E instanceof p?E:new p(function(F){F(E)})}return new(p||(p=Promise))(function(E,F){function j(V){try{O(g.next(V))}catch(Ae){F(Ae)}}function W(V){try{O(g.throw(V))}catch(Ae){F(Ae)}}function O(V){V.done?E(V.value):y(V.value).then(j,W)}O((g=g.apply(m,I||[])).next())})}function Te(m,I){var p={label:0,sent:function(){if(E[0]&1)throw E[1];return E[1]},trys:[],ops:[]},g,y,E,F;return F={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function j(O){return function(V){return W([O,V])}}function W(O){if(g)throw new TypeError("Generator is already executing.");for(;p;)try{if(g=1,y&&(E=O[0]&2?y.return:O[0]?y.throw||((E=y.return)&&E.call(y),0):y.next)&&!(E=E.call(y,O[1])).done)return E;switch(y=0,E&&(O=[O[0]&2,E.value]),O[0]){case 0:case 1:E=O;break;case 4:return p.label++,{value:O[1],done:!1};case 5:p.label++,y=O[1],O=[0];continue;case 7:O=p.ops.pop(),p.trys.pop();continue;default:if(E=p.trys,!(E=E.length>0&&E[E.length-1])&&(O[0]===6||O[0]===2)){p=0;continue}if(O[0]===3&&(!E||O[1]>E[0]&&O[1]<E[3])){p.label=O[1];break}if(O[0]===6&&p.label<E[1]){p.label=E[1],E=O;break}if(E&&p.label<E[2]){p.label=E[2],p.ops.push(O);break}E[2]&&p.ops.pop(),p.trys.pop();continue}O=I.call(m,p)}catch(V){O=[6,V],y=0}finally{g=E=0}if(O[0]&5)throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}}function Pe(m,I,p,g){g===void 0&&(g=p),m[g]=I[p]}function me(m,I){for(var p in m)p!=="default"&&!I.hasOwnProperty(p)&&(I[p]=m[p])}function le(m){var I=typeof Symbol=="function"&&Symbol.iterator,p=I&&m[I],g=0;if(p)return p.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&g>=m.length&&(m=void 0),{value:m&&m[g++],done:!m}}};throw new TypeError(I?"Object is not iterable.":"Symbol.iterator is not defined.")}function ke(m,I){var p=typeof Symbol=="function"&&m[Symbol.iterator];if(!p)return m;var g=p.call(m),y,E=[],F;try{for(;(I===void 0||I-- >0)&&!(y=g.next()).done;)E.push(y.value)}catch(j){F={error:j}}finally{try{y&&!y.done&&(p=g.return)&&p.call(g)}finally{if(F)throw F.error}}return E}function at(){for(var m=[],I=0;I<arguments.length;I++)m=m.concat(ke(arguments[I]));return m}function Je(){for(var m=0,I=0,p=arguments.length;I<p;I++)m+=arguments[I].length;for(var g=Array(m),y=0,I=0;I<p;I++)for(var E=arguments[I],F=0,j=E.length;F<j;F++,y++)g[y]=E[F];return g}function Me(m){return this instanceof Me?(this.v=m,this):new Me(m)}function ce(m,I,p){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=p.apply(m,I||[]),y,E=[];return y={},F("next"),F("throw"),F("return"),y[Symbol.asyncIterator]=function(){return this},y;function F(ge){g[ge]&&(y[ge]=function(Re){return new Promise(function(Tt,wr){E.push([ge,Re,Tt,wr])>1||j(ge,Re)})})}function j(ge,Re){try{W(g[ge](Re))}catch(Tt){Ae(E[0][3],Tt)}}function W(ge){ge.value instanceof Me?Promise.resolve(ge.value.v).then(O,V):Ae(E[0][2],ge)}function O(ge){j("next",ge)}function V(ge){j("throw",ge)}function Ae(ge,Re){ge(Re),E.shift(),E.length&&j(E[0][0],E[0][1])}}function re(m){var I,p;return I={},g("next"),g("throw",function(y){throw y}),g("return"),I[Symbol.iterator]=function(){return this},I;function g(y,E){I[y]=m[y]?function(F){return(p=!p)?{value:Me(m[y](F)),done:y==="return"}:E?E(F):F}:E}}function he(m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var I=m[Symbol.asyncIterator],p;return I?I.call(m):(m=typeof le=="function"?le(m):m[Symbol.iterator](),p={},g("next"),g("throw"),g("return"),p[Symbol.asyncIterator]=function(){return this},p);function g(E){p[E]=m[E]&&function(F){return new Promise(function(j,W){F=m[E](F),y(j,W,F.done,F.value)})}}function y(E,F,j,W){Promise.resolve(W).then(function(O){E({value:O,done:j})},F)}}function de(m,I){return Object.defineProperty?Object.defineProperty(m,"raw",{value:I}):m.raw=I,m}function L(m){if(m&&m.__esModule)return m;var I={};if(m!=null)for(var p in m)Object.hasOwnProperty.call(m,p)&&(I[p]=m[p]);return I.default=m,I}function Q(m){return m&&m.__esModule?m:{default:m}}function ne(m,I){if(!I.has(m))throw new TypeError("attempted to get private field on non-instance");return I.get(m)}function _e(m,I,p){if(!I.has(m))throw new TypeError("attempted to set private field on non-instance");return I.set(m,p),p}},85906:function(He,q,K){"use strict";K.r(q),K.d(q,{__assign:function(){return J},__asyncDelegator:function(){return re},__asyncGenerator:function(){return ce},__asyncValues:function(){return he},__await:function(){return Me},__awaiter:function(){return fe},__classPrivateFieldGet:function(){return ne},__classPrivateFieldSet:function(){return _e},__createBinding:function(){return Pe},__decorate:function(){return De},__exportStar:function(){return me},__extends:function(){return Ie},__generator:function(){return Te},__importDefault:function(){return Q},__importStar:function(){return L},__makeTemplateObject:function(){return de},__metadata:function(){return ue},__param:function(){return ae},__read:function(){return ke},__rest:function(){return Ee},__spread:function(){return at},__spreadArrays:function(){return Je},__values:function(){return le}});var Z=K(52677),ve=K.n(Z);var _=function(I,p){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var E in y)y.hasOwnProperty(E)&&(g[E]=y[E])},_(I,p)};function Ie(m,I){_(m,I);function p(){this.constructor=m}m.prototype=I===null?Object.create(I):(p.prototype=I.prototype,new p)}var J=function(){return J=Object.assign||function(p){for(var g,y=1,E=arguments.length;y<E;y++){g=arguments[y];for(var F in g)Object.prototype.hasOwnProperty.call(g,F)&&(p[F]=g[F])}return p},J.apply(this,arguments)};function Ee(m,I){var p={};for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&I.indexOf(g)<0&&(p[g]=m[g]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,g=Object.getOwnPropertySymbols(m);y<g.length;y++)I.indexOf(g[y])<0&&Object.prototype.propertyIsEnumerable.call(m,g[y])&&(p[g[y]]=m[g[y]]);return p}function De(m,I,p,g){var y=arguments.length,E=y<3?I:g===null?g=Object.getOwnPropertyDescriptor(I,p):g,F;if((typeof Reflect>"u"?"undefined":ve()(Reflect))==="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(m,I,p,g);else for(var j=m.length-1;j>=0;j--)(F=m[j])&&(E=(y<3?F(E):y>3?F(I,p,E):F(I,p))||E);return y>3&&E&&Object.defineProperty(I,p,E),E}function ae(m,I){return function(p,g){I(p,g,m)}}function ue(m,I){if((typeof Reflect>"u"?"undefined":ve()(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(m,I)}function fe(m,I,p,g){function y(E){return E instanceof p?E:new p(function(F){F(E)})}return new(p||(p=Promise))(function(E,F){function j(V){try{O(g.next(V))}catch(Ae){F(Ae)}}function W(V){try{O(g.throw(V))}catch(Ae){F(Ae)}}function O(V){V.done?E(V.value):y(V.value).then(j,W)}O((g=g.apply(m,I||[])).next())})}function Te(m,I){var p={label:0,sent:function(){if(E[0]&1)throw E[1];return E[1]},trys:[],ops:[]},g,y,E,F;return F={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function j(O){return function(V){return W([O,V])}}function W(O){if(g)throw new TypeError("Generator is already executing.");for(;p;)try{if(g=1,y&&(E=O[0]&2?y.return:O[0]?y.throw||((E=y.return)&&E.call(y),0):y.next)&&!(E=E.call(y,O[1])).done)return E;switch(y=0,E&&(O=[O[0]&2,E.value]),O[0]){case 0:case 1:E=O;break;case 4:return p.label++,{value:O[1],done:!1};case 5:p.label++,y=O[1],O=[0];continue;case 7:O=p.ops.pop(),p.trys.pop();continue;default:if(E=p.trys,!(E=E.length>0&&E[E.length-1])&&(O[0]===6||O[0]===2)){p=0;continue}if(O[0]===3&&(!E||O[1]>E[0]&&O[1]<E[3])){p.label=O[1];break}if(O[0]===6&&p.label<E[1]){p.label=E[1],E=O;break}if(E&&p.label<E[2]){p.label=E[2],p.ops.push(O);break}E[2]&&p.ops.pop(),p.trys.pop();continue}O=I.call(m,p)}catch(V){O=[6,V],y=0}finally{g=E=0}if(O[0]&5)throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}}function Pe(m,I,p,g){g===void 0&&(g=p),m[g]=I[p]}function me(m,I){for(var p in m)p!=="default"&&!I.hasOwnProperty(p)&&(I[p]=m[p])}function le(m){var I=typeof Symbol=="function"&&Symbol.iterator,p=I&&m[I],g=0;if(p)return p.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&g>=m.length&&(m=void 0),{value:m&&m[g++],done:!m}}};throw new TypeError(I?"Object is not iterable.":"Symbol.iterator is not defined.")}function ke(m,I){var p=typeof Symbol=="function"&&m[Symbol.iterator];if(!p)return m;var g=p.call(m),y,E=[],F;try{for(;(I===void 0||I-- >0)&&!(y=g.next()).done;)E.push(y.value)}catch(j){F={error:j}}finally{try{y&&!y.done&&(p=g.return)&&p.call(g)}finally{if(F)throw F.error}}return E}function at(){for(var m=[],I=0;I<arguments.length;I++)m=m.concat(ke(arguments[I]));return m}function Je(){for(var m=0,I=0,p=arguments.length;I<p;I++)m+=arguments[I].length;for(var g=Array(m),y=0,I=0;I<p;I++)for(var E=arguments[I],F=0,j=E.length;F<j;F++,y++)g[y]=E[F];return g}function Me(m){return this instanceof Me?(this.v=m,this):new Me(m)}function ce(m,I,p){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=p.apply(m,I||[]),y,E=[];return y={},F("next"),F("throw"),F("return"),y[Symbol.asyncIterator]=function(){return this},y;function F(ge){g[ge]&&(y[ge]=function(Re){return new Promise(function(Tt,wr){E.push([ge,Re,Tt,wr])>1||j(ge,Re)})})}function j(ge,Re){try{W(g[ge](Re))}catch(Tt){Ae(E[0][3],Tt)}}function W(ge){ge.value instanceof Me?Promise.resolve(ge.value.v).then(O,V):Ae(E[0][2],ge)}function O(ge){j("next",ge)}function V(ge){j("throw",ge)}function Ae(ge,Re){ge(Re),E.shift(),E.length&&j(E[0][0],E[0][1])}}function re(m){var I,p;return I={},g("next"),g("throw",function(y){throw y}),g("return"),I[Symbol.iterator]=function(){return this},I;function g(y,E){I[y]=m[y]?function(F){return(p=!p)?{value:Me(m[y](F)),done:y==="return"}:E?E(F):F}:E}}function he(m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var I=m[Symbol.asyncIterator],p;return I?I.call(m):(m=typeof le=="function"?le(m):m[Symbol.iterator](),p={},g("next"),g("throw"),g("return"),p[Symbol.asyncIterator]=function(){return this},p);function g(E){p[E]=m[E]&&function(F){return new Promise(function(j,W){F=m[E](F),y(j,W,F.done,F.value)})}}function y(E,F,j,W){Promise.resolve(W).then(function(O){E({value:O,done:j})},F)}}function de(m,I){return Object.defineProperty?Object.defineProperty(m,"raw",{value:I}):m.raw=I,m}function L(m){if(m&&m.__esModule)return m;var I={};if(m!=null)for(var p in m)Object.hasOwnProperty.call(m,p)&&(I[p]=m[p]);return I.default=m,I}function Q(m){return m&&m.__esModule?m:{default:m}}function ne(m,I){if(!I.has(m))throw new TypeError("attempted to get private field on non-instance");return I.get(m)}function _e(m,I,p){if(!I.has(m))throw new TypeError("attempted to set private field on non-instance");return I.set(m,p),p}},1354:function(He,q,K){He.exports=self.fetch||(self.fetch=K(13576).default||K(13576))},13576:function(He,q,K){"use strict";K.r(q),K.d(q,{default:function(){return Z}});function Z(ve,_){return _=_||{},new Promise(function(Ie,J){var Ee=new XMLHttpRequest,De=[],ae=[],ue={},fe=function(){return{ok:(Ee.status/100|0)==2,statusText:Ee.statusText,status:Ee.status,url:Ee.responseURL,text:function(){return Promise.resolve(Ee.responseText)},json:function(){return Promise.resolve(Ee.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([Ee.response]))},clone:fe,headers:{keys:function(){return De},entries:function(){return ae},get:function(Pe){return ue[Pe.toLowerCase()]},has:function(Pe){return Pe.toLowerCase()in ue}}}};for(var Te in Ee.open(_.method||"get",ve,!0),Ee.onload=function(){Ee.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(Pe,me,le){De.push(me=me.toLowerCase()),ae.push([me,le]),ue[me]=ue[me]?ue[me]+","+le:le}),Ie(fe())},Ee.onerror=J,Ee.withCredentials=_.credentials=="include",_.headers)Ee.setRequestHeader(Te,_.headers[Te]);Ee.send(_.body||null)})}},40926:function(He,q,K){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.isBrowserCryptoAvailable=q.getSubtleCrypto=q.getBrowerCrypto=void 0;function Z(){return(K.g===null||K.g===void 0?void 0:K.g.crypto)||(K.g===null||K.g===void 0?void 0:K.g.msCrypto)||{}}q.getBrowerCrypto=Z;function ve(){const Ie=Z();return Ie.subtle||Ie.webkitSubtle}q.getSubtleCrypto=ve;function _(){return!!Z()&&!!ve()}q.isBrowserCryptoAvailable=_},88618:function(He,q,K){"use strict";var Z=K(34155);Object.defineProperty(q,"__esModule",{value:!0}),q.isBrowser=q.isNode=q.isReactNative=void 0;function ve(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}q.isReactNative=ve;function _(){return typeof Z<"u"&&typeof Z.versions<"u"&&typeof Z.versions.node<"u"}q.isNode=_;function Ie(){return!ve()&&!_()}q.isBrowser=Ie},1468:function(He,q,K){"use strict";Object.defineProperty(q,"__esModule",{value:!0});const Z=K(20933);Z.__exportStar(K(40926),q),Z.__exportStar(K(88618),q)},15006:function(He,q,K){"use strict";K.d(q,{EthereumProvider:function(){return n0}});var Z=K(17187),ve=K.n(Z),_=K(5015);const Ie=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,J=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Ee=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function De(h,r){if(h==="__proto__"||h==="constructor"&&r&&typeof r=="object"&&"prototype"in r){ae(h);return}return r}function ae(h){console.warn(`[destr] Dropping "${h}" key to prevent prototype pollution.`)}function ue(h,r={}){if(typeof h!="string")return h;const n=h.trim();if(h[0]==='"'&&h.at(-1)==='"'&&!h.includes("\\"))return n.slice(1,-1);if(n.length<=9){const o=n.toLowerCase();if(o==="true")return!0;if(o==="false")return!1;if(o==="undefined")return;if(o==="null")return null;if(o==="nan")return Number.NaN;if(o==="infinity")return Number.POSITIVE_INFINITY;if(o==="-infinity")return Number.NEGATIVE_INFINITY}if(!Ee.test(h)){if(r.strict)throw new SyntaxError("[destr] Invalid JSON");return h}try{if(Ie.test(h)||J.test(h)){if(r.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(h,De)}return JSON.parse(h)}catch(o){if(r.strict)throw o;return h}}function fe(h,r={}){return ue(h,{...r,strict:!0})}var Te=K(48764).Buffer;function Pe(h){return!h||typeof h.then!="function"?Promise.resolve(h):h}function me(h,...r){try{return Pe(h(...r))}catch(n){return Promise.reject(n)}}function le(h){const r=typeof h;return h===null||r!=="object"&&r!=="function"}function ke(h){const r=Object.getPrototypeOf(h);return!r||r.isPrototypeOf(Object)}function at(h){if(le(h))return String(h);if(ke(h)||Array.isArray(h))return JSON.stringify(h);if(typeof h.toJSON=="function")return at(h.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function Je(){if(typeof Te===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const Me="base64:";function ce(h){if(typeof h=="string")return h;Je();const r=Te.from(h).toString("base64");return Me+r}function re(h){return typeof h!="string"||!h.startsWith(Me)?h:(Je(),Te.from(h.slice(Me.length),"base64"))}const he=null;function de(h,r){if(r=ne(r),!r)return h;const n={...h};for(const o of he)n[o]=(a="",...d)=>h[o](r+a,...d);return n.getKeys=(o="",...a)=>h.getKeys(r+o,...a).then(d=>d.map(b=>b.slice(r.length))),n}function L(h){return h?h.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function Q(...h){return L(h.join(":"))}function ne(h){return h=L(h),h?h+":":""}function _e(h){return h}const m="memory",I=()=>{const h=new Map;return{name:m,options:{},hasItem(r){return h.has(r)},getItem(r){return h.get(r)??null},getItemRaw(r){return h.get(r)??null},setItem(r,n){h.set(r,n)},setItemRaw(r,n){h.set(r,n)},removeItem(r){h.delete(r)},getKeys(){return Array.from(h.keys())},clear(){h.clear()},dispose(){h.clear()}}};function p(h={}){const r={mounts:{"":h.driver||I()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=R=>{for(const B of r.mountpoints)if(R.startsWith(B))return{base:B,relativeKey:R.slice(B.length),driver:r.mounts[B]};return{base:"",relativeKey:R,driver:r.mounts[""]}},o=(R,B)=>r.mountpoints.filter(Y=>Y.startsWith(R)||B&&R.startsWith(Y)).map(Y=>({relativeBase:R.length>Y.length?R.slice(Y.length):void 0,mountpoint:Y,driver:r.mounts[Y]})),a=(R,B)=>{if(r.watching){B=L(B);for(const Y of r.watchListeners)Y(R,B)}},d=async()=>{if(!r.watching){r.watching=!0;for(const R in r.mounts)r.unwatch[R]=await E(r.mounts[R],a,R)}},b=async()=>{if(r.watching){for(const R in r.unwatch)await r.unwatch[R]();r.unwatch={},r.watching=!1}},A=(R,B,Y)=>{const se=new Map,Se=pe=>{let Ge=se.get(pe.base);return Ge||(Ge={driver:pe.driver,base:pe.base,items:[]},se.set(pe.base,Ge)),Ge};for(const pe of R){const Ge=typeof pe=="string",lt=L(Ge?pe:pe.key),rt=Ge?void 0:pe.value,sr=Ge||!pe.options?B:{...B,...pe.options},nt=n(lt);Se(nt).items.push({key:lt,value:rt,relativeKey:nt.relativeKey,options:sr})}return Promise.all([...se.values()].map(pe=>Y(pe))).then(pe=>pe.flat())},$={hasItem(R,B={}){R=L(R);const{relativeKey:Y,driver:se}=n(R);return me(se.hasItem,Y,B)},getItem(R,B={}){R=L(R);const{relativeKey:Y,driver:se}=n(R);return me(se.getItem,Y,B).then(Se=>ue(Se))},getItems(R,B){return A(R,B,Y=>Y.driver.getItems?me(Y.driver.getItems,Y.items.map(se=>({key:se.relativeKey,options:se.options})),B).then(se=>se.map(Se=>({key:Q(Y.base,Se.key),value:ue(Se.value)}))):Promise.all(Y.items.map(se=>me(Y.driver.getItem,se.relativeKey,se.options).then(Se=>({key:se.key,value:ue(Se)})))))},getItemRaw(R,B={}){R=L(R);const{relativeKey:Y,driver:se}=n(R);return se.getItemRaw?me(se.getItemRaw,Y,B):me(se.getItem,Y,B).then(Se=>re(Se))},async setItem(R,B,Y={}){if(B===void 0)return $.removeItem(R);R=L(R);const{relativeKey:se,driver:Se}=n(R);Se.setItem&&(await me(Se.setItem,se,at(B),Y),Se.watch||a("update",R))},async setItems(R,B){await A(R,B,async Y=>{Y.driver.setItems&&await me(Y.driver.setItems,Y.items.map(se=>({key:se.relativeKey,value:at(se.value),options:se.options})),B),Y.driver.setItem&&await Promise.all(Y.items.map(se=>me(Y.driver.setItem,se.relativeKey,at(se.value),se.options)))})},async setItemRaw(R,B,Y={}){if(B===void 0)return $.removeItem(R,Y);R=L(R);const{relativeKey:se,driver:Se}=n(R);if(Se.setItemRaw)await me(Se.setItemRaw,se,B,Y);else if(Se.setItem)await me(Se.setItem,se,ce(B),Y);else return;Se.watch||a("update",R)},async removeItem(R,B={}){typeof B=="boolean"&&(B={removeMeta:B}),R=L(R);const{relativeKey:Y,driver:se}=n(R);se.removeItem&&(await me(se.removeItem,Y,B),(B.removeMeta||B.removeMata)&&await me(se.removeItem,Y+"$",B),se.watch||a("remove",R))},async getMeta(R,B={}){typeof B=="boolean"&&(B={nativeOnly:B}),R=L(R);const{relativeKey:Y,driver:se}=n(R),Se=Object.create(null);if(se.getMeta&&Object.assign(Se,await me(se.getMeta,Y,B)),!B.nativeOnly){const pe=await me(se.getItem,Y+"$",B).then(Ge=>ue(Ge));pe&&typeof pe=="object"&&(typeof pe.atime=="string"&&(pe.atime=new Date(pe.atime)),typeof pe.mtime=="string"&&(pe.mtime=new Date(pe.mtime)),Object.assign(Se,pe))}return Se},setMeta(R,B,Y={}){return this.setItem(R+"$",B,Y)},removeMeta(R,B={}){return this.removeItem(R+"$",B)},async getKeys(R,B={}){R=ne(R);const Y=o(R,!0);let se=[];const Se=[];for(const pe of Y){const lt=(await me(pe.driver.getKeys,pe.relativeBase,B)).map(rt=>pe.mountpoint+L(rt)).filter(rt=>!se.some(sr=>rt.startsWith(sr)));Se.push(...lt),se=[pe.mountpoint,...se.filter(rt=>!rt.startsWith(pe.mountpoint))]}return R?Se.filter(pe=>pe.startsWith(R)&&!pe.endsWith("$")):Se.filter(pe=>!pe.endsWith("$"))},async clear(R,B={}){R=ne(R),await Promise.all(o(R,!1).map(async Y=>{if(Y.driver.clear)return me(Y.driver.clear,Y.relativeBase,B);if(Y.driver.removeItem){const se=await Y.driver.getKeys(Y.relativeBase||"",B);return Promise.all(se.map(Se=>Y.driver.removeItem(Se,B)))}}))},async dispose(){await Promise.all(Object.values(r.mounts).map(R=>F(R)))},async watch(R){return await d(),r.watchListeners.push(R),async()=>{r.watchListeners=r.watchListeners.filter(B=>B!==R),r.watchListeners.length===0&&await b()}},async unwatch(){r.watchListeners=[],await b()},mount(R,B){if(R=ne(R),R&&r.mounts[R])throw new Error(`already mounted at ${R}`);return R&&(r.mountpoints.push(R),r.mountpoints.sort((Y,se)=>se.length-Y.length)),r.mounts[R]=B,r.watching&&Promise.resolve(E(B,a,R)).then(Y=>{r.unwatch[R]=Y}).catch(console.error),$},async unmount(R,B=!0){R=ne(R),!(!R||!r.mounts[R])&&(r.watching&&R in r.unwatch&&(r.unwatch[R](),delete r.unwatch[R]),B&&await F(r.mounts[R]),r.mountpoints=r.mountpoints.filter(Y=>Y!==R),delete r.mounts[R])},getMount(R=""){R=L(R)+":";const B=n(R);return{driver:B.driver,base:B.base}},getMounts(R="",B={}){return R=L(R),o(R,B.parents).map(se=>({driver:se.driver,base:se.mountpoint}))}};return $}async function g(h,r){r=normalizeBaseKey(r);const n=await h.getKeys(r),o={};return await Promise.all(n.map(async a=>{o[a.slice(r.length)]=await h.getItem(a)})),o}async function y(h,r,n=""){n=normalizeBaseKey(n),await Promise.all(Object.entries(r).map(o=>h.setItem(n+o[0],o[1])))}function E(h,r,n){return h.watch?h.watch((o,a)=>r(o,n+a)):()=>{}}async function F(h){typeof h.dispose=="function"&&await me(h.dispose)}const j={azureAppConfiguration:"unstorage/drivers/azure-app-configuration",azureCosmos:"unstorage/drivers/azure-cosmos",azureKeyVault:"unstorage/drivers/azure-key-vault",azureStorageBlob:"unstorage/drivers/azure-storage-blob",azureStorageTable:"unstorage/drivers/azure-storage-table",cloudflareKVBinding:"unstorage/drivers/cloudflare-kv-binding",cloudflareKVHTTP:"unstorage/drivers/cloudflare-kv-http",cloudflareR2Binding:"unstorage/drivers/cloudflare-r2-binding",fs:"unstorage/drivers/fs",fsLite:"unstorage/drivers/fs-lite",github:"unstorage/drivers/github",http:"unstorage/drivers/http",indexedb:"unstorage/drivers/indexedb",localStorage:"unstorage/drivers/localstorage",lruCache:"unstorage/drivers/lru-cache",memory:"unstorage/drivers/memory",mongodb:"unstorage/drivers/mongodb",netlifyBlobs:"unstorage/drivers/netlify-blobs",overlay:"unstorage/drivers/overlay",planetscale:"unstorage/drivers/planetscale",redis:"unstorage/drivers/redis",sessionStorage:"unstorage/drivers/session-storage",vercelKV:"unstorage/drivers/vercel-kv","cloudflare-kv-binding":"unstorage/drivers/cloudflare-kv-binding","cloudflare-kv-http":"unstorage/drivers/cloudflare-kv-http"};function W(h){return new Promise((r,n)=>{h.oncomplete=h.onsuccess=()=>r(h.result),h.onabort=h.onerror=()=>n(h.error)})}function O(h,r){const n=indexedDB.open(h);n.onupgradeneeded=()=>n.result.createObjectStore(r);const o=W(n);return(a,d)=>o.then(b=>d(b.transaction(r,a).objectStore(r)))}let V;function Ae(){return V||(V=O("keyval-store","keyval")),V}function ge(h,r=Ae()){return r("readonly",n=>W(n.get(h)))}function Re(h,r,n=Ae()){return n("readwrite",o=>(o.put(r,h),W(o.transaction)))}function Tt(h,r=Ae()){return r("readwrite",n=>(h.forEach(o=>n.put(o[1],o[0])),W(n.transaction)))}function wr(h,r=Ae()){return r("readonly",n=>Promise.all(h.map(o=>W(n.get(o)))))}function Et(h,r,n=Ae()){return n("readwrite",o=>new Promise((a,d)=>{o.get(h).onsuccess=function(){try{o.put(r(this.result),h),a(W(o.transaction))}catch(b){d(b)}}}))}function H(h,r=Ae()){return r("readwrite",n=>(n.delete(h),W(n.transaction)))}function k(h,r=Ae()){return r("readwrite",n=>(h.forEach(o=>n.delete(o)),W(n.transaction)))}function M(h=Ae()){return h("readwrite",r=>(r.clear(),W(r.transaction)))}function l(h,r){return h.openCursor().onsuccess=function(){this.result&&(r(this.result),this.result.continue())},W(h.transaction)}function C(h=Ae()){return h("readonly",r=>{if(r.getAllKeys)return W(r.getAllKeys());const n=[];return l(r,o=>n.push(o.key)).then(()=>n)})}function Ce(h=Ae()){return h("readonly",r=>{if(r.getAll)return W(r.getAll());const n=[];return l(r,o=>n.push(o.value)).then(()=>n)})}function $e(h=Ae()){return h("readonly",r=>{if(r.getAll&&r.getAllKeys)return Promise.all([W(r.getAllKeys()),W(r.getAll())]).then(([o,a])=>o.map((d,b)=>[d,a[b]]));const n=[];return h("readonly",o=>l(o,a=>n.push([a.key,a.value])).then(()=>n))})}const it=h=>JSON.stringify(h,(r,n)=>typeof n=="bigint"?n.toString()+"n":n),mt=h=>{const r=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=h.replace(r,'$1"$2n"$3');return JSON.parse(n,(o,a)=>typeof a=="string"&&a.match(/^\d+n$/)?BigInt(a.substring(0,a.length-1)):a)};function Qe(h){if(typeof h!="string")throw new Error(`Cannot safe json parse value of type ${typeof h}`);try{return mt(h)}catch{return h}}function tt(h){return typeof h=="string"?h:it(h)||""}function Xt(h){return h}const cr="idb-keyval";var er=(h={})=>{const r=h.base&&h.base.length>0?`${h.base}:`:"",n=a=>r+a;let o;return h.dbName&&h.storeName&&(o=O(h.dbName,h.storeName)),{name:cr,options:h,async hasItem(a){return!(typeof await ge(n(a),o)>"u")},async getItem(a){return await ge(n(a),o)??null},setItem(a,d){return Re(n(a),d,o)},removeItem(a){return H(n(a),o)},getKeys(){return C(o)},clear(){return M(o)}}};const Vt="WALLET_CONNECT_V2_INDEXED_DB",Mt="keyvaluestorage";class Dt{constructor(){this.indexedDb=p({driver:er({dbName:Vt,storeName:Mt})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(r=>[r.key,r.value])}async getItem(r){const n=await this.indexedDb.getItem(r);if(n!==null)return n}async setItem(r,n){await this.indexedDb.setItem(r,tt(n))}async removeItem(r){await this.indexedDb.removeItem(r)}}var xt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof K.g<"u"?K.g:typeof self<"u"?self:{},ct={exports:{}};(function(){let h;function r(){}h=r,h.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},h.prototype.setItem=function(n,o){this[n]=String(o)},h.prototype.removeItem=function(n){delete this[n]},h.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(o){n[o]=void 0,delete n[o]})},h.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},h.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof xt<"u"&&xt.localStorage?ct.exports=xt.localStorage:typeof window<"u"&&window.localStorage?ct.exports=window.localStorage:ct.exports=new r})();function dt(h){var r;return[h[0],Qe((r=h[1])!=null?r:"")]}class _t{constructor(){this.localStorage=ct.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(dt)}async getItem(r){const n=this.localStorage.getItem(r);if(n!==null)return Qe(n)}async setItem(r,n){this.localStorage.setItem(r,tt(n))}async removeItem(r){this.localStorage.removeItem(r)}}const ht="wc_storage_version",zt=1,tr=async(h,r,n)=>{const o=ht,a=await r.getItem(o);if(a&&a>=zt){n(r);return}const d=await h.getKeys();if(!d.length){n(r);return}const b=[];for(;d.length;){const A=d.shift();if(!A)continue;const $=A.toLowerCase();if($.includes("wc@")||$.includes("walletconnect")||$.includes("wc_")||$.includes("wallet_connect")){const R=await h.getItem(A);await r.setItem(A,R),b.push(A)}}await r.setItem(o,zt),n(r),hr(h,b)},hr=async(h,r)=>{r.length&&r.forEach(async n=>{await h.removeItem(n)})};class lr{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const r=new _t;this.storage=r;try{const n=new Dt;tr(r,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(r){return await this.initialize(),this.storage.getItem(r)}async setItem(r,n){return await this.initialize(),this.storage.setItem(r,n)}async removeItem(r){return await this.initialize(),this.storage.removeItem(r)}async initialize(){this.initialized||await new Promise(r=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),r())},20)})}}var Nt=K(90772),je=K(9107),rr=K(38200);class qr extends rr.q{constructor(r){super(),this.opts=r,this.protocol="wc",this.version=2}}class yr{constructor(r,n,o){this.core=r,this.logger=n}}class Xr extends rr.q{constructor(r,n){super(),this.core=r,this.logger=n,this.records=new Map}}class mi{constructor(r,n){this.logger=r,this.core=n}}class Li extends rr.q{constructor(r,n){super(),this.relayer=r,this.logger=n}}class _i extends rr.q{constructor(r){super()}}class ai{constructor(r,n,o,a){this.core=r,this.logger=n,this.name=o}}class Ut{constructor(){this.map=new Map}}class Lt extends rr.q{constructor(r,n){super(),this.relayer=r,this.logger=n}}class $t{constructor(r,n){this.core=r,this.logger=n}}class Pt extends rr.q{constructor(r,n){super(),this.core=r,this.logger=n}}class ir{constructor(r,n){this.logger=r,this.core=n}}class kt{constructor(r,n){this.projectId=r,this.logger=n}}class Gt{constructor(r,n){this.projectId=r,this.logger=n}}class nr extends null{constructor(){super()}}class Wt{constructor(r){this.opts=r,this.protocol="wc",this.version=2}}class Jt extends null{constructor(){super()}}class Ft{constructor(r){this.client=r}}var pt=K(31050),Zt=K(31416),we=K(66736);const Qt="EdDSA",Yt="JWT",gs=".",Br="base64url",Co="utf8",To="utf8",Do=":",No="did",Lo="key",ci="base58btc",Fo="z",jo="K36",Uc=32,Mo=32;var zo=K(20605),Fi=K(92263),zn=K(52217);function dn(h){return safeJsonParse(toString(fromString(h,JWT_ENCODING),JSON_ENCODING))}function Nr(h){return(0,Fi.B)((0,zn.m)(tt(h),Co),Br)}function ys(h){const r=(0,zn.m)(jo,ci),n=Fo+(0,Fi.B)((0,zo.z)([r,h]),ci);return[No,Lo,n].join(Do)}function $c(h){const[r,n,o]=h.split(DID_DELIMITER);if(r!==DID_PREFIX||n!==DID_METHOD)throw new Error('Issuer must be a DID with method "key"');if(o.slice(0,1)!==MULTICODEC_ED25519_BASE)throw new Error("Issuer must be a key in mulicodec format");const d=fromString(o.slice(1),MULTICODEC_ED25519_ENCODING);if(toString(d.slice(0,2),MULTICODEC_ED25519_ENCODING)!==MULTICODEC_ED25519_HEADER)throw new Error('Issuer must be a public key with type "Ed25519"');const A=d.slice(2);if(A.length!==MULTICODEC_ED25519_LENGTH)throw new Error("Issuer must be a public key with length 32 bytes");return A}function Uo(h){return(0,Fi.B)(h,Br)}function $o(h){return fromString(h,JWT_ENCODING)}function qo(h){return(0,zn.m)([Nr(h.header),Nr(h.payload)].join(gs),To)}function qc(h){const r=toString(h,DATA_ENCODING).split(JWT_DELIMITER),n=dn(r[0]),o=dn(r[1]);return{header:n,payload:o}}function pn(h){return[Nr(h.header),Nr(h.payload),Uo(h.signature)].join(gs)}function Bc(h){const r=h.split(JWT_DELIMITER),n=dn(r[0]),o=dn(r[1]),a=$o(r[2]),d=fromString(r.slice(0,2).join(JWT_DELIMITER),DATA_ENCODING);return{header:n,payload:o,signature:a,data:d}}function ji(h=(0,Zt.randomBytes)(Mo)){return pt._w(h)}async function vs(h,r,n,o,a=(0,we.fromMiliseconds)(Date.now())){const d={alg:Qt,typ:Yt},b=ys(o.publicKey),A=a+n,$={iss:b,sub:h,aud:r,iat:a,exp:A},R=qo({header:d,payload:$}),B=pt.Xx(o.secretKey,R);return pn({header:d,payload:$,signature:B})}async function Bo(h){const{header:r,payload:n,data:o,signature:a}=decodeJWT(h);if(r.alg!==JWT_IRIDIUM_ALG||r.typ!==JWT_IRIDIUM_TYP)throw new Error("JWT must use EdDSA algorithm");const d=decodeIss(n.iss);return ed25519.verify(d,o,a)}var Hc=K(43014),Ho=K(37466);const Ko="PARSE_ERROR",Vo="INVALID_REQUEST",ms="METHOD_NOT_FOUND",ko="INVALID_PARAMS",_s="INTERNAL_ERROR",gn="SERVER_ERROR",yn=[-32700,-32600,-32601,-32602,-32603],Qi=null,Yi={[Ko]:{code:-32700,message:"Parse error"},[Vo]:{code:-32600,message:"Invalid Request"},[ms]:{code:-32601,message:"Method not found"},[ko]:{code:-32602,message:"Invalid params"},[_s]:{code:-32603,message:"Internal error"},[gn]:{code:-32e3,message:"Server error"}},ws=gn;function wi(h){return h<=SERVER_ERROR_CODE_RANGE[0]&&h>=SERVER_ERROR_CODE_RANGE[1]}function bs(h){return yn.includes(h)}function Go(h){return typeof h=="number"}function Es(h){return Object.keys(Yi).includes(h)?Yi[h]:Yi[ws]}function xs(h){const r=Object.values(Yi).find(n=>n.code===h);return r||Yi[ws]}function Kc(h){if(typeof h.error.code>"u")return{valid:!1,error:"Missing code for JSON-RPC error"};if(typeof h.error.message>"u")return{valid:!1,error:"Missing message for JSON-RPC error"};if(!Go(h.error.code))return{valid:!1,error:`Invalid error code type for JSON-RPC: ${h.error.code}`};if(bs(h.error.code)){const r=xs(h.error.code);if(r.message!==STANDARD_ERROR_MAP[DEFAULT_ERROR].message&&h.error.message===r.message)return{valid:!1,error:`Invalid error code message for JSON-RPC: ${h.error.code}`}}return{valid:!0}}function ui(h,r,n){return h.message.includes("getaddrinfo ENOTFOUND")||h.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${r}`):h}var Is=K(1468);const Vc=null;function Mi(h=3){const r=Date.now()*Math.pow(10,h),n=Math.floor(Math.random()*Math.pow(10,h));return r+n}function Ps(h=6){return BigInt(Mi(h))}function hi(h,r,n){return{id:n||Mi(),jsonrpc:"2.0",method:h,params:r}}function vn(h,r){return{id:h,jsonrpc:"2.0",result:r}}function Xi(h,r,n){return{id:h,jsonrpc:"2.0",error:Ss(r,n)}}function Ss(h,r){return typeof h>"u"?Es(_s):(typeof h=="string"&&(h=Object.assign(Object.assign({},Es(gn)),{message:h})),typeof r<"u"&&(h.data=r),bs(h.code)&&(h=xs(h.code)),h)}class Os{}class mn extends null{constructor(r){super()}}class Rs extends Os{constructor(){super()}}class Wo extends Rs{constructor(r){super()}}const Jo="^https?:",Zo="^wss?:";function x(h){const r=h.match(new RegExp(/^\w+:/,"gi"));if(!(!r||!r.length))return r[0]}function T(h,r){const n=x(h);return typeof n>"u"?!1:new RegExp(r).test(n)}function ie(h){return T(h,Jo)}function be(h){return T(h,Zo)}function gt(h){return new RegExp("wss?://localhost(:d{2,5})?").test(h)}function ze(h){return typeof h=="object"&&"id"in h&&"jsonrpc"in h&&h.jsonrpc==="2.0"}function wt(h){return ze(h)&&"method"in h}function At(h){return ze(h)&&(yt(h)||Ye(h))}function yt(h){return"result"in h}function Ye(h){return"error"in h}function Sr(h){return"error"in h&&h.valid===!1}class qt extends Wo{constructor(r){super(r),this.events=new Z.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(r),this.connection.connected&&this.registerEventListeners()}async connect(r=this.connection){await this.open(r)}async disconnect(){await this.close()}on(r,n){this.events.on(r,n)}once(r,n){this.events.once(r,n)}off(r,n){this.events.off(r,n)}removeListener(r,n){this.events.removeListener(r,n)}async request(r,n){return this.requestStrict(hi(r.method,r.params||[],r.id||Ps().toString()),n)}async requestStrict(r,n){return new Promise(async(o,a)=>{if(!this.connection.connected)try{await this.open()}catch(d){a(d)}this.events.on(`${r.id}`,d=>{Ye(d)?a(d.error):o(d.result)});try{await this.connection.send(r,n)}catch(d){a(d)}})}setConnection(r=this.connection){return r}onPayload(r){this.events.emit("payload",r),At(r)?this.events.emit(`${r.id}`,r):this.events.emit("message",{type:r.method,data:r.params})}onClose(r){r&&r.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${r.code} ${r.reason?`(${r.reason})`:""}`)),this.events.emit("disconnect")}async open(r=this.connection){this.connection===r&&this.connection.connected||(this.connection.connected&&this.close(),typeof r=="string"&&(await this.connection.open(r),r=this.connection),this.connection=this.setConnection(r),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",r=>this.onPayload(r)),this.connection.on("close",r=>this.onClose(r)),this.connection.on("error",r=>this.events.emit("error",r)),this.connection.on("register_error",r=>this.onClose()),this.hasRegisteredEventListeners=!0)}}var fr=null,Lr=null;const Or=()=>typeof WebSocket<"u"?WebSocket:typeof K.g<"u"&&typeof K.g.WebSocket<"u"?K.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:K(57026),li=()=>typeof WebSocket<"u"||typeof K.g<"u"&&typeof K.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Hr=h=>h.split("?")[0],fi=10,As=Or();class _n{constructor(r){if(this.url=r,this.events=new Z.EventEmitter,this.registering=!1,!be(r))throw new Error(`Provided URL is not compatible with WebSocket connection: ${r}`);this.url=r}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(r,n){this.events.on(r,n)}once(r,n){this.events.once(r,n)}off(r,n){this.events.off(r,n)}removeListener(r,n){this.events.removeListener(r,n)}async open(r=this.url){await this.register(r)}async close(){return new Promise((r,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=o=>{this.onClose(o),r()},this.socket.close()})}async send(r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(tt(r))}catch(n){this.onError(r.id,n)}}register(r=this.url){if(!be(r))throw new Error(`Provided URL is not compatible with WebSocket connection: ${r}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((o,a)=>{this.events.once("register_error",d=>{this.resetMaxListeners(),a(d)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return a(new Error("WebSocket connection is missing or invalid"));o(this.socket)})})}return this.url=r,this.registering=!0,new Promise((n,o)=>{const a=new URLSearchParams(r).get("origin"),d=(0,Is.isReactNative)()?{headers:{origin:a}}:{rejectUnauthorized:!gt(r)},b=new As(r,[],d);li()?b.onerror=A=>{const $=A;o(this.emitError($.error))}:b.on("error",A=>{o(this.emitError(A))}),b.onopen=()=>{this.onOpen(b),n(b)}})}onOpen(r){r.onmessage=n=>this.onPayload(n),r.onclose=n=>this.onClose(n),this.socket=r,this.registering=!1,this.events.emit("open")}onClose(r){this.socket=void 0,this.registering=!1,this.events.emit("close",r)}onPayload(r){if(typeof r.data>"u")return;const n=typeof r.data=="string"?Qe(r.data):r.data;this.events.emit("payload",n)}onError(r,n){const o=this.parseError(n),a=o.message||o.toString(),d=Xi(r,a);this.events.emit("payload",d)}parseError(r,n=this.url){return ui(r,Hr(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>fi&&this.events.setMaxListeners(fi)}emitError(r){const n=this.parseError(new Error((r==null?void 0:r.message)||`WebSocket connection failed for host: ${Hr(this.url)}`));return this.events.emit("register_error",n),n}}var wn=K(72307),Sf=K.n(wn),Of=K(1354),Rf=K.n(Of);function Af(h,r){if(h.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),o=0;o<n.length;o++)n[o]=255;for(var a=0;a<h.length;a++){var d=h.charAt(a),b=d.charCodeAt(0);if(n[b]!==255)throw new TypeError(d+" is ambiguous");n[b]=a}var A=h.length,$=h.charAt(0),R=Math.log(A)/Math.log(256),B=Math.log(256)/Math.log(A);function Y(pe){if(pe instanceof Uint8Array||(ArrayBuffer.isView(pe)?pe=new Uint8Array(pe.buffer,pe.byteOffset,pe.byteLength):Array.isArray(pe)&&(pe=Uint8Array.from(pe))),!(pe instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(pe.length===0)return"";for(var Ge=0,lt=0,rt=0,sr=pe.length;rt!==sr&&pe[rt]===0;)rt++,Ge++;for(var nt=(sr-rt)*B+1>>>0,st=new Uint8Array(nt);rt!==sr;){for(var Ot=pe[rt],br=0,Bt=nt-1;(Ot!==0||br<lt)&&Bt!==-1;Bt--,br++)Ot+=256*st[Bt]>>>0,st[Bt]=Ot%A>>>0,Ot=Ot/A>>>0;if(Ot!==0)throw new Error("Non-zero carry");lt=br,rt++}for(var Er=nt-lt;Er!==nt&&st[Er]===0;)Er++;for(var $i=$.repeat(Ge);Er<nt;++Er)$i+=h.charAt(st[Er]);return $i}function se(pe){if(typeof pe!="string")throw new TypeError("Expected String");if(pe.length===0)return new Uint8Array;var Ge=0;if(pe[Ge]!==" "){for(var lt=0,rt=0;pe[Ge]===$;)lt++,Ge++;for(var sr=(pe.length-Ge)*R+1>>>0,nt=new Uint8Array(sr);pe[Ge];){var st=n[pe.charCodeAt(Ge)];if(st===255)return;for(var Ot=0,br=sr-1;(st!==0||Ot<rt)&&br!==-1;br--,Ot++)st+=A*nt[br]>>>0,nt[br]=st%256>>>0,st=st/256>>>0;if(st!==0)throw new Error("Non-zero carry");rt=Ot,Ge++}if(pe[Ge]!==" "){for(var Bt=sr-rt;Bt!==sr&&nt[Bt]===0;)Bt++;for(var Er=new Uint8Array(lt+(sr-Bt)),$i=lt;Bt!==sr;)Er[$i++]=nt[Bt++];return Er}}}function Se(pe){var Ge=se(pe);if(Ge)return Ge;throw new Error(`Non-${r} character`)}return{encode:Y,decodeUnsafe:se,decode:Se}}var Cf=Af,Tf=Cf;const kc=h=>{if(h instanceof Uint8Array&&h.constructor.name==="Uint8Array")return h;if(h instanceof ArrayBuffer)return new Uint8Array(h);if(ArrayBuffer.isView(h))return new Uint8Array(h.buffer,h.byteOffset,h.byteLength);throw new Error("Unknown type, must be binary type")},Df=h=>new TextEncoder().encode(h),Nf=h=>new TextDecoder().decode(h);class Lf{constructor(r,n,o){this.name=r,this.prefix=n,this.baseEncode=o}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}}class Ff{constructor(r,n,o){if(this.name=r,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=o}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return Gc(this,r)}}class jf{constructor(r){this.decoders=r}or(r){return Gc(this,r)}decode(r){const n=r[0],o=this.decoders[n];if(o)return o.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Gc=(h,r)=>new jf({...h.decoders||{[h.prefix]:h},...r.decoders||{[r.prefix]:r}});class Mf{constructor(r,n,o,a){this.name=r,this.prefix=n,this.baseEncode=o,this.baseDecode=a,this.encoder=new Lf(r,n,o),this.decoder=new Ff(r,n,a)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}}const Cs=({name:h,prefix:r,encode:n,decode:o})=>new Mf(h,r,n,o),Un=({prefix:h,name:r,alphabet:n})=>{const{encode:o,decode:a}=Tf(n,r);return Cs({prefix:h,name:r,encode:o,decode:d=>kc(a(d))})},zf=(h,r,n,o)=>{const a={};for(let B=0;B<r.length;++B)a[r[B]]=B;let d=h.length;for(;h[d-1]==="=";)--d;const b=new Uint8Array(d*n/8|0);let A=0,$=0,R=0;for(let B=0;B<d;++B){const Y=a[h[B]];if(Y===void 0)throw new SyntaxError(`Non-${o} character`);$=$<<n|Y,A+=n,A>=8&&(A-=8,b[R++]=255&$>>A)}if(A>=n||255&$<<8-A)throw new SyntaxError("Unexpected end of data");return b},Uf=(h,r,n)=>{const o=r[r.length-1]==="=",a=(1<<n)-1;let d="",b=0,A=0;for(let $=0;$<h.length;++$)for(A=A<<8|h[$],b+=8;b>n;)b-=n,d+=r[a&A>>b];if(b&&(d+=r[a&A<<n-b]),o)for(;d.length*n&7;)d+="=";return d},dr=({name:h,prefix:r,bitsPerChar:n,alphabet:o})=>Cs({prefix:r,name:h,encode(a){return Uf(a,o,n)},decode(a){return zf(a,o,n,h)}}),$f=Cs({prefix:"\0",name:"identity",encode:h=>Nf(h),decode:h=>Df(h)});var qf=Object.freeze({__proto__:null,identity:$f});const Bf=dr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Hf=Object.freeze({__proto__:null,base2:Bf});const Kf=dr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Vf=Object.freeze({__proto__:null,base8:Kf});const kf=Un({prefix:"9",name:"base10",alphabet:"0123456789"});var Gf=Object.freeze({__proto__:null,base10:kf});const Wf=dr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Jf=dr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Zf=Object.freeze({__proto__:null,base16:Wf,base16upper:Jf});const Qf=dr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Yf=dr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Xf=dr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ed=dr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),td=dr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),rd=dr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),id=dr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),nd=dr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),sd=dr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var od=Object.freeze({__proto__:null,base32:Qf,base32upper:Yf,base32pad:Xf,base32padupper:ed,base32hex:td,base32hexupper:rd,base32hexpad:id,base32hexpadupper:nd,base32z:sd});const ad=Un({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),cd=Un({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var ud=Object.freeze({__proto__:null,base36:ad,base36upper:cd});const hd=Un({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ld=Un({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var fd=Object.freeze({__proto__:null,base58btc:hd,base58flickr:ld});const dd=dr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),pd=dr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),gd=dr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),yd=dr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var vd=Object.freeze({__proto__:null,base64:dd,base64pad:pd,base64url:gd,base64urlpad:yd});const Wc=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),md=Wc.reduce((h,r,n)=>(h[n]=r,h),[]),_d=Wc.reduce((h,r,n)=>(h[r.codePointAt(0)]=n,h),[]);function wd(h){return h.reduce((r,n)=>(r+=md[n],r),"")}function bd(h){const r=[];for(const n of h){const o=_d[n.codePointAt(0)];if(o===void 0)throw new Error(`Non-base256emoji character: ${n}`);r.push(o)}return new Uint8Array(r)}const Ed=Cs({prefix:"\u{1F680}",name:"base256emoji",encode:wd,decode:bd});var xd=Object.freeze({__proto__:null,base256emoji:Ed}),Id=Zc,Jc=128,Pd=127,Sd=~Pd,Od=Math.pow(2,31);function Zc(h,r,n){r=r||[],n=n||0;for(var o=n;h>=Od;)r[n++]=h&255|Jc,h/=128;for(;h&Sd;)r[n++]=h&255|Jc,h>>>=7;return r[n]=h|0,Zc.bytes=n-o+1,r}var Rd=Qo,Ad=128,Qc=127;function Qo(h,o){var n=0,o=o||0,a=0,d=o,b,A=h.length;do{if(d>=A)throw Qo.bytes=0,new RangeError("Could not decode varint");b=h[d++],n+=a<28?(b&Qc)<<a:(b&Qc)*Math.pow(2,a),a+=7}while(b>=Ad);return Qo.bytes=d-o,n}var Cd=Math.pow(2,7),Td=Math.pow(2,14),Dd=Math.pow(2,21),Nd=Math.pow(2,28),Ld=Math.pow(2,35),Fd=Math.pow(2,42),jd=Math.pow(2,49),Md=Math.pow(2,56),zd=Math.pow(2,63),Ud=function(h){return h<Cd?1:h<Td?2:h<Dd?3:h<Nd?4:h<Ld?5:h<Fd?6:h<jd?7:h<Md?8:h<zd?9:10},$d={encode:Id,decode:Rd,encodingLength:Ud},Yc=$d;const Xc=(h,r,n=0)=>(Yc.encode(h,r,n),r),eu=h=>Yc.encodingLength(h),Yo=(h,r)=>{const n=r.byteLength,o=eu(h),a=o+eu(n),d=new Uint8Array(a+n);return Xc(h,d,0),Xc(n,d,o),d.set(r,a),new qd(h,n,r,d)};class qd{constructor(r,n,o,a){this.code=r,this.size=n,this.digest=o,this.bytes=a}}const tu=({name:h,code:r,encode:n})=>new Bd(h,r,n);class Bd{constructor(r,n,o){this.name=r,this.code=n,this.encode=o}digest(r){if(r instanceof Uint8Array){const n=this.encode(r);return n instanceof Uint8Array?Yo(this.code,n):n.then(o=>Yo(this.code,o))}else throw Error("Unknown type, must be binary type")}}const ru=h=>async r=>new Uint8Array(await crypto.subtle.digest(h,r)),Hd=tu({name:"sha2-256",code:18,encode:ru("SHA-256")}),Kd=tu({name:"sha2-512",code:19,encode:ru("SHA-512")});var Vd=Object.freeze({__proto__:null,sha256:Hd,sha512:Kd});const iu=0,kd="identity",nu=kc;var Gd=Object.freeze({__proto__:null,identity:{code:iu,name:kd,encode:nu,digest:h=>Yo(iu,nu(h))}});new TextEncoder,new TextDecoder;const su={...qf,...Hf,...Vf,...Gf,...Zf,...od,...ud,...fd,...vd,...xd};({...Vd,...Gd});function ou(h){return globalThis.Buffer!=null?new Uint8Array(h.buffer,h.byteOffset,h.byteLength):h}function Wd(h=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ou(globalThis.Buffer.allocUnsafe(h)):new Uint8Array(h)}function au(h,r,n,o){return{name:h,prefix:r,encoder:{name:h,prefix:r,encode:n},decoder:{decode:o}}}const cu=au("utf8","u",h=>"u"+new TextDecoder("utf8").decode(h),h=>new TextEncoder().encode(h.substring(1))),Xo=au("ascii","a",h=>{let r="a";for(let n=0;n<h.length;n++)r+=String.fromCharCode(h[n]);return r},h=>{h=h.substring(1);const r=Wd(h.length);for(let n=0;n<h.length;n++)r[n]=h.charCodeAt(n);return r}),Jd={utf8:cu,"utf-8":cu,hex:su.base16,latin1:Xo,ascii:Xo,binary:Xo,...su};function Zd(h,r="utf8"){const n=Jd[r];if(!n)throw new Error(`Unsupported encoding "${r}"`);return(r==="utf8"||r==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ou(globalThis.Buffer.from(h,"utf-8")):n.decoder.decode(`${n.prefix}${h}`)}const uu="wc",Qd=2,ea="core",zi=`${uu}@2:${ea}:`,Yd={name:ea,logger:"error"},Xd={database:":memory:"},ep="crypto",hu="client_ed25519_seed",tp=we.ONE_DAY,rp="keychain",ip="0.3",np="messages",sp="0.3",op=we.SIX_HOURS,ap="publisher",lu="irn",cp="error",fu="wss://relay.walletconnect.com",du="wss://relay.walletconnect.org",up="relayer",vr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},hp="_subscription",bi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},lp=we.ONE_SECOND,rE={database:":memory:"},fp="2.11.0",dp=1e4,pp="0.3",gp="WALLETCONNECT_CLIENT_ID",ei={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},iE=null,yp="subscription",vp="0.3",mp=we.FIVE_SECONDS*1e3,_p="pairing",wp="0.3",nE=null,$n={wc_pairingDelete:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:we.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:we.ONE_DAY,prompt:!1,tag:0},res:{ttl:we.ONE_DAY,prompt:!1,tag:0}}},qn={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},di={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},bp="history",Ep="0.3",xp="expirer",Kr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Ip="0.3",sE=null,ta="verify-api",bn="https://verify.walletconnect.com",ra="https://verify.walletconnect.org",Pp=[bn,ra],Sp="echo",Op="https://echo.walletconnect.com";class Rp{constructor(r,n){this.core=r,this.logger=n,this.keychain=new Map,this.name=rp,this.version=ip,this.initialized=!1,this.storagePrefix=zi,this.init=async()=>{if(!this.initialized){const o=await this.getKeyChain();typeof o<"u"&&(this.keychain=o),this.initialized=!0}},this.has=o=>(this.isInitialized(),this.keychain.has(o)),this.set=async(o,a)=>{this.isInitialized(),this.keychain.set(o,a),await this.persist()},this.get=o=>{this.isInitialized();const a=this.keychain.get(o);if(typeof a>"u"){const{message:d}=(0,_.Z7)("NO_MATCHING_KEY",`${this.name}: ${o}`);throw new Error(d)}return a},this.del=async o=>{this.isInitialized(),this.keychain.delete(o),await this.persist()},this.core=r,this.logger=(0,je.generateChildLogger)(n,this.name)}get context(){return(0,je.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(r){await this.core.storage.setItem(this.storageKey,(0,_.KC)(r))}async getKeyChain(){const r=await this.core.storage.getItem(this.storageKey);return typeof r<"u"?(0,_.IP)(r):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:r}=(0,_.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}}class Ap{constructor(r,n,o){this.core=r,this.logger=n,this.name=ep,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=a=>(this.isInitialized(),this.keychain.has(a)),this.getClientId=async()=>{this.isInitialized();const a=await this.getClientSeed(),d=ji(a);return ys(d.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const a=(0,_.Au)();return this.setPrivateKey(a.publicKey,a.privateKey)},this.signJWT=async a=>{this.isInitialized();const d=await this.getClientSeed(),b=ji(d),A=(0,_.jd)();return await vs(A,a,tp,b)},this.generateSharedKey=(a,d,b)=>{this.isInitialized();const A=this.getPrivateKey(a),$=(0,_.m$)(A,d);return this.setSymKey($,b)},this.setSymKey=async(a,d)=>{this.isInitialized();const b=d||(0,_.Ym)(a);return await this.keychain.set(b,a),b},this.deleteKeyPair=async a=>{this.isInitialized(),await this.keychain.del(a)},this.deleteSymKey=async a=>{this.isInitialized(),await this.keychain.del(a)},this.encode=async(a,d,b)=>{this.isInitialized();const A=(0,_.EN)(b),$=tt(d);if((0,_.Q8)(A)){const se=A.senderPublicKey,Se=A.receiverPublicKey;a=await this.generateSharedKey(se,Se)}const R=this.getSymKey(a),{type:B,senderPublicKey:Y}=A;return(0,_.HI)({type:B,symKey:R,message:$,senderPublicKey:Y})},this.decode=async(a,d,b)=>{this.isInitialized();const A=(0,_.Ll)(d,b);if((0,_.Q8)(A)){const $=A.receiverPublicKey,R=A.senderPublicKey;a=await this.generateSharedKey($,R)}try{const $=this.getSymKey(a),R=(0,_.pe)({symKey:$,encoded:d});return Qe(R)}catch($){this.logger.error(`Failed to decode message from topic: '${a}', clientId: '${await this.getClientId()}'`),this.logger.error($)}},this.getPayloadType=a=>{const d=(0,_.vB)(a);return(0,_.WG)(d.type)},this.getPayloadSenderPublicKey=a=>{const d=(0,_.vB)(a);return d.senderPublicKey?(0,Ho.BB)(d.senderPublicKey,_.AW):void 0},this.core=r,this.logger=(0,je.generateChildLogger)(n,this.name),this.keychain=o||new Rp(this.core,this.logger)}get context(){return(0,je.getLoggerContext)(this.logger)}async setPrivateKey(r,n){return await this.keychain.set(r,n),r}getPrivateKey(r){return this.keychain.get(r)}async getClientSeed(){let r="";try{r=this.keychain.get(hu)}catch{r=(0,_.jd)(),await this.keychain.set(hu,r)}return Zd(r,"base16")}getSymKey(r){return this.keychain.get(r)}isInitialized(){if(!this.initialized){const{message:r}=(0,_.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}}class Cp extends mi{constructor(r,n){super(r,n),this.logger=r,this.core=n,this.messages=new Map,this.name=np,this.version=sp,this.initialized=!1,this.storagePrefix=zi,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const o=await this.getRelayerMessages();typeof o<"u"&&(this.messages=o),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(o){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(o)}finally{this.initialized=!0}}},this.set=async(o,a)=>{this.isInitialized();const d=(0,_.rj)(a);let b=this.messages.get(o);return typeof b>"u"&&(b={}),typeof b[d]<"u"||(b[d]=a,this.messages.set(o,b),await this.persist()),d},this.get=o=>{this.isInitialized();let a=this.messages.get(o);return typeof a>"u"&&(a={}),a},this.has=(o,a)=>{this.isInitialized();const d=this.get(o),b=(0,_.rj)(a);return typeof d[b]<"u"},this.del=async o=>{this.isInitialized(),this.messages.delete(o),await this.persist()},this.logger=(0,je.generateChildLogger)(r,this.name),this.core=n}get context(){return(0,je.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(r){await this.core.storage.setItem(this.storageKey,(0,_.KC)(r))}async getRelayerMessages(){const r=await this.core.storage.getItem(this.storageKey);return typeof r<"u"?(0,_.IP)(r):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:r}=(0,_.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}}class Tp extends Li{constructor(r,n){super(r,n),this.relayer=r,this.logger=n,this.events=new Z.EventEmitter,this.name=ap,this.queue=new Map,this.publishTimeout=(0,we.toMiliseconds)(we.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(o,a,d)=>{var b;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:o,message:a,opts:d}});try{const A=(d==null?void 0:d.ttl)||op,$=(0,_._H)(d),R=(d==null?void 0:d.prompt)||!1,B=(d==null?void 0:d.tag)||0,Y=(d==null?void 0:d.id)||Ps().toString(),se={topic:o,message:a,opts:{ttl:A,relay:$,prompt:R,tag:B,id:Y}},Se=setTimeout(()=>this.queue.set(Y,se),this.publishTimeout);try{await await(0,_.hF)(this.rpcPublish(o,a,A,$,R,B,Y),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(Y),this.relayer.events.emit(vr.publish,se)}catch(pe){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(b=d==null?void 0:d.internal)!=null&&b.throwOnFailedPublish)throw this.removeRequestFromQueue(Y),pe;return}finally{clearTimeout(Se)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:o,message:a,opts:d}})}catch(A){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(A),A}},this.on=(o,a)=>{this.events.on(o,a)},this.once=(o,a)=>{this.events.once(o,a)},this.off=(o,a)=>{this.events.off(o,a)},this.removeListener=(o,a)=>{this.events.removeListener(o,a)},this.relayer=r,this.logger=(0,je.generateChildLogger)(n,this.name),this.registerEventListeners()}get context(){return(0,je.getLoggerContext)(this.logger)}rpcPublish(r,n,o,a,d,b,A){var $,R,B,Y;const se={method:(0,_.cO)(a.protocol).publish,params:{topic:r,message:n,ttl:o,prompt:d,tag:b},id:A};return(0,_.o8)(($=se.params)==null?void 0:$.prompt)&&((R=se.params)==null||delete R.prompt),(0,_.o8)((B=se.params)==null?void 0:B.tag)&&((Y=se.params)==null||delete Y.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:se}),this.relayer.request(se)}removeRequestFromQueue(r){this.queue.delete(r)}checkQueue(){this.queue.forEach(async r=>{const{topic:n,message:o,opts:a}=r;await this.publish(n,o,a)})}registerEventListeners(){this.relayer.core.heartbeat.on(Nt.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(vr.connection_stalled);return}this.checkQueue()}),this.relayer.on(vr.message_ack,r=>{this.removeRequestFromQueue(r.id.toString())})}}class Dp{constructor(){this.map=new Map,this.set=(r,n)=>{const o=this.get(r);this.exists(r,n)||this.map.set(r,[...o,n])},this.get=r=>this.map.get(r)||[],this.exists=(r,n)=>this.get(r).includes(n),this.delete=(r,n)=>{if(typeof n>"u"){this.map.delete(r);return}if(!this.map.has(r))return;const o=this.get(r);if(!this.exists(r,n))return;const a=o.filter(d=>d!==n);if(!a.length){this.map.delete(r);return}this.map.set(r,a)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Np=Object.defineProperty,Lp=Object.defineProperties,Fp=Object.getOwnPropertyDescriptors,pu=Object.getOwnPropertySymbols,jp=Object.prototype.hasOwnProperty,Mp=Object.prototype.propertyIsEnumerable,gu=(h,r,n)=>r in h?Np(h,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):h[r]=n,Bn=(h,r)=>{for(var n in r||(r={}))jp.call(r,n)&&gu(h,n,r[n]);if(pu)for(var n of pu(r))Mp.call(r,n)&&gu(h,n,r[n]);return h},ia=(h,r)=>Lp(h,Fp(r));class zp extends Lt{constructor(r,n){super(r,n),this.relayer=r,this.logger=n,this.subscriptions=new Map,this.topicMap=new Dp,this.events=new Z.EventEmitter,this.name=yp,this.version=vp,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=zi,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(o,a)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:o,opts:a}});try{const d=(0,_._H)(a),b={topic:o,relay:d};this.pending.set(o,b);const A=await this.rpcSubscribe(o,d);return this.onSubscribe(A,b),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:o,opts:a}}),A}catch(d){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(d),d}},this.unsubscribe=async(o,a)=>{await this.restartToComplete(),this.isInitialized(),typeof(a==null?void 0:a.id)<"u"?await this.unsubscribeById(o,a.id,a):await this.unsubscribeByTopic(o,a)},this.isSubscribed=async o=>this.topics.includes(o)?!0:await new Promise((a,d)=>{const b=new we.Watch;b.start(this.pendingSubscriptionWatchLabel);const A=setInterval(()=>{!this.pending.has(o)&&this.topics.includes(o)&&(clearInterval(A),b.stop(this.pendingSubscriptionWatchLabel),a(!0)),b.elapsed(this.pendingSubscriptionWatchLabel)>=mp&&(clearInterval(A),b.stop(this.pendingSubscriptionWatchLabel),d(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(o,a)=>{this.events.on(o,a)},this.once=(o,a)=>{this.events.once(o,a)},this.off=(o,a)=>{this.events.off(o,a)},this.removeListener=(o,a)=>{this.events.removeListener(o,a)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=r,this.logger=(0,je.generateChildLogger)(n,this.name),this.clientId=""}get context(){return(0,je.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(r,n){let o=!1;try{o=this.getSubscription(r).topic===n}catch{}return o}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(r,n){const o=this.topicMap.get(r);await Promise.all(o.map(async a=>await this.unsubscribeById(r,a,n)))}async unsubscribeById(r,n,o){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:r,id:n,opts:o}});try{const a=(0,_._H)(o);await this.rpcUnsubscribe(r,n,a);const d=(0,_.D6)("USER_DISCONNECTED",`${this.name}, ${r}`);await this.onUnsubscribe(r,n,d),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:r,id:n,opts:o}})}catch(a){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(a),a}}async rpcSubscribe(r,n){const o={method:(0,_.cO)(n.protocol).subscribe,params:{topic:r}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o});try{await await(0,_.hF)(this.relayer.request(o),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(vr.connection_stalled)}return(0,_.rj)(r+this.clientId)}async rpcBatchSubscribe(r){if(!r.length)return;const n=r[0].relay,o={method:(0,_.cO)(n.protocol).batchSubscribe,params:{topics:r.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o});try{return await await(0,_.hF)(this.relayer.request(o),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(vr.connection_stalled)}}rpcUnsubscribe(r,n,o){const a={method:(0,_.cO)(o.protocol).unsubscribe,params:{topic:r,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a}),this.relayer.request(a)}onSubscribe(r,n){this.setSubscription(r,ia(Bn({},n),{id:r})),this.pending.delete(n.topic)}onBatchSubscribe(r){r.length&&r.forEach(n=>{this.setSubscription(n.id,Bn({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(r,n,o){this.events.removeAllListeners(n),this.hasSubscription(n,r)&&this.deleteSubscription(n,o),await this.relayer.messages.del(r)}async setRelayerSubscriptions(r){await this.relayer.core.storage.setItem(this.storageKey,r)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(r,n){this.subscriptions.has(r)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:r,subscription:n}),this.addSubscription(r,n))}addSubscription(r,n){this.subscriptions.set(r,Bn({},n)),this.topicMap.set(n.topic,r),this.events.emit(ei.created,n)}getSubscription(r){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:r});const n=this.subscriptions.get(r);if(!n){const{message:o}=(0,_.Z7)("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(o)}return n}deleteSubscription(r,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:r,reason:n});const o=this.getSubscription(r);this.subscriptions.delete(r),this.topicMap.delete(o.topic,r),this.events.emit(ei.deleted,ia(Bn({},o),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ei.sync)}async reset(){if(this.cached.length){const r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const o=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(o)}}this.events.emit(ei.resubscribed)}async restore(){try{const r=await this.getRelayerSubscriptions();if(typeof r>"u"||!r.length)return;if(this.subscriptions.size){const{message:n}=(0,_.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=r,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(r){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(r)}}async batchSubscribe(r){if(!r.length)return;const n=await this.rpcBatchSubscribe(r);(0,_.qt)(n)&&this.onBatchSubscribe(n.map((o,a)=>ia(Bn({},r[a]),{id:o})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const r=[];this.pending.forEach(n=>{r.push(n)}),await this.batchSubscribe(r)}registerEventListeners(){this.relayer.core.heartbeat.on(Nt.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(vr.connect,async()=>{await this.onConnect()}),this.relayer.on(vr.disconnect,()=>{this.onDisconnect()}),this.events.on(ei.created,async r=>{const n=ei.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:r}),await this.persist()}),this.events.on(ei.deleted,async r=>{const n=ei.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:r}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:r}=(0,_.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}async restartToComplete(){this.restartInProgress&&await new Promise(r=>{const n=setInterval(()=>{this.restartInProgress||(clearInterval(n),r())},this.pollingInterval)})}}var Up=Object.defineProperty,yu=Object.getOwnPropertySymbols,$p=Object.prototype.hasOwnProperty,qp=Object.prototype.propertyIsEnumerable,vu=(h,r,n)=>r in h?Up(h,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):h[r]=n,Bp=(h,r)=>{for(var n in r||(r={}))$p.call(r,n)&&vu(h,n,r[n]);if(yu)for(var n of yu(r))qp.call(r,n)&&vu(h,n,r[n]);return h};class Hp extends _i{constructor(r){super(r),this.protocol="wc",this.version=2,this.events=new Z.EventEmitter,this.name=up,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async n=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(n)}catch(o){throw this.logger.debug("Failed to Publish Request"),this.logger.error(o),o}},this.onPayloadHandler=n=>{this.onProviderPayload(n)},this.onConnectHandler=()=>{this.events.emit(vr.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=n=>{this.logger.error(n),this.events.emit(vr.error,n),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(bi.payload,this.onPayloadHandler),this.provider.on(bi.connect,this.onConnectHandler),this.provider.on(bi.disconnect,this.onDisconnectHandler),this.provider.on(bi.error,this.onProviderErrorHandler)},this.core=r.core,this.logger=typeof r.logger<"u"&&typeof r.logger!="string"?(0,je.generateChildLogger)(r.logger,this.name):(0,je.pino)((0,je.getDefaultLoggerOptions)({level:r.logger||cp})),this.messages=new Cp(this.logger,r.core),this.subscriber=new zp(this,this.logger),this.publisher=new Tp(this,this.logger),this.relayUrl=(r==null?void 0:r.relayUrl)||fu,this.projectId=r.projectId,this.bundleId=(0,_.X_)(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${du}...`),await this.restartTransport(du)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},dp)}get context(){return(0,je.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(r,n,o){this.isInitialized(),await this.publisher.publish(r,n,o),await this.recordMessageEvent({topic:r,message:n,publishedAt:Date.now()})}async subscribe(r,n){var o;this.isInitialized();let a=((o=this.subscriber.topicMap.get(r))==null?void 0:o[0])||"";if(a)return a;let d;const b=A=>{A.topic===r&&(this.subscriber.off(ei.created,b),d())};return await Promise.all([new Promise(A=>{d=A,this.subscriber.on(ei.created,b)}),new Promise(async A=>{a=await this.subscriber.subscribe(r,n),A()})]),a}async unsubscribe(r,n){this.isInitialized(),await this.subscriber.unsubscribe(r,n)}on(r,n){this.events.on(r,n)}once(r,n){this.events.once(r,n)}off(r,n){this.events.off(r,n)}removeListener(r,n){this.events.removeListener(r,n)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await(0,_.hF)(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(r){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){r&&r!==this.relayUrl&&(this.relayUrl=r,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(n=>{if(!this.initialized)return n();this.subscriber.once(ei.resubscribed,()=>{n()})}),new Promise(async(n,o)=>{try{await(0,_.hF)(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(a){o(a);return}n()})])}catch(n){this.logger.error(n);const o=n;if(!this.isConnectionStalled(o.message))throw n;this.provider.events.emit(bi.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(r){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=r||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await(0,_.Gg)())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(r){return this.staleConnectionErrors.some(n=>r.includes(n))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const r=await this.core.crypto.signJWT(this.relayUrl);this.provider=new qt(new _n((0,_.$0)({sdkVersion:fp,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:r,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(r){const{topic:n,message:o}=r;await this.messages.set(n,o)}async shouldIgnoreMessageEvent(r){const{topic:n,message:o}=r;if(!o||o.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${o}`),!0;if(!await this.subscriber.isSubscribed(n))return this.logger.debug(`Ignoring message for non-subscribed topic ${n}`),!0;const a=this.messages.has(n,o);return a&&this.logger.debug(`Ignoring duplicate message: ${o}`),a}async onProviderPayload(r){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:r}),wt(r)){if(!r.method.endsWith(hp))return;const n=r.params,{topic:o,message:a,publishedAt:d}=n.data,b={topic:o,message:a,publishedAt:d};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Bp({type:"event",event:n.id},b)),this.events.emit(n.id,b),await this.acknowledgePayload(r),await this.onMessageEvent(b)}else At(r)&&this.events.emit(vr.message_ack,r)}async onMessageEvent(r){await this.shouldIgnoreMessageEvent(r)||(this.events.emit(vr.message,r),await this.recordMessageEvent(r))}async acknowledgePayload(r){const n=vn(r.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(bi.payload,this.onPayloadHandler),this.provider.off(bi.connect,this.onConnectHandler),this.provider.off(bi.disconnect,this.onDisconnectHandler),this.provider.off(bi.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(vr.connection_stalled,()=>{this.restartTransport().catch(n=>this.logger.error(n))});let r=await(0,_.Gg)();(0,_.uw)(async n=>{this.initialized&&r!==n&&(r=n,n?await this.restartTransport().catch(o=>this.logger.error(o)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(o=>this.logger.error(o))))})}onProviderDisconnect(){this.events.emit(vr.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(r=>this.logger.error(r))},(0,we.toMiliseconds)(lp)))}isInitialized(){if(!this.initialized){const{message:r}=(0,_.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(r=>{const n=setInterval(()=>{this.connected&&(clearInterval(n),r())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var Kp=Object.defineProperty,mu=Object.getOwnPropertySymbols,Vp=Object.prototype.hasOwnProperty,kp=Object.prototype.propertyIsEnumerable,_u=(h,r,n)=>r in h?Kp(h,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):h[r]=n,wu=(h,r)=>{for(var n in r||(r={}))Vp.call(r,n)&&_u(h,n,r[n]);if(mu)for(var n of mu(r))kp.call(r,n)&&_u(h,n,r[n]);return h};class Ts extends ai{constructor(r,n,o,a=zi,d=void 0){super(r,n,o,a),this.core=r,this.logger=n,this.name=o,this.map=new Map,this.version=pp,this.cached=[],this.initialized=!1,this.storagePrefix=zi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(b=>{this.getKey&&b!==null&&!(0,_.o8)(b)?this.map.set(this.getKey(b),b):(0,_.xW)(b)?this.map.set(b.id,b):(0,_.h1)(b)&&this.map.set(b.topic,b)}),this.cached=[],this.initialized=!0)},this.set=async(b,A)=>{this.isInitialized(),this.map.has(b)?await this.update(b,A):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:b,value:A}),this.map.set(b,A),await this.persist())},this.get=b=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:b}),this.getData(b)),this.getAll=b=>(this.isInitialized(),b?this.values.filter(A=>Object.keys(b).every($=>Sf()(A[$],b[$]))):this.values),this.update=async(b,A)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:b,update:A});const $=wu(wu({},this.getData(b)),A);this.map.set(b,$),await this.persist()},this.delete=async(b,A)=>{this.isInitialized(),this.map.has(b)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:b,reason:A}),this.map.delete(b),await this.persist())},this.logger=(0,je.generateChildLogger)(n,this.name),this.storagePrefix=a,this.getKey=d}get context(){return(0,je.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(r){await this.core.storage.setItem(this.storageKey,r)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(r){const n=this.map.get(r);if(!n){const{message:o}=(0,_.Z7)("NO_MATCHING_KEY",`${this.name}: ${r}`);throw this.logger.error(o),new Error(o)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const r=await this.getDataStore();if(typeof r>"u"||!r.length)return;if(this.map.size){const{message:n}=(0,_.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=r,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(r){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(r)}}isInitialized(){if(!this.initialized){const{message:r}=(0,_.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}}class Gp{constructor(r,n){this.core=r,this.logger=n,this.name=_p,this.version=wp,this.events=new(ve()),this.initialized=!1,this.storagePrefix=zi,this.ignoredPayloadTypes=[_.rV],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:o})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...o])]},this.create=async()=>{this.isInitialized();const o=(0,_.jd)(),a=await this.core.crypto.setSymKey(o),d=(0,_.gn)(we.FIVE_MINUTES),b={protocol:lu},A={topic:a,expiry:d,relay:b,active:!1},$=(0,_.Bv)({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:o,relay:b});return await this.pairings.set(a,A),await this.core.relayer.subscribe(a),this.core.expirer.set(a,d),{topic:a,uri:$}},this.pair=async o=>{this.isInitialized(),this.isValidPair(o);const{topic:a,symKey:d,relay:b}=(0,_.he)(o.uri);let A;if(this.pairings.keys.includes(a)&&(A=this.pairings.get(a),A.active))throw new Error(`Pairing already exists: ${a}. Please try again with a new connection URI.`);const $=(0,_.gn)(we.FIVE_MINUTES),R={topic:a,relay:b,expiry:$,active:!1};return await this.pairings.set(a,R),this.core.expirer.set(a,$),o.activatePairing&&await this.activate({topic:a}),this.events.emit(qn.create,R),this.core.crypto.keychain.has(a)||(await this.core.crypto.setSymKey(d,a),await this.core.relayer.subscribe(a,{relay:b})),R},this.activate=async({topic:o})=>{this.isInitialized();const a=(0,_.gn)(we.THIRTY_DAYS);await this.pairings.update(o,{active:!0,expiry:a}),this.core.expirer.set(o,a)},this.ping=async o=>{this.isInitialized(),await this.isValidPing(o);const{topic:a}=o;if(this.pairings.keys.includes(a)){const d=await this.sendRequest(a,"wc_pairingPing",{}),{done:b,resolve:A,reject:$}=(0,_.H1)();this.events.once((0,_.E0)("pairing_ping",d),({error:R})=>{R?$(R):A()}),await b()}},this.updateExpiry=async({topic:o,expiry:a})=>{this.isInitialized(),await this.pairings.update(o,{expiry:a})},this.updateMetadata=async({topic:o,metadata:a})=>{this.isInitialized(),await this.pairings.update(o,{peerMetadata:a})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async o=>{this.isInitialized(),await this.isValidDisconnect(o);const{topic:a}=o;this.pairings.keys.includes(a)&&(await this.sendRequest(a,"wc_pairingDelete",(0,_.D6)("USER_DISCONNECTED")),await this.deletePairing(a))},this.sendRequest=async(o,a,d)=>{const b=hi(a,d),A=await this.core.crypto.encode(o,b),$=$n[a].req;return this.core.history.set(o,b),this.core.relayer.publish(o,A,$),b.id},this.sendResult=async(o,a,d)=>{const b=vn(o,d),A=await this.core.crypto.encode(a,b),$=await this.core.history.get(a,o),R=$n[$.request.method].res;await this.core.relayer.publish(a,A,R),await this.core.history.resolve(b)},this.sendError=async(o,a,d)=>{const b=Xi(o,d),A=await this.core.crypto.encode(a,b),$=await this.core.history.get(a,o),R=$n[$.request.method]?$n[$.request.method].res:$n.unregistered_method.res;await this.core.relayer.publish(a,A,R),await this.core.history.resolve(b)},this.deletePairing=async(o,a)=>{await this.core.relayer.unsubscribe(o),await Promise.all([this.pairings.delete(o,(0,_.D6)("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(o),a?Promise.resolve():this.core.expirer.del(o)])},this.cleanup=async()=>{const o=this.pairings.getAll().filter(a=>(0,_.Bw)(a.expiry));await Promise.all(o.map(a=>this.deletePairing(a.topic)))},this.onRelayEventRequest=o=>{const{topic:a,payload:d}=o;switch(d.method){case"wc_pairingPing":return this.onPairingPingRequest(a,d);case"wc_pairingDelete":return this.onPairingDeleteRequest(a,d);default:return this.onUnknownRpcMethodRequest(a,d)}},this.onRelayEventResponse=async o=>{const{topic:a,payload:d}=o,b=(await this.core.history.get(a,d.id)).request.method;switch(b){case"wc_pairingPing":return this.onPairingPingResponse(a,d);default:return this.onUnknownRpcMethodResponse(b)}},this.onPairingPingRequest=async(o,a)=>{const{id:d}=a;try{this.isValidPing({topic:o}),await this.sendResult(d,o,!0),this.events.emit(qn.ping,{id:d,topic:o})}catch(b){await this.sendError(d,o,b),this.logger.error(b)}},this.onPairingPingResponse=(o,a)=>{const{id:d}=a;setTimeout(()=>{yt(a)?this.events.emit((0,_.E0)("pairing_ping",d),{}):Ye(a)&&this.events.emit((0,_.E0)("pairing_ping",d),{error:a.error})},500)},this.onPairingDeleteRequest=async(o,a)=>{const{id:d}=a;try{this.isValidDisconnect({topic:o}),await this.deletePairing(o),this.events.emit(qn.delete,{id:d,topic:o})}catch(b){await this.sendError(d,o,b),this.logger.error(b)}},this.onUnknownRpcMethodRequest=async(o,a)=>{const{id:d,method:b}=a;try{if(this.registeredMethods.includes(b))return;const A=(0,_.D6)("WC_METHOD_UNSUPPORTED",b);await this.sendError(d,o,A),this.logger.error(A)}catch(A){await this.sendError(d,o,A),this.logger.error(A)}},this.onUnknownRpcMethodResponse=o=>{this.registeredMethods.includes(o)||this.logger.error((0,_.D6)("WC_METHOD_UNSUPPORTED",o))},this.isValidPair=o=>{var a;if(!(0,_.EJ)(o)){const{message:b}=(0,_.Z7)("MISSING_OR_INVALID",`pair() params: ${o}`);throw new Error(b)}if(!(0,_.jv)(o.uri)){const{message:b}=(0,_.Z7)("MISSING_OR_INVALID",`pair() uri: ${o.uri}`);throw new Error(b)}const d=(0,_.he)(o.uri);if(!((a=d==null?void 0:d.relay)!=null&&a.protocol)){const{message:b}=(0,_.Z7)("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(b)}if(!(d!=null&&d.symKey)){const{message:b}=(0,_.Z7)("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(b)}},this.isValidPing=async o=>{if(!(0,_.EJ)(o)){const{message:d}=(0,_.Z7)("MISSING_OR_INVALID",`ping() params: ${o}`);throw new Error(d)}const{topic:a}=o;await this.isValidPairingTopic(a)},this.isValidDisconnect=async o=>{if(!(0,_.EJ)(o)){const{message:d}=(0,_.Z7)("MISSING_OR_INVALID",`disconnect() params: ${o}`);throw new Error(d)}const{topic:a}=o;await this.isValidPairingTopic(a)},this.isValidPairingTopic=async o=>{if(!(0,_.M_)(o,!1)){const{message:a}=(0,_.Z7)("MISSING_OR_INVALID",`pairing topic should be a string: ${o}`);throw new Error(a)}if(!this.pairings.keys.includes(o)){const{message:a}=(0,_.Z7)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${o}`);throw new Error(a)}if((0,_.Bw)(this.pairings.get(o).expiry)){await this.deletePairing(o);const{message:a}=(0,_.Z7)("EXPIRED",`pairing topic: ${o}`);throw new Error(a)}},this.core=r,this.logger=(0,je.generateChildLogger)(n,this.name),this.pairings=new Ts(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,je.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){const{message:r}=(0,_.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}registerRelayerEvents(){this.core.relayer.on(vr.message,async r=>{const{topic:n,message:o}=r;if(!this.pairings.keys.includes(n)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(o)))return;const a=await this.core.crypto.decode(n,o);try{wt(a)?(this.core.history.set(n,a),this.onRelayEventRequest({topic:n,payload:a})):At(a)&&(await this.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a}),this.core.history.delete(n,a.id))}catch(d){this.logger.error(d)}})}registerExpirerEvents(){this.core.expirer.on(Kr.expired,async r=>{const{topic:n}=(0,_.iP)(r.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(qn.expire,{topic:n}))})}}class Wp extends Xr{constructor(r,n){super(r,n),this.core=r,this.logger=n,this.records=new Map,this.events=new Z.EventEmitter,this.name=bp,this.version=Ep,this.cached=[],this.initialized=!1,this.storagePrefix=zi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>this.records.set(o.id,o)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(o,a,d)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:o,request:a,chainId:d}),this.records.has(a.id))return;const b={id:a.id,topic:o,request:{method:a.method,params:a.params||null},chainId:d,expiry:(0,_.gn)(we.THIRTY_DAYS)};this.records.set(b.id,b),this.events.emit(di.created,b)},this.resolve=async o=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:o}),!this.records.has(o.id))return;const a=await this.getRecord(o.id);typeof a.response>"u"&&(a.response=Ye(o)?{error:o.error}:{result:o.result},this.records.set(a.id,a),this.events.emit(di.updated,a))},this.get=async(o,a)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:o,id:a}),await this.getRecord(a)),this.delete=(o,a)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:a}),this.values.forEach(d=>{if(d.topic===o){if(typeof a<"u"&&d.id!==a)return;this.records.delete(d.id),this.events.emit(di.deleted,d)}})},this.exists=async(o,a)=>(this.isInitialized(),this.records.has(a)?(await this.getRecord(a)).topic===o:!1),this.on=(o,a)=>{this.events.on(o,a)},this.once=(o,a)=>{this.events.once(o,a)},this.off=(o,a)=>{this.events.off(o,a)},this.removeListener=(o,a)=>{this.events.removeListener(o,a)},this.logger=(0,je.generateChildLogger)(n,this.name)}get context(){return(0,je.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const r=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const o={topic:n.topic,request:hi(n.request.method,n.request.params,n.id),chainId:n.chainId};return r.push(o)}),r}async setJsonRpcRecords(r){await this.core.storage.setItem(this.storageKey,r)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(r){this.isInitialized();const n=this.records.get(r);if(!n){const{message:o}=(0,_.Z7)("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(o)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(di.sync)}async restore(){try{const r=await this.getJsonRpcRecords();if(typeof r>"u"||!r.length)return;if(this.records.size){const{message:n}=(0,_.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=r,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}}registerEventListeners(){this.events.on(di.created,r=>{const n=di.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:r}),this.persist()}),this.events.on(di.updated,r=>{const n=di.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:r}),this.persist()}),this.events.on(di.deleted,r=>{const n=di.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:r}),this.persist()}),this.core.heartbeat.on(Nt.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(r=>{(0,we.toMiliseconds)(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.delete(r.topic,r.id))})}catch(r){this.logger.warn(r)}}isInitialized(){if(!this.initialized){const{message:r}=(0,_.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}}class Jp extends Pt{constructor(r,n){super(r,n),this.core=r,this.logger=n,this.expirations=new Map,this.events=new Z.EventEmitter,this.name=xp,this.version=Ip,this.cached=[],this.initialized=!1,this.storagePrefix=zi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>this.expirations.set(o.target,o)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=o=>{try{const a=this.formatTarget(o);return typeof this.getExpiration(a)<"u"}catch{return!1}},this.set=(o,a)=>{this.isInitialized();const d=this.formatTarget(o),b={target:d,expiry:a};this.expirations.set(d,b),this.checkExpiry(d,b),this.events.emit(Kr.created,{target:d,expiration:b})},this.get=o=>{this.isInitialized();const a=this.formatTarget(o);return this.getExpiration(a)},this.del=o=>{if(this.isInitialized(),this.has(o)){const a=this.formatTarget(o),d=this.getExpiration(a);this.expirations.delete(a),this.events.emit(Kr.deleted,{target:a,expiration:d})}},this.on=(o,a)=>{this.events.on(o,a)},this.once=(o,a)=>{this.events.once(o,a)},this.off=(o,a)=>{this.events.off(o,a)},this.removeListener=(o,a)=>{this.events.removeListener(o,a)},this.logger=(0,je.generateChildLogger)(n,this.name)}get context(){return(0,je.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(r){if(typeof r=="string")return(0,_.Z4)(r);if(typeof r=="number")return(0,_.Gq)(r);const{message:n}=(0,_.Z7)("UNKNOWN_TYPE",`Target type: ${typeof r}`);throw new Error(n)}async setExpirations(r){await this.core.storage.setItem(this.storageKey,r)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Kr.sync)}async restore(){try{const r=await this.getExpirations();if(typeof r>"u"||!r.length)return;if(this.expirations.size){const{message:n}=(0,_.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=r,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(r){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(r)}}getExpiration(r){const n=this.expirations.get(r);if(!n){const{message:o}=(0,_.Z7)("NO_MATCHING_KEY",`${this.name}: ${r}`);throw this.logger.error(o),new Error(o)}return n}checkExpiry(r,n){const{expiry:o}=n;(0,we.toMiliseconds)(o)-Date.now()<=0&&this.expire(r,n)}expire(r,n){this.expirations.delete(r),this.events.emit(Kr.expired,{target:r,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((r,n)=>this.checkExpiry(n,r))}registerEventListeners(){this.core.heartbeat.on(Nt.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Kr.created,r=>{const n=Kr.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:r}),this.persist()}),this.events.on(Kr.expired,r=>{const n=Kr.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:r}),this.persist()}),this.events.on(Kr.deleted,r=>{const n=Kr.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:r}),this.persist()})}isInitialized(){if(!this.initialized){const{message:r}=(0,_.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}}class Zp extends kt{constructor(r,n){super(r,n),this.projectId=r,this.logger=n,this.name=ta,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async o=>{if(this.verifyDisabled||(0,_.b$)()||!(0,_.jU)())return;const a=this.getVerifyUrl(o==null?void 0:o.verifyUrl);this.verifyUrl!==a&&this.removeIframe(),this.verifyUrl=a;try{await this.createIframe()}catch(d){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(d)}if(!this.initialized){this.removeIframe(),this.verifyUrl=ra;try{await this.createIframe()}catch(d){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(d),this.verifyDisabled=!0}}},this.register=async o=>{this.initialized?this.sendPost(o.attestationId):(this.addToQueue(o.attestationId),await this.init())},this.resolve=async o=>{if(this.isDevEnv)return"";const a=this.getVerifyUrl(o==null?void 0:o.verifyUrl);let d;try{d=await this.fetchAttestation(o.attestationId,a)}catch(b){this.logger.info(`failed to resolve attestation: ${o.attestationId} from url: ${a}`),this.logger.info(b),d=await this.fetchAttestation(o.attestationId,ra)}return d},this.fetchAttestation=async(o,a)=>{this.logger.info(`resolving attestation: ${o} from url: ${a}`);const d=this.startAbortTimer(we.ONE_SECOND*2),b=await fetch(`${a}/attestation/${o}`,{signal:this.abortController.signal});return clearTimeout(d),b.status===200?await b.json():void 0},this.addToQueue=o=>{this.queue.push(o)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(o=>this.sendPost(o)),this.queue=[])},this.sendPost=o=>{var a;try{if(!this.iframe)return;(a=this.iframe.contentWindow)==null||a.postMessage(o,"*"),this.logger.info(`postMessage sent: ${o} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let o;const a=d=>{d.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",a),o())};await Promise.race([new Promise(d=>{if(document.getElementById(ta))return d();window.addEventListener("message",a);const b=document.createElement("iframe");b.id=ta,b.src=`${this.verifyUrl}/${this.projectId}`,b.style.display="none",document.body.append(b),this.iframe=b,o=d}),new Promise((d,b)=>setTimeout(()=>{window.removeEventListener("message",a),b("verify iframe load timeout")},(0,we.toMiliseconds)(we.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=o=>{let a=o||bn;return Pp.includes(a)||(this.logger.info(`verify url: ${a}, not included in trusted list, assigning default: ${bn}`),a=bn),a},this.logger=(0,je.generateChildLogger)(n,this.name),this.verifyUrl=bn,this.abortController=new AbortController,this.isDevEnv=(0,_.UG)()&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.IS_VITEST}get context(){return(0,je.getLoggerContext)(this.logger)}startAbortTimer(r){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,we.toMiliseconds)(r))}}class Qp extends Gt{constructor(r,n){super(r,n),this.projectId=r,this.logger=n,this.context=Sp,this.registerDeviceToken=async o=>{const{clientId:a,token:d,notificationType:b,enableEncrypted:A=!1}=o,$=`${Op}/${this.projectId}/clients`;await Rf()($,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:a,type:b,token:d,always_raw:A})})},this.logger=(0,je.generateChildLogger)(n,this.context)}}var Yp=Object.defineProperty,bu=Object.getOwnPropertySymbols,Xp=Object.prototype.hasOwnProperty,eg=Object.prototype.propertyIsEnumerable,Eu=(h,r,n)=>r in h?Yp(h,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):h[r]=n,xu=(h,r)=>{for(var n in r||(r={}))Xp.call(r,n)&&Eu(h,n,r[n]);if(bu)for(var n of bu(r))eg.call(r,n)&&Eu(h,n,r[n]);return h};class na extends qr{constructor(r){super(r),this.protocol=uu,this.version=Qd,this.name=ea,this.events=new Z.EventEmitter,this.initialized=!1,this.on=(o,a)=>this.events.on(o,a),this.once=(o,a)=>this.events.once(o,a),this.off=(o,a)=>this.events.off(o,a),this.removeListener=(o,a)=>this.events.removeListener(o,a),this.projectId=r==null?void 0:r.projectId,this.relayUrl=(r==null?void 0:r.relayUrl)||fu,this.customStoragePrefix=r!=null&&r.customStoragePrefix?`:${r.customStoragePrefix}`:"";const n=typeof(r==null?void 0:r.logger)<"u"&&typeof(r==null?void 0:r.logger)!="string"?r.logger:(0,je.pino)((0,je.getDefaultLoggerOptions)({level:(r==null?void 0:r.logger)||Yd.logger}));this.logger=(0,je.generateChildLogger)(n,this.name),this.heartbeat=new Nt.HeartBeat,this.crypto=new Ap(this,this.logger,r==null?void 0:r.keychain),this.history=new Wp(this,this.logger),this.expirer=new Jp(this,this.logger),this.storage=r!=null&&r.storage?r.storage:new lr(xu(xu({},Xd),r==null?void 0:r.storageOptions)),this.relayer=new Hp({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Gp(this,this.logger),this.verify=new Zp(this.projectId||"",this.logger),this.echoClient=new Qp(this.projectId||"",this.logger)}static async init(r){const n=new na(r);await n.initialize();const o=await n.crypto.getClientId();return await n.storage.setItem(gp,o),n}get context(){return(0,je.getLoggerContext)(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(r){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,r),this.logger.error(r.message),r}}}const tg=na,Iu="wc",Pu=2,Su="client",sa=`${Iu}@${Pu}:${Su}:`,oa={name:Su,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},oE={session_proposal:"session_proposal",session_update:"session_update",session_extend:"session_extend",session_ping:"session_ping",session_delete:"session_delete",session_expire:"session_expire",session_request:"session_request",session_request_sent:"session_request_sent",session_event:"session_event",proposal_expire:"proposal_expire"},aE={database:":memory:"},Ou="WALLETCONNECT_DEEPLINK_CHOICE",cE={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},uE="history",hE="0.3",rg="proposal",lE=null,Ru="Proposal expired",ig="session",Ds=we.SEVEN_DAYS,ng="engine",Hn={wc_sessionPropose:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1104},res:{ttl:we.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1106},res:{ttl:we.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1112},res:{ttl:we.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1115}}},aa={min:we.FIVE_MINUTES,max:we.SEVEN_DAYS},Ei={idle:"IDLE",active:"ACTIVE"},sg="request",og=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var ag=Object.defineProperty,cg=Object.defineProperties,ug=Object.getOwnPropertyDescriptors,Au=Object.getOwnPropertySymbols,hg=Object.prototype.hasOwnProperty,lg=Object.prototype.propertyIsEnumerable,Cu=(h,r,n)=>r in h?ag(h,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):h[r]=n,Rr=(h,r)=>{for(var n in r||(r={}))hg.call(r,n)&&Cu(h,n,r[n]);if(Au)for(var n of Au(r))lg.call(r,n)&&Cu(h,n,r[n]);return h},Kn=(h,r)=>cg(h,ug(r));class fg extends Ft{constructor(r){super(r),this.name=ng,this.events=new(ve()),this.initialized=!1,this.ignoredPayloadTypes=[_.rV],this.requestQueue={state:Ei.idle,queue:[]},this.sessionRequestQueue={state:Ei.idle,queue:[]},this.requestQueueDelay=we.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(Hn)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,we.toMiliseconds)(this.requestQueueDelay)))},this.connect=async n=>{await this.isInitialized();const o=Kn(Rr({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(o);const{pairingTopic:a,requiredNamespaces:d,optionalNamespaces:b,sessionProperties:A,relays:$}=o;let R=a,B,Y=!1;if(R&&(Y=this.client.core.pairing.pairings.get(R).active),!R||!Y){const{topic:nt,uri:st}=await this.client.core.pairing.create();R=nt,B=st}const se=await this.client.core.crypto.generateKeyPair(),Se=Rr({requiredNamespaces:d,optionalNamespaces:b,relays:$??[{protocol:lu}],proposer:{publicKey:se,metadata:this.client.metadata}},A&&{sessionProperties:A}),{reject:pe,resolve:Ge,done:lt}=(0,_.H1)(we.FIVE_MINUTES,Ru);if(this.events.once((0,_.E0)("session_connect"),async({error:nt,session:st})=>{if(nt)pe(nt);else if(st){st.self.publicKey=se;const Ot=Kn(Rr({},st),{requiredNamespaces:st.requiredNamespaces,optionalNamespaces:st.optionalNamespaces});await this.client.session.set(st.topic,Ot),await this.setExpiry(st.topic,st.expiry),R&&await this.client.core.pairing.updateMetadata({topic:R,metadata:st.peer.metadata}),Ge(Ot)}}),!R){const{message:nt}=(0,_.Z7)("NO_MATCHING_KEY",`connect() pairing topic: ${R}`);throw new Error(nt)}const rt=await this.sendRequest({topic:R,method:"wc_sessionPropose",params:Se}),sr=(0,_.gn)(we.FIVE_MINUTES);return await this.setProposal(rt,Rr({id:rt,expiry:sr},Se)),{uri:B,approval:lt}},this.pair=async n=>(await this.isInitialized(),await this.client.core.pairing.pair(n)),this.approve=async n=>{await this.isInitialized(),await this.isValidApprove(n);const{id:o,relayProtocol:a,namespaces:d,sessionProperties:b}=n,A=this.client.proposal.get(o);let{pairingTopic:$,proposer:R,requiredNamespaces:B,optionalNamespaces:Y}=A;$=$||"",(0,_.L5)(B)||(B=(0,_.fc)(d,"approve()"));const se=await this.client.core.crypto.generateKeyPair(),Se=R.publicKey,pe=await this.client.core.crypto.generateSharedKey(se,Se);$&&o&&(await this.client.core.pairing.updateMetadata({topic:$,metadata:R.metadata}),await this.sendResult({id:o,topic:$,result:{relay:{protocol:a??"irn"},responderPublicKey:se}}),await this.client.proposal.delete(o,(0,_.D6)("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:$}));const Ge=Rr({relay:{protocol:a??"irn"},namespaces:d,requiredNamespaces:B,optionalNamespaces:Y,pairingTopic:$,controller:{publicKey:se,metadata:this.client.metadata},expiry:(0,_.gn)(Ds)},b&&{sessionProperties:b});await this.client.core.relayer.subscribe(pe),await this.sendRequest({topic:pe,method:"wc_sessionSettle",params:Ge,throwOnFailedPublish:!0});const lt=Kn(Rr({},Ge),{topic:pe,pairingTopic:$,acknowledged:!1,self:Ge.controller,peer:{publicKey:R.publicKey,metadata:R.metadata},controller:se});return await this.client.session.set(pe,lt),await this.setExpiry(pe,(0,_.gn)(Ds)),{topic:pe,acknowledged:()=>new Promise(rt=>setTimeout(()=>rt(this.client.session.get(pe)),500))}},this.reject=async n=>{await this.isInitialized(),await this.isValidReject(n);const{id:o,reason:a}=n,{pairingTopic:d}=this.client.proposal.get(o);d&&(await this.sendError(o,d,a),await this.client.proposal.delete(o,(0,_.D6)("USER_DISCONNECTED")))},this.update=async n=>{await this.isInitialized(),await this.isValidUpdate(n);const{topic:o,namespaces:a}=n,d=await this.sendRequest({topic:o,method:"wc_sessionUpdate",params:{namespaces:a}}),{done:b,resolve:A,reject:$}=(0,_.H1)();return this.events.once((0,_.E0)("session_update",d),({error:R})=>{R?$(R):A()}),await this.client.session.update(o,{namespaces:a}),{acknowledged:b}},this.extend=async n=>{await this.isInitialized(),await this.isValidExtend(n);const{topic:o}=n,a=await this.sendRequest({topic:o,method:"wc_sessionExtend",params:{}}),{done:d,resolve:b,reject:A}=(0,_.H1)();return this.events.once((0,_.E0)("session_extend",a),({error:$})=>{$?A($):b()}),await this.setExpiry(o,(0,_.gn)(Ds)),{acknowledged:d}},this.request=async n=>{await this.isInitialized(),await this.isValidRequest(n);const{chainId:o,request:a,topic:d,expiry:b}=n,A=Mi(),{done:$,resolve:R,reject:B}=(0,_.H1)(b,"Request expired. Please try again.");return this.events.once((0,_.E0)("session_request",A),({error:Y,result:se})=>{Y?B(Y):R(se)}),await Promise.all([new Promise(async Y=>{await this.sendRequest({clientRpcId:A,topic:d,method:"wc_sessionRequest",params:{request:a,chainId:o},expiry:b,throwOnFailedPublish:!0}).catch(se=>B(se)),this.client.events.emit("session_request_sent",{topic:d,request:a,chainId:o,id:A}),Y()}),new Promise(async Y=>{const se=await(0,_.bW)(this.client.core.storage,Ou);(0,_.Hh)({id:A,topic:d,wcDeepLink:se}),Y()}),$()]).then(Y=>Y[2])},this.respond=async n=>{await this.isInitialized(),await this.isValidRespond(n);const{topic:o,response:a}=n,{id:d}=a;yt(a)?await this.sendResult({id:d,topic:o,result:a.result,throwOnFailedPublish:!0}):Ye(a)&&await this.sendError(d,o,a.error),this.cleanupAfterResponse(n)},this.ping=async n=>{await this.isInitialized(),await this.isValidPing(n);const{topic:o}=n;if(this.client.session.keys.includes(o)){const a=await this.sendRequest({topic:o,method:"wc_sessionPing",params:{}}),{done:d,resolve:b,reject:A}=(0,_.H1)();this.events.once((0,_.E0)("session_ping",a),({error:$})=>{$?A($):b()}),await d()}else this.client.core.pairing.pairings.keys.includes(o)&&await this.client.core.pairing.ping({topic:o})},this.emit=async n=>{await this.isInitialized(),await this.isValidEmit(n);const{topic:o,event:a,chainId:d}=n;await this.sendRequest({topic:o,method:"wc_sessionEvent",params:{event:a,chainId:d}})},this.disconnect=async n=>{await this.isInitialized(),await this.isValidDisconnect(n);const{topic:o}=n;this.client.session.keys.includes(o)?(await this.sendRequest({topic:o,method:"wc_sessionDelete",params:(0,_.D6)("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(o)):await this.client.core.pairing.disconnect({topic:o})},this.find=n=>(this.isInitialized(),this.client.session.getAll().filter(o=>(0,_.Ih)(o,n))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async n=>{if(n.pairingTopic)try{const o=this.client.core.pairing.pairings.get(n.pairingTopic),a=this.client.core.pairing.pairings.getAll().filter(d=>{var b,A;return((b=d.peerMetadata)==null?void 0:b.url)&&((A=d.peerMetadata)==null?void 0:A.url)===n.peer.metadata.url&&d.topic&&d.topic!==o.topic});if(a.length===0)return;this.client.logger.info(`Cleaning up ${a.length} duplicate pairing(s)`),await Promise.all(a.map(d=>this.client.core.pairing.disconnect({topic:d.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(o){this.client.logger.error(o)}},this.deleteSession=async(n,o)=>{const{self:a}=this.client.session.get(n);await this.client.core.relayer.unsubscribe(n),this.client.session.delete(n,(0,_.D6)("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(a.publicKey)&&await this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.keychain.has(n)&&await this.client.core.crypto.deleteSymKey(n),o||this.client.core.expirer.del(n),this.client.core.storage.removeItem(Ou).catch(d=>this.client.logger.warn(d)),this.getPendingSessionRequests().forEach(d=>{d.topic===n&&this.deletePendingSessionRequest(d.id,(0,_.D6)("USER_DISCONNECTED"))})},this.deleteProposal=async(n,o)=>{await Promise.all([this.client.proposal.delete(n,(0,_.D6)("USER_DISCONNECTED")),o?Promise.resolve():this.client.core.expirer.del(n)])},this.deletePendingSessionRequest=async(n,o,a=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,o),a?Promise.resolve():this.client.core.expirer.del(n)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(d=>d.id!==n),a&&(this.sessionRequestQueue.state=Ei.idle)},this.setExpiry=async(n,o)=>{this.client.session.keys.includes(n)&&await this.client.session.update(n,{expiry:o}),this.client.core.expirer.set(n,o)},this.setProposal=async(n,o)=>{await this.client.proposal.set(n,o),this.client.core.expirer.set(n,o.expiry)},this.setPendingSessionRequest=async n=>{const o=Hn.wc_sessionRequest.req.ttl,{id:a,topic:d,params:b,verifyContext:A}=n;await this.client.pendingRequest.set(a,{id:a,topic:d,params:b,verifyContext:A}),o&&this.client.core.expirer.set(a,(0,_.gn)(o))},this.sendRequest=async n=>{const{topic:o,method:a,params:d,expiry:b,relayRpcId:A,clientRpcId:$,throwOnFailedPublish:R}=n,B=hi(a,d,$);if((0,_.jU)()&&og.includes(a)){const Se=(0,_.rj)(JSON.stringify(B));this.client.core.verify.register({attestationId:Se})}const Y=await this.client.core.crypto.encode(o,B),se=Hn[a].req;return b&&(se.ttl=b),A&&(se.id=A),this.client.core.history.set(o,B),R?(se.internal=Kn(Rr({},se.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(o,Y,se)):this.client.core.relayer.publish(o,Y,se).catch(Se=>this.client.logger.error(Se)),B.id},this.sendResult=async n=>{const{id:o,topic:a,result:d,throwOnFailedPublish:b}=n,A=vn(o,d),$=await this.client.core.crypto.encode(a,A),R=await this.client.core.history.get(a,o),B=Hn[R.request.method].res;b?(B.internal=Kn(Rr({},B.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(a,$,B)):this.client.core.relayer.publish(a,$,B).catch(Y=>this.client.logger.error(Y)),await this.client.core.history.resolve(A)},this.sendError=async(n,o,a)=>{const d=Xi(n,a),b=await this.client.core.crypto.encode(o,d),A=await this.client.core.history.get(o,n),$=Hn[A.request.method].res;this.client.core.relayer.publish(o,b,$),await this.client.core.history.resolve(d)},this.cleanup=async()=>{const n=[],o=[];this.client.session.getAll().forEach(a=>{(0,_.Bw)(a.expiry)&&n.push(a.topic)}),this.client.proposal.getAll().forEach(a=>{(0,_.Bw)(a.expiry)&&o.push(a.id)}),await Promise.all([...n.map(a=>this.deleteSession(a)),...o.map(a=>this.deleteProposal(a))])},this.onRelayEventRequest=async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Ei.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Ei.active;const n=this.requestQueue.queue.shift();if(n)try{this.processRequest(n),await new Promise(o=>setTimeout(o,300))}catch(o){this.client.logger.warn(o)}}this.requestQueue.state=Ei.idle},this.processRequest=n=>{const{topic:o,payload:a}=n,d=a.method;switch(d){case"wc_sessionPropose":return this.onSessionProposeRequest(o,a);case"wc_sessionSettle":return this.onSessionSettleRequest(o,a);case"wc_sessionUpdate":return this.onSessionUpdateRequest(o,a);case"wc_sessionExtend":return this.onSessionExtendRequest(o,a);case"wc_sessionPing":return this.onSessionPingRequest(o,a);case"wc_sessionDelete":return this.onSessionDeleteRequest(o,a);case"wc_sessionRequest":return this.onSessionRequest(o,a);case"wc_sessionEvent":return this.onSessionEventRequest(o,a);default:return this.client.logger.info(`Unsupported request method ${d}`)}},this.onRelayEventResponse=async n=>{const{topic:o,payload:a}=n,d=(await this.client.core.history.get(o,a.id)).request.method;switch(d){case"wc_sessionPropose":return this.onSessionProposeResponse(o,a);case"wc_sessionSettle":return this.onSessionSettleResponse(o,a);case"wc_sessionUpdate":return this.onSessionUpdateResponse(o,a);case"wc_sessionExtend":return this.onSessionExtendResponse(o,a);case"wc_sessionPing":return this.onSessionPingResponse(o,a);case"wc_sessionRequest":return this.onSessionRequestResponse(o,a);default:return this.client.logger.info(`Unsupported response method ${d}`)}},this.onRelayEventUnknownPayload=n=>{const{topic:o}=n,{message:a}=(0,_.Z7)("MISSING_OR_INVALID",`Decoded payload on topic ${o} is not identifiable as a JSON-RPC request or a response.`);throw new Error(a)},this.onSessionProposeRequest=async(n,o)=>{const{params:a,id:d}=o;try{this.isValidConnect(Rr({},o.params));const b=(0,_.gn)(we.FIVE_MINUTES),A=Rr({id:d,pairingTopic:n,expiry:b},a);await this.setProposal(d,A);const $=(0,_.rj)(JSON.stringify(o)),R=await this.getVerifyContext($,A.proposer.metadata);this.client.events.emit("session_proposal",{id:d,params:A,verifyContext:R})}catch(b){await this.sendError(d,n,b),this.client.logger.error(b)}},this.onSessionProposeResponse=async(n,o)=>{const{id:a}=o;if(yt(o)){const{result:d}=o;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:d});const b=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:b});const A=b.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:A});const $=d.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:$});const R=await this.client.core.crypto.generateSharedKey(A,$);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:R});const B=await this.client.core.relayer.subscribe(R);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:B}),await this.client.core.pairing.activate({topic:n})}else Ye(o)&&(await this.client.proposal.delete(a,(0,_.D6)("USER_DISCONNECTED")),this.events.emit((0,_.E0)("session_connect"),{error:o.error}))},this.onSessionSettleRequest=async(n,o)=>{const{id:a,params:d}=o;try{this.isValidSessionSettleRequest(d);const{relay:b,controller:A,expiry:$,namespaces:R,requiredNamespaces:B,optionalNamespaces:Y,sessionProperties:se,pairingTopic:Se}=o.params,pe=Rr({topic:n,relay:b,expiry:$,namespaces:R,acknowledged:!0,pairingTopic:Se,requiredNamespaces:B,optionalNamespaces:Y,controller:A.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:A.publicKey,metadata:A.metadata}},se&&{sessionProperties:se});await this.sendResult({id:o.id,topic:n,result:!0}),this.events.emit((0,_.E0)("session_connect"),{session:pe}),this.cleanupDuplicatePairings(pe)}catch(b){await this.sendError(a,n,b),this.client.logger.error(b)}},this.onSessionSettleResponse=async(n,o)=>{const{id:a}=o;yt(o)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit((0,_.E0)("session_approve",a),{})):Ye(o)&&(await this.client.session.delete(n,(0,_.D6)("USER_DISCONNECTED")),this.events.emit((0,_.E0)("session_approve",a),{error:o.error}))},this.onSessionUpdateRequest=async(n,o)=>{const{params:a,id:d}=o;try{const b=`${n}_session_update`,A=_.O6.get(b);if(A&&this.isRequestOutOfSync(A,d)){this.client.logger.info(`Discarding out of sync request - ${d}`);return}this.isValidUpdate(Rr({topic:n},a)),await this.client.session.update(n,{namespaces:a.namespaces}),await this.sendResult({id:d,topic:n,result:!0}),this.client.events.emit("session_update",{id:d,topic:n,params:a}),_.O6.set(b,d)}catch(b){await this.sendError(d,n,b),this.client.logger.error(b)}},this.isRequestOutOfSync=(n,o)=>parseInt(o.toString().slice(0,-3))<=parseInt(n.toString().slice(0,-3)),this.onSessionUpdateResponse=(n,o)=>{const{id:a}=o;yt(o)?this.events.emit((0,_.E0)("session_update",a),{}):Ye(o)&&this.events.emit((0,_.E0)("session_update",a),{error:o.error})},this.onSessionExtendRequest=async(n,o)=>{const{id:a}=o;try{this.isValidExtend({topic:n}),await this.setExpiry(n,(0,_.gn)(Ds)),await this.sendResult({id:a,topic:n,result:!0}),this.client.events.emit("session_extend",{id:a,topic:n})}catch(d){await this.sendError(a,n,d),this.client.logger.error(d)}},this.onSessionExtendResponse=(n,o)=>{const{id:a}=o;yt(o)?this.events.emit((0,_.E0)("session_extend",a),{}):Ye(o)&&this.events.emit((0,_.E0)("session_extend",a),{error:o.error})},this.onSessionPingRequest=async(n,o)=>{const{id:a}=o;try{this.isValidPing({topic:n}),await this.sendResult({id:a,topic:n,result:!0}),this.client.events.emit("session_ping",{id:a,topic:n})}catch(d){await this.sendError(a,n,d),this.client.logger.error(d)}},this.onSessionPingResponse=(n,o)=>{const{id:a}=o;setTimeout(()=>{yt(o)?this.events.emit((0,_.E0)("session_ping",a),{}):Ye(o)&&this.events.emit((0,_.E0)("session_ping",a),{error:o.error})},500)},this.onSessionDeleteRequest=async(n,o)=>{const{id:a}=o;try{this.isValidDisconnect({topic:n,reason:o.params}),await Promise.all([new Promise(d=>{this.client.core.relayer.once(vr.publish,async()=>{d(await this.deleteSession(n))})}),this.sendResult({id:a,topic:n,result:!0})]),this.client.events.emit("session_delete",{id:a,topic:n})}catch(d){this.client.logger.error(d)}},this.onSessionRequest=async(n,o)=>{const{id:a,params:d}=o;try{this.isValidRequest(Rr({topic:n},d));const b=(0,_.rj)(JSON.stringify(hi("wc_sessionRequest",d,a))),A=this.client.session.get(n),$=await this.getVerifyContext(b,A.peer.metadata),R={id:a,topic:n,params:d,verifyContext:$};await this.setPendingSessionRequest(R),this.addSessionRequestToSessionRequestQueue(R),this.processSessionRequestQueue()}catch(b){await this.sendError(a,n,b),this.client.logger.error(b)}},this.onSessionRequestResponse=(n,o)=>{const{id:a}=o;yt(o)?this.events.emit((0,_.E0)("session_request",a),{result:o.result}):Ye(o)&&this.events.emit((0,_.E0)("session_request",a),{error:o.error})},this.onSessionEventRequest=async(n,o)=>{const{id:a,params:d}=o;try{const b=`${n}_session_event_${d.event.name}`,A=_.O6.get(b);if(A&&this.isRequestOutOfSync(A,a)){this.client.logger.info(`Discarding out of sync request - ${a}`);return}this.isValidEmit(Rr({topic:n},d)),this.client.events.emit("session_event",{id:a,topic:n,params:d}),_.O6.set(b,a)}catch(b){await this.sendError(a,n,b),this.client.logger.error(b)}},this.addSessionRequestToSessionRequestQueue=n=>{this.sessionRequestQueue.queue.push(n)},this.cleanupAfterResponse=n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Ei.idle,this.processSessionRequestQueue()},(0,we.toMiliseconds)(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===Ei.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Ei.active,this.client.events.emit("session_request",n)}catch(o){this.client.logger.error(o)}},this.onPairingCreated=n=>{if(n.active)return;const o=this.client.proposal.getAll().find(a=>a.pairingTopic===n.topic);o&&this.onSessionProposeRequest(n.topic,hi("wc_sessionPropose",{requiredNamespaces:o.requiredNamespaces,optionalNamespaces:o.optionalNamespaces,relays:o.relays,proposer:o.proposer,sessionProperties:o.sessionProperties},o.id))},this.isValidConnect=async n=>{if(!(0,_.EJ)(n)){const{message:$}=(0,_.Z7)("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error($)}const{pairingTopic:o,requiredNamespaces:a,optionalNamespaces:d,sessionProperties:b,relays:A}=n;if((0,_.o8)(o)||await this.isValidPairingTopic(o),!(0,_.PM)(A,!0)){const{message:$}=(0,_.Z7)("MISSING_OR_INVALID",`connect() relays: ${A}`);throw new Error($)}!(0,_.o8)(a)&&(0,_.L5)(a)!==0&&this.validateNamespaces(a,"requiredNamespaces"),!(0,_.o8)(d)&&(0,_.L5)(d)!==0&&this.validateNamespaces(d,"optionalNamespaces"),(0,_.o8)(b)||this.validateSessionProps(b,"sessionProperties")},this.validateNamespaces=(n,o)=>{const a=(0,_.n)(n,"connect()",o);if(a)throw new Error(a.message)},this.isValidApprove=async n=>{if(!(0,_.EJ)(n))throw new Error((0,_.Z7)("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:o,namespaces:a,relayProtocol:d,sessionProperties:b}=n;await this.isValidProposalId(o);const A=this.client.proposal.get(o),$=(0,_.in)(a,"approve()");if($)throw new Error($.message);const R=(0,_.rF)(A.requiredNamespaces,a,"approve()");if(R)throw new Error(R.message);if(!(0,_.M_)(d,!0)){const{message:B}=(0,_.Z7)("MISSING_OR_INVALID",`approve() relayProtocol: ${d}`);throw new Error(B)}(0,_.o8)(b)||this.validateSessionProps(b,"sessionProperties")},this.isValidReject=async n=>{if(!(0,_.EJ)(n)){const{message:d}=(0,_.Z7)("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(d)}const{id:o,reason:a}=n;if(await this.isValidProposalId(o),!(0,_.$t)(a)){const{message:d}=(0,_.Z7)("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(a)}`);throw new Error(d)}},this.isValidSessionSettleRequest=n=>{if(!(0,_.EJ)(n)){const{message:R}=(0,_.Z7)("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(R)}const{relay:o,controller:a,namespaces:d,expiry:b}=n;if(!(0,_.Z2)(o)){const{message:R}=(0,_.Z7)("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(R)}const A=(0,_.Dd)(a,"onSessionSettleRequest()");if(A)throw new Error(A.message);const $=(0,_.in)(d,"onSessionSettleRequest()");if($)throw new Error($.message);if((0,_.Bw)(b)){const{message:R}=(0,_.Z7)("EXPIRED","onSessionSettleRequest()");throw new Error(R)}},this.isValidUpdate=async n=>{if(!(0,_.EJ)(n)){const{message:$}=(0,_.Z7)("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error($)}const{topic:o,namespaces:a}=n;await this.isValidSessionTopic(o);const d=this.client.session.get(o),b=(0,_.in)(a,"update()");if(b)throw new Error(b.message);const A=(0,_.rF)(d.requiredNamespaces,a,"update()");if(A)throw new Error(A.message)},this.isValidExtend=async n=>{if(!(0,_.EJ)(n)){const{message:a}=(0,_.Z7)("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(a)}const{topic:o}=n;await this.isValidSessionTopic(o)},this.isValidRequest=async n=>{if(!(0,_.EJ)(n)){const{message:$}=(0,_.Z7)("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error($)}const{topic:o,request:a,chainId:d,expiry:b}=n;await this.isValidSessionTopic(o);const{namespaces:A}=this.client.session.get(o);if(!(0,_.p8)(A,d)){const{message:$}=(0,_.Z7)("MISSING_OR_INVALID",`request() chainId: ${d}`);throw new Error($)}if(!(0,_.hH)(a)){const{message:$}=(0,_.Z7)("MISSING_OR_INVALID",`request() ${JSON.stringify(a)}`);throw new Error($)}if(!(0,_.al)(A,d,a.method)){const{message:$}=(0,_.Z7)("MISSING_OR_INVALID",`request() method: ${a.method}`);throw new Error($)}if(b&&!(0,_.ON)(b,aa)){const{message:$}=(0,_.Z7)("MISSING_OR_INVALID",`request() expiry: ${b}. Expiry must be a number (in seconds) between ${aa.min} and ${aa.max}`);throw new Error($)}},this.isValidRespond=async n=>{var o;if(!(0,_.EJ)(n)){const{message:b}=(0,_.Z7)("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(b)}const{topic:a,response:d}=n;try{await this.isValidSessionTopic(a)}catch(b){throw(o=n==null?void 0:n.response)!=null&&o.id&&this.cleanupAfterResponse(n),b}if(!(0,_.JT)(d)){const{message:b}=(0,_.Z7)("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(d)}`);throw new Error(b)}},this.isValidPing=async n=>{if(!(0,_.EJ)(n)){const{message:a}=(0,_.Z7)("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(a)}const{topic:o}=n;await this.isValidSessionOrPairingTopic(o)},this.isValidEmit=async n=>{if(!(0,_.EJ)(n)){const{message:A}=(0,_.Z7)("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(A)}const{topic:o,event:a,chainId:d}=n;await this.isValidSessionTopic(o);const{namespaces:b}=this.client.session.get(o);if(!(0,_.p8)(b,d)){const{message:A}=(0,_.Z7)("MISSING_OR_INVALID",`emit() chainId: ${d}`);throw new Error(A)}if(!(0,_.nf)(a)){const{message:A}=(0,_.Z7)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(A)}if(!(0,_.sI)(b,d,a.name)){const{message:A}=(0,_.Z7)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(A)}},this.isValidDisconnect=async n=>{if(!(0,_.EJ)(n)){const{message:a}=(0,_.Z7)("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(a)}const{topic:o}=n;await this.isValidSessionOrPairingTopic(o)},this.getVerifyContext=async(n,o)=>{const a={verified:{verifyUrl:o.verifyUrl||bn,validation:"UNKNOWN",origin:o.url||""}};try{const d=await this.client.core.verify.resolve({attestationId:n,verifyUrl:o.verifyUrl});d&&(a.verified.origin=d.origin,a.verified.isScam=d.isScam,a.verified.validation=d.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(d){this.client.logger.info(d)}return this.client.logger.info(`Verify context: ${JSON.stringify(a)}`),a},this.validateSessionProps=(n,o)=>{Object.values(n).forEach(a=>{if(!(0,_.M_)(a,!1)){const{message:d}=(0,_.Z7)("MISSING_OR_INVALID",`${o} must be in Record<string, string> format. Received: ${JSON.stringify(a)}`);throw new Error(d)}})}}async isInitialized(){if(!this.initialized){const{message:r}=(0,_.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(vr.message,async r=>{const{topic:n,message:o}=r;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(o)))return;const a=await this.client.core.crypto.decode(n,o);try{wt(a)?(this.client.core.history.set(n,a),this.onRelayEventRequest({topic:n,payload:a})):At(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a}),this.client.core.history.delete(n,a.id)):this.onRelayEventUnknownPayload({topic:n,payload:a})}catch(d){this.client.logger.error(d)}})}registerExpirerEvents(){this.client.core.expirer.on(Kr.expired,async r=>{const{topic:n,id:o}=(0,_.iP)(r.target);if(o&&this.client.pendingRequest.keys.includes(o))return await this.deletePendingSessionRequest(o,(0,_.Z7)("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession(n,!0),this.client.events.emit("session_expire",{topic:n})):o&&(await this.deleteProposal(o,!0),this.client.events.emit("proposal_expire",{id:o}))})}registerPairingEvents(){this.client.core.pairing.events.on(qn.create,r=>this.onPairingCreated(r))}isValidPairingTopic(r){if(!(0,_.M_)(r,!1)){const{message:n}=(0,_.Z7)("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(r)){const{message:n}=(0,_.Z7)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(n)}if((0,_.Bw)(this.client.core.pairing.pairings.get(r).expiry)){const{message:n}=(0,_.Z7)("EXPIRED",`pairing topic: ${r}`);throw new Error(n)}}async isValidSessionTopic(r){if(!(0,_.M_)(r,!1)){const{message:n}=(0,_.Z7)("MISSING_OR_INVALID",`session topic should be a string: ${r}`);throw new Error(n)}if(!this.client.session.keys.includes(r)){const{message:n}=(0,_.Z7)("NO_MATCHING_KEY",`session topic doesn't exist: ${r}`);throw new Error(n)}if((0,_.Bw)(this.client.session.get(r).expiry)){await this.deleteSession(r);const{message:n}=(0,_.Z7)("EXPIRED",`session topic: ${r}`);throw new Error(n)}}async isValidSessionOrPairingTopic(r){if(this.client.session.keys.includes(r))await this.isValidSessionTopic(r);else if(this.client.core.pairing.pairings.keys.includes(r))this.isValidPairingTopic(r);else if((0,_.M_)(r,!1)){const{message:n}=(0,_.Z7)("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${r}`);throw new Error(n)}else{const{message:n}=(0,_.Z7)("MISSING_OR_INVALID",`session or pairing topic should be a string: ${r}`);throw new Error(n)}}async isValidProposalId(r){if(!(0,_.Q0)(r)){const{message:n}=(0,_.Z7)("MISSING_OR_INVALID",`proposal id should be a number: ${r}`);throw new Error(n)}if(!this.client.proposal.keys.includes(r)){const{message:n}=(0,_.Z7)("NO_MATCHING_KEY",`proposal id doesn't exist: ${r}`);throw new Error(n)}if((0,_.Bw)(this.client.proposal.get(r).expiry)){await this.deleteProposal(r);const{message:n}=(0,_.Z7)("EXPIRED",`proposal id: ${r}`);throw new Error(n)}}}class dg extends Ts{constructor(r,n){super(r,n,rg,sa),this.core=r,this.logger=n}}class pg extends Ts{constructor(r,n){super(r,n,ig,sa),this.core=r,this.logger=n}}class gg extends Ts{constructor(r,n){super(r,n,sg,sa,o=>o.id),this.core=r,this.logger=n}}class ca extends Wt{constructor(r){super(r),this.protocol=Iu,this.version=Pu,this.name=oa.name,this.events=new Z.EventEmitter,this.on=(o,a)=>this.events.on(o,a),this.once=(o,a)=>this.events.once(o,a),this.off=(o,a)=>this.events.off(o,a),this.removeListener=(o,a)=>this.events.removeListener(o,a),this.removeAllListeners=o=>this.events.removeAllListeners(o),this.connect=async o=>{try{return await this.engine.connect(o)}catch(a){throw this.logger.error(a.message),a}},this.pair=async o=>{try{return await this.engine.pair(o)}catch(a){throw this.logger.error(a.message),a}},this.approve=async o=>{try{return await this.engine.approve(o)}catch(a){throw this.logger.error(a.message),a}},this.reject=async o=>{try{return await this.engine.reject(o)}catch(a){throw this.logger.error(a.message),a}},this.update=async o=>{try{return await this.engine.update(o)}catch(a){throw this.logger.error(a.message),a}},this.extend=async o=>{try{return await this.engine.extend(o)}catch(a){throw this.logger.error(a.message),a}},this.request=async o=>{try{return await this.engine.request(o)}catch(a){throw this.logger.error(a.message),a}},this.respond=async o=>{try{return await this.engine.respond(o)}catch(a){throw this.logger.error(a.message),a}},this.ping=async o=>{try{return await this.engine.ping(o)}catch(a){throw this.logger.error(a.message),a}},this.emit=async o=>{try{return await this.engine.emit(o)}catch(a){throw this.logger.error(a.message),a}},this.disconnect=async o=>{try{return await this.engine.disconnect(o)}catch(a){throw this.logger.error(a.message),a}},this.find=o=>{try{return this.engine.find(o)}catch(a){throw this.logger.error(a.message),a}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(o){throw this.logger.error(o.message),o}},this.name=(r==null?void 0:r.name)||oa.name,this.metadata=(r==null?void 0:r.metadata)||(0,_.D)();const n=typeof(r==null?void 0:r.logger)<"u"&&typeof(r==null?void 0:r.logger)!="string"?r.logger:(0,je.pino)((0,je.getDefaultLoggerOptions)({level:(r==null?void 0:r.logger)||oa.logger}));this.core=(r==null?void 0:r.core)||new tg(r),this.logger=(0,je.generateChildLogger)(n,this.name),this.session=new pg(this.core,this.logger),this.proposal=new dg(this.core,this.logger),this.pendingRequest=new gg(this.core,this.logger),this.engine=new fg(this)}static async init(r){const n=new ca(r);return await n.initialize(),n}get context(){return(0,je.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(r){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(r.message),r}}}const fE=null,dE=null;var yg=K(54098),Tu=K.n(yg);const Du={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"},Nu=10;class Lu{constructor(r,n=!1){if(this.url=r,this.disableProviderPing=n,this.events=new Z.EventEmitter,this.isAvailable=!1,this.registering=!1,!ie(r))throw new Error(`Provided URL is not compatible with HTTP connection: ${r}`);this.url=r,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(r,n){this.events.on(r,n)}once(r,n){this.events.once(r,n)}off(r,n){this.events.off(r,n)}removeListener(r,n){this.events.removeListener(r,n)}async open(r=this.url){await this.register(r)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(r,n){this.isAvailable||await this.register();try{const o=tt(r),d=await(await Tu()(this.url,Object.assign(Object.assign({},Du),{body:o}))).json();this.onPayload({data:d})}catch(o){this.onError(r.id,o)}}async register(r=this.url){if(!ie(r))throw new Error(`Provided URL is not compatible with HTTP connection: ${r}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((o,a)=>{this.events.once("register_error",d=>{this.resetMaxListeners(),a(d)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return a(new Error("HTTP connection is missing or invalid"));o()})})}this.url=r,this.registering=!0;try{if(!this.disableProviderPing){const n=tt({id:1,jsonrpc:"2.0",method:"test",params:[]});await Tu()(r,Object.assign(Object.assign({},Du),{body:n}))}this.onOpen()}catch(n){const o=this.parseError(n);throw this.events.emit("register_error",o),this.onClose(),o}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(r){if(typeof r.data>"u")return;const n=typeof r.data=="string"?Qe(r.data):r.data;this.events.emit("payload",n)}onError(r,n){const o=this.parseError(n),a=o.message||o.toString(),d=Xi(r,a);this.events.emit("payload",d)}parseError(r,n=this.url){return ui(r,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Nu&&this.events.setMaxListeners(Nu)}}var vg=Lu,en=vg;const Fu="error",mg="wss://relay.walletconnect.com",_g="wc",wg="universal_provider",ju=`${_g}@2:${wg}:`,bg="https://rpc.walletconnect.com/v1/",xi={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Vn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof K.g<"u"?K.g:typeof self<"u"?self:{},ua={exports:{}};(function(h,r){(function(){var n,o="4.17.21",a=200,d="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",b="Expected a function",A="Invalid `variable` option passed into `_.template`",$="__lodash_hash_undefined__",R=500,B="__lodash_placeholder__",Y=1,se=2,Se=4,pe=1,Ge=2,lt=1,rt=2,sr=4,nt=8,st=16,Ot=32,br=64,Bt=128,Er=256,$i=512,s0=30,o0="...",a0=800,c0=16,Gu=1,u0=2,h0=3,rn=1/0,qi=9007199254740991,l0=17976931348623157e292,js=0/0,pi=4294967295,f0=pi-1,d0=pi>>>1,p0=[["ary",Bt],["bind",lt],["bindKey",rt],["curry",nt],["curryRight",st],["flip",$i],["partial",Ot],["partialRight",br],["rearg",Er]],En="[object Arguments]",Ms="[object Array]",g0="[object AsyncFunction]",Gn="[object Boolean]",Wn="[object Date]",y0="[object DOMException]",zs="[object Error]",Us="[object Function]",Wu="[object GeneratorFunction]",ti="[object Map]",Jn="[object Number]",v0="[object Null]",Ii="[object Object]",Ju="[object Promise]",m0="[object Proxy]",Zn="[object RegExp]",ri="[object Set]",Qn="[object String]",$s="[object Symbol]",_0="[object Undefined]",Yn="[object WeakMap]",w0="[object WeakSet]",Xn="[object ArrayBuffer]",xn="[object DataView]",ma="[object Float32Array]",_a="[object Float64Array]",wa="[object Int8Array]",ba="[object Int16Array]",Ea="[object Int32Array]",xa="[object Uint8Array]",Ia="[object Uint8ClampedArray]",Pa="[object Uint16Array]",Sa="[object Uint32Array]",b0=/\b__p \+= '';/g,E0=/\b(__p \+=) '' \+/g,x0=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Zu=/&(?:amp|lt|gt|quot|#39);/g,Qu=/[&<>"']/g,I0=RegExp(Zu.source),P0=RegExp(Qu.source),S0=/<%-([\s\S]+?)%>/g,O0=/<%([\s\S]+?)%>/g,Yu=/<%=([\s\S]+?)%>/g,R0=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,A0=/^\w*$/,C0=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Oa=/[\\^$.*+?()[\]{}|]/g,T0=RegExp(Oa.source),Ra=/^\s+/,D0=/\s/,N0=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,L0=/\{\n\/\* \[wrapped with (.+)\] \*/,F0=/,? & /,j0=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,M0=/[()=,{}\[\]\/\s]/,z0=/\\(\\)?/g,U0=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Xu=/\w*$/,$0=/^[-+]0x[0-9a-f]+$/i,q0=/^0b[01]+$/i,B0=/^\[object .+?Constructor\]$/,H0=/^0o[0-7]+$/i,K0=/^(?:0|[1-9]\d*)$/,V0=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qs=/($^)/,k0=/['\n\r\u2028\u2029\\]/g,Bs="\\ud800-\\udfff",G0="\\u0300-\\u036f",W0="\\ufe20-\\ufe2f",J0="\\u20d0-\\u20ff",eh=G0+W0+J0,th="\\u2700-\\u27bf",rh="a-z\\xdf-\\xf6\\xf8-\\xff",Z0="\\xac\\xb1\\xd7\\xf7",Q0="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Y0="\\u2000-\\u206f",X0=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ih="A-Z\\xc0-\\xd6\\xd8-\\xde",nh="\\ufe0e\\ufe0f",sh=Z0+Q0+Y0+X0,Aa="['\u2019]",ey="["+Bs+"]",oh="["+sh+"]",Hs="["+eh+"]",ah="\\d+",ty="["+th+"]",ch="["+rh+"]",uh="[^"+Bs+sh+ah+th+rh+ih+"]",Ca="\\ud83c[\\udffb-\\udfff]",ry="(?:"+Hs+"|"+Ca+")",hh="[^"+Bs+"]",Ta="(?:\\ud83c[\\udde6-\\uddff]){2}",Da="[\\ud800-\\udbff][\\udc00-\\udfff]",In="["+ih+"]",lh="\\u200d",fh="(?:"+ch+"|"+uh+")",iy="(?:"+In+"|"+uh+")",dh="(?:"+Aa+"(?:d|ll|m|re|s|t|ve))?",ph="(?:"+Aa+"(?:D|LL|M|RE|S|T|VE))?",gh=ry+"?",yh="["+nh+"]?",ny="(?:"+lh+"(?:"+[hh,Ta,Da].join("|")+")"+yh+gh+")*",sy="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",oy="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",vh=yh+gh+ny,ay="(?:"+[ty,Ta,Da].join("|")+")"+vh,cy="(?:"+[hh+Hs+"?",Hs,Ta,Da,ey].join("|")+")",uy=RegExp(Aa,"g"),hy=RegExp(Hs,"g"),Na=RegExp(Ca+"(?="+Ca+")|"+cy+vh,"g"),ly=RegExp([In+"?"+ch+"+"+dh+"(?="+[oh,In,"$"].join("|")+")",iy+"+"+ph+"(?="+[oh,In+fh,"$"].join("|")+")",In+"?"+fh+"+"+dh,In+"+"+ph,oy,sy,ah,ay].join("|"),"g"),fy=RegExp("["+lh+Bs+eh+nh+"]"),dy=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,py=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],gy=-1,It={};It[ma]=It[_a]=It[wa]=It[ba]=It[Ea]=It[xa]=It[Ia]=It[Pa]=It[Sa]=!0,It[En]=It[Ms]=It[Xn]=It[Gn]=It[xn]=It[Wn]=It[zs]=It[Us]=It[ti]=It[Jn]=It[Ii]=It[Zn]=It[ri]=It[Qn]=It[Yn]=!1;var bt={};bt[En]=bt[Ms]=bt[Xn]=bt[xn]=bt[Gn]=bt[Wn]=bt[ma]=bt[_a]=bt[wa]=bt[ba]=bt[Ea]=bt[ti]=bt[Jn]=bt[Ii]=bt[Zn]=bt[ri]=bt[Qn]=bt[$s]=bt[xa]=bt[Ia]=bt[Pa]=bt[Sa]=!0,bt[zs]=bt[Us]=bt[Yn]=!1;var yy={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},vy={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},my={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},_y={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},wy=parseFloat,by=parseInt,mh=typeof Vn=="object"&&Vn&&Vn.Object===Object&&Vn,Ey=typeof self=="object"&&self&&self.Object===Object&&self,pr=mh||Ey||Function("return this")(),La=r&&!r.nodeType&&r,nn=La&&!0&&h&&!h.nodeType&&h,_h=nn&&nn.exports===La,Fa=_h&&mh.process,Vr=function(){try{var D=nn&&nn.require&&nn.require("util").types;return D||Fa&&Fa.binding&&Fa.binding("util")}catch{}}(),wh=Vr&&Vr.isArrayBuffer,bh=Vr&&Vr.isDate,Eh=Vr&&Vr.isMap,xh=Vr&&Vr.isRegExp,Ih=Vr&&Vr.isSet,Ph=Vr&&Vr.isTypedArray;function Fr(D,G,z){switch(z.length){case 0:return D.call(G);case 1:return D.call(G,z[0]);case 2:return D.call(G,z[0],z[1]);case 3:return D.call(G,z[0],z[1],z[2])}return D.apply(G,z)}function xy(D,G,z,xe){for(var Ue=-1,ot=D==null?0:D.length;++Ue<ot;){var or=D[Ue];G(xe,or,z(or),D)}return xe}function kr(D,G){for(var z=-1,xe=D==null?0:D.length;++z<xe&&G(D[z],z,D)!==!1;);return D}function Iy(D,G){for(var z=D==null?0:D.length;z--&&G(D[z],z,D)!==!1;);return D}function Sh(D,G){for(var z=-1,xe=D==null?0:D.length;++z<xe;)if(!G(D[z],z,D))return!1;return!0}function Bi(D,G){for(var z=-1,xe=D==null?0:D.length,Ue=0,ot=[];++z<xe;){var or=D[z];G(or,z,D)&&(ot[Ue++]=or)}return ot}function Ks(D,G){var z=D==null?0:D.length;return!!z&&Pn(D,G,0)>-1}function ja(D,G,z){for(var xe=-1,Ue=D==null?0:D.length;++xe<Ue;)if(z(G,D[xe]))return!0;return!1}function Rt(D,G){for(var z=-1,xe=D==null?0:D.length,Ue=Array(xe);++z<xe;)Ue[z]=G(D[z],z,D);return Ue}function Hi(D,G){for(var z=-1,xe=G.length,Ue=D.length;++z<xe;)D[Ue+z]=G[z];return D}function Ma(D,G,z,xe){var Ue=-1,ot=D==null?0:D.length;for(xe&&ot&&(z=D[++Ue]);++Ue<ot;)z=G(z,D[Ue],Ue,D);return z}function Py(D,G,z,xe){var Ue=D==null?0:D.length;for(xe&&Ue&&(z=D[--Ue]);Ue--;)z=G(z,D[Ue],Ue,D);return z}function za(D,G){for(var z=-1,xe=D==null?0:D.length;++z<xe;)if(G(D[z],z,D))return!0;return!1}var Sy=Ua("length");function Oy(D){return D.split("")}function Ry(D){return D.match(j0)||[]}function Oh(D,G,z){var xe;return z(D,function(Ue,ot,or){if(G(Ue,ot,or))return xe=ot,!1}),xe}function Vs(D,G,z,xe){for(var Ue=D.length,ot=z+(xe?1:-1);xe?ot--:++ot<Ue;)if(G(D[ot],ot,D))return ot;return-1}function Pn(D,G,z){return G===G?$y(D,G,z):Vs(D,Rh,z)}function Ay(D,G,z,xe){for(var Ue=z-1,ot=D.length;++Ue<ot;)if(xe(D[Ue],G))return Ue;return-1}function Rh(D){return D!==D}function Ah(D,G){var z=D==null?0:D.length;return z?qa(D,G)/z:js}function Ua(D){return function(G){return G==null?n:G[D]}}function $a(D){return function(G){return D==null?n:D[G]}}function Ch(D,G,z,xe,Ue){return Ue(D,function(ot,or,vt){z=xe?(xe=!1,ot):G(z,ot,or,vt)}),z}function Cy(D,G){var z=D.length;for(D.sort(G);z--;)D[z]=D[z].value;return D}function qa(D,G){for(var z,xe=-1,Ue=D.length;++xe<Ue;){var ot=G(D[xe]);ot!==n&&(z=z===n?ot:z+ot)}return z}function Ba(D,G){for(var z=-1,xe=Array(D);++z<D;)xe[z]=G(z);return xe}function Ty(D,G){return Rt(G,function(z){return[z,D[z]]})}function Th(D){return D&&D.slice(0,Fh(D)+1).replace(Ra,"")}function jr(D){return function(G){return D(G)}}function Ha(D,G){return Rt(G,function(z){return D[z]})}function es(D,G){return D.has(G)}function Dh(D,G){for(var z=-1,xe=D.length;++z<xe&&Pn(G,D[z],0)>-1;);return z}function Nh(D,G){for(var z=D.length;z--&&Pn(G,D[z],0)>-1;);return z}function Dy(D,G){for(var z=D.length,xe=0;z--;)D[z]===G&&++xe;return xe}var Ny=$a(yy),Ly=$a(vy);function Fy(D){return"\\"+_y[D]}function jy(D,G){return D==null?n:D[G]}function Sn(D){return fy.test(D)}function My(D){return dy.test(D)}function zy(D){for(var G,z=[];!(G=D.next()).done;)z.push(G.value);return z}function Ka(D){var G=-1,z=Array(D.size);return D.forEach(function(xe,Ue){z[++G]=[Ue,xe]}),z}function Lh(D,G){return function(z){return D(G(z))}}function Ki(D,G){for(var z=-1,xe=D.length,Ue=0,ot=[];++z<xe;){var or=D[z];(or===G||or===B)&&(D[z]=B,ot[Ue++]=z)}return ot}function ks(D){var G=-1,z=Array(D.size);return D.forEach(function(xe){z[++G]=xe}),z}function Uy(D){var G=-1,z=Array(D.size);return D.forEach(function(xe){z[++G]=[xe,xe]}),z}function $y(D,G,z){for(var xe=z-1,Ue=D.length;++xe<Ue;)if(D[xe]===G)return xe;return-1}function qy(D,G,z){for(var xe=z+1;xe--;)if(D[xe]===G)return xe;return xe}function On(D){return Sn(D)?Hy(D):Sy(D)}function ii(D){return Sn(D)?Ky(D):Oy(D)}function Fh(D){for(var G=D.length;G--&&D0.test(D.charAt(G)););return G}var By=$a(my);function Hy(D){for(var G=Na.lastIndex=0;Na.test(D);)++G;return G}function Ky(D){return D.match(Na)||[]}function Vy(D){return D.match(ly)||[]}var ky=function D(G){G=G==null?pr:Rn.defaults(pr.Object(),G,Rn.pick(pr,py));var z=G.Array,xe=G.Date,Ue=G.Error,ot=G.Function,or=G.Math,vt=G.Object,Va=G.RegExp,Gy=G.String,Gr=G.TypeError,Gs=z.prototype,Wy=ot.prototype,An=vt.prototype,Ws=G["__core-js_shared__"],Js=Wy.toString,ft=An.hasOwnProperty,Jy=0,jh=function(){var e=/[^.]+$/.exec(Ws&&Ws.keys&&Ws.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Zs=An.toString,Zy=Js.call(vt),Qy=pr._,Yy=Va("^"+Js.call(ft).replace(Oa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qs=_h?G.Buffer:n,Vi=G.Symbol,Ys=G.Uint8Array,Mh=Qs?Qs.allocUnsafe:n,Xs=Lh(vt.getPrototypeOf,vt),zh=vt.create,Uh=An.propertyIsEnumerable,eo=Gs.splice,$h=Vi?Vi.isConcatSpreadable:n,ts=Vi?Vi.iterator:n,sn=Vi?Vi.toStringTag:n,to=function(){try{var e=hn(vt,"defineProperty");return e({},"",{}),e}catch{}}(),Xy=G.clearTimeout!==pr.clearTimeout&&G.clearTimeout,ev=xe&&xe.now!==pr.Date.now&&xe.now,tv=G.setTimeout!==pr.setTimeout&&G.setTimeout,ro=or.ceil,io=or.floor,ka=vt.getOwnPropertySymbols,rv=Qs?Qs.isBuffer:n,qh=G.isFinite,iv=Gs.join,nv=Lh(vt.keys,vt),ar=or.max,mr=or.min,sv=xe.now,ov=G.parseInt,Bh=or.random,av=Gs.reverse,Ga=hn(G,"DataView"),rs=hn(G,"Map"),Wa=hn(G,"Promise"),Cn=hn(G,"Set"),is=hn(G,"WeakMap"),ns=hn(vt,"create"),no=is&&new is,Tn={},cv=ln(Ga),uv=ln(rs),hv=ln(Wa),lv=ln(Cn),fv=ln(is),so=Vi?Vi.prototype:n,ss=so?so.valueOf:n,Hh=so?so.toString:n;function v(e){if(jt(e)&&!qe(e)&&!(e instanceof Ze)){if(e instanceof Wr)return e;if(ft.call(e,"__wrapped__"))return Kl(e)}return new Wr(e)}var Dn=function(){function e(){}return function(t){if(!Ct(t))return{};if(zh)return zh(t);e.prototype=t;var s=new e;return e.prototype=n,s}}();function oo(){}function Wr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}v.templateSettings={escape:S0,evaluate:O0,interpolate:Yu,variable:"",imports:{_:v}},v.prototype=oo.prototype,v.prototype.constructor=v,Wr.prototype=Dn(oo.prototype),Wr.prototype.constructor=Wr;function Ze(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=pi,this.__views__=[]}function dv(){var e=new Ze(this.__wrapped__);return e.__actions__=Ar(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ar(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ar(this.__views__),e}function pv(){if(this.__filtered__){var e=new Ze(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function gv(){var e=this.__wrapped__.value(),t=this.__dir__,s=qe(e),u=t<0,f=s?e.length:0,w=Om(0,f,this.__views__),P=w.start,S=w.end,N=S-P,ee=u?S:P-1,te=this.__iteratees__,oe=te.length,ye=0,Oe=mr(N,this.__takeCount__);if(!s||!u&&f==N&&Oe==N)return dl(e,this.__actions__);var Le=[];e:for(;N--&&ye<Oe;){ee+=t;for(var Ke=-1,Fe=e[ee];++Ke<oe;){var We=te[Ke],et=We.iteratee,Ur=We.type,Pr=et(Fe);if(Ur==u0)Fe=Pr;else if(!Pr){if(Ur==Gu)continue e;break e}}Le[ye++]=Fe}return Le}Ze.prototype=Dn(oo.prototype),Ze.prototype.constructor=Ze;function on(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var u=e[t];this.set(u[0],u[1])}}function yv(){this.__data__=ns?ns(null):{},this.size=0}function vv(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function mv(e){var t=this.__data__;if(ns){var s=t[e];return s===$?n:s}return ft.call(t,e)?t[e]:n}function _v(e){var t=this.__data__;return ns?t[e]!==n:ft.call(t,e)}function wv(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=ns&&t===n?$:t,this}on.prototype.clear=yv,on.prototype.delete=vv,on.prototype.get=mv,on.prototype.has=_v,on.prototype.set=wv;function Pi(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var u=e[t];this.set(u[0],u[1])}}function bv(){this.__data__=[],this.size=0}function Ev(e){var t=this.__data__,s=ao(t,e);if(s<0)return!1;var u=t.length-1;return s==u?t.pop():eo.call(t,s,1),--this.size,!0}function xv(e){var t=this.__data__,s=ao(t,e);return s<0?n:t[s][1]}function Iv(e){return ao(this.__data__,e)>-1}function Pv(e,t){var s=this.__data__,u=ao(s,e);return u<0?(++this.size,s.push([e,t])):s[u][1]=t,this}Pi.prototype.clear=bv,Pi.prototype.delete=Ev,Pi.prototype.get=xv,Pi.prototype.has=Iv,Pi.prototype.set=Pv;function Si(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var u=e[t];this.set(u[0],u[1])}}function Sv(){this.size=0,this.__data__={hash:new on,map:new(rs||Pi),string:new on}}function Ov(e){var t=wo(this,e).delete(e);return this.size-=t?1:0,t}function Rv(e){return wo(this,e).get(e)}function Av(e){return wo(this,e).has(e)}function Cv(e,t){var s=wo(this,e),u=s.size;return s.set(e,t),this.size+=s.size==u?0:1,this}Si.prototype.clear=Sv,Si.prototype.delete=Ov,Si.prototype.get=Rv,Si.prototype.has=Av,Si.prototype.set=Cv;function an(e){var t=-1,s=e==null?0:e.length;for(this.__data__=new Si;++t<s;)this.add(e[t])}function Tv(e){return this.__data__.set(e,$),this}function Dv(e){return this.__data__.has(e)}an.prototype.add=an.prototype.push=Tv,an.prototype.has=Dv;function ni(e){var t=this.__data__=new Pi(e);this.size=t.size}function Nv(){this.__data__=new Pi,this.size=0}function Lv(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s}function Fv(e){return this.__data__.get(e)}function jv(e){return this.__data__.has(e)}function Mv(e,t){var s=this.__data__;if(s instanceof Pi){var u=s.__data__;if(!rs||u.length<a-1)return u.push([e,t]),this.size=++s.size,this;s=this.__data__=new Si(u)}return s.set(e,t),this.size=s.size,this}ni.prototype.clear=Nv,ni.prototype.delete=Lv,ni.prototype.get=Fv,ni.prototype.has=jv,ni.prototype.set=Mv;function Kh(e,t){var s=qe(e),u=!s&&fn(e),f=!s&&!u&&Zi(e),w=!s&&!u&&!f&&jn(e),P=s||u||f||w,S=P?Ba(e.length,Gy):[],N=S.length;for(var ee in e)(t||ft.call(e,ee))&&!(P&&(ee=="length"||f&&(ee=="offset"||ee=="parent")||w&&(ee=="buffer"||ee=="byteLength"||ee=="byteOffset")||Ci(ee,N)))&&S.push(ee);return S}function Vh(e){var t=e.length;return t?e[sc(0,t-1)]:n}function zv(e,t){return bo(Ar(e),cn(t,0,e.length))}function Uv(e){return bo(Ar(e))}function Ja(e,t,s){(s!==n&&!si(e[t],s)||s===n&&!(t in e))&&Oi(e,t,s)}function os(e,t,s){var u=e[t];(!(ft.call(e,t)&&si(u,s))||s===n&&!(t in e))&&Oi(e,t,s)}function ao(e,t){for(var s=e.length;s--;)if(si(e[s][0],t))return s;return-1}function $v(e,t,s,u){return ki(e,function(f,w,P){t(u,f,s(f),P)}),u}function kh(e,t){return e&&yi(t,ur(t),e)}function qv(e,t){return e&&yi(t,Tr(t),e)}function Oi(e,t,s){t=="__proto__"&&to?to(e,t,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[t]=s}function Za(e,t){for(var s=-1,u=t.length,f=z(u),w=e==null;++s<u;)f[s]=w?n:Cc(e,t[s]);return f}function cn(e,t,s){return e===e&&(s!==n&&(e=e<=s?e:s),t!==n&&(e=e>=t?e:t)),e}function Jr(e,t,s,u,f,w){var P,S=t&Y,N=t&se,ee=t&Se;if(s&&(P=f?s(e,u,f,w):s(e)),P!==n)return P;if(!Ct(e))return e;var te=qe(e);if(te){if(P=Am(e),!S)return Ar(e,P)}else{var oe=_r(e),ye=oe==Us||oe==Wu;if(Zi(e))return yl(e,S);if(oe==Ii||oe==En||ye&&!f){if(P=N||ye?{}:Fl(e),!S)return N?mm(e,qv(P,e)):vm(e,kh(P,e))}else{if(!bt[oe])return f?e:{};P=Cm(e,oe,S)}}w||(w=new ni);var Oe=w.get(e);if(Oe)return Oe;w.set(e,P),lf(e)?e.forEach(function(Fe){P.add(Jr(Fe,t,s,Fe,e,w))}):uf(e)&&e.forEach(function(Fe,We){P.set(We,Jr(Fe,t,s,We,e,w))});var Le=ee?N?yc:gc:N?Tr:ur,Ke=te?n:Le(e);return kr(Ke||e,function(Fe,We){Ke&&(We=Fe,Fe=e[We]),os(P,We,Jr(Fe,t,s,We,e,w))}),P}function Bv(e){var t=ur(e);return function(s){return Gh(s,e,t)}}function Gh(e,t,s){var u=s.length;if(e==null)return!u;for(e=vt(e);u--;){var f=s[u],w=t[f],P=e[f];if(P===n&&!(f in e)||!w(P))return!1}return!0}function Wh(e,t,s){if(typeof e!="function")throw new Gr(b);return ds(function(){e.apply(n,s)},t)}function as(e,t,s,u){var f=-1,w=Ks,P=!0,S=e.length,N=[],ee=t.length;if(!S)return N;s&&(t=Rt(t,jr(s))),u?(w=ja,P=!1):t.length>=a&&(w=es,P=!1,t=new an(t));e:for(;++f<S;){var te=e[f],oe=s==null?te:s(te);if(te=u||te!==0?te:0,P&&oe===oe){for(var ye=ee;ye--;)if(t[ye]===oe)continue e;N.push(te)}else w(t,oe,u)||N.push(te)}return N}var ki=bl(gi),Jh=bl(Ya,!0);function Hv(e,t){var s=!0;return ki(e,function(u,f,w){return s=!!t(u,f,w),s}),s}function co(e,t,s){for(var u=-1,f=e.length;++u<f;){var w=e[u],P=t(w);if(P!=null&&(S===n?P===P&&!zr(P):s(P,S)))var S=P,N=w}return N}function Kv(e,t,s,u){var f=e.length;for(s=Be(s),s<0&&(s=-s>f?0:f+s),u=u===n||u>f?f:Be(u),u<0&&(u+=f),u=s>u?0:df(u);s<u;)e[s++]=t;return e}function Zh(e,t){var s=[];return ki(e,function(u,f,w){t(u,f,w)&&s.push(u)}),s}function gr(e,t,s,u,f){var w=-1,P=e.length;for(s||(s=Dm),f||(f=[]);++w<P;){var S=e[w];t>0&&s(S)?t>1?gr(S,t-1,s,u,f):Hi(f,S):u||(f[f.length]=S)}return f}var Qa=El(),Qh=El(!0);function gi(e,t){return e&&Qa(e,t,ur)}function Ya(e,t){return e&&Qh(e,t,ur)}function uo(e,t){return Bi(t,function(s){return Ti(e[s])})}function un(e,t){t=Wi(t,e);for(var s=0,u=t.length;e!=null&&s<u;)e=e[vi(t[s++])];return s&&s==u?e:n}function Yh(e,t,s){var u=t(e);return qe(e)?u:Hi(u,s(e))}function xr(e){return e==null?e===n?_0:v0:sn&&sn in vt(e)?Sm(e):Um(e)}function Xa(e,t){return e>t}function Vv(e,t){return e!=null&&ft.call(e,t)}function kv(e,t){return e!=null&&t in vt(e)}function Gv(e,t,s){return e>=mr(t,s)&&e<ar(t,s)}function ec(e,t,s){for(var u=s?ja:Ks,f=e[0].length,w=e.length,P=w,S=z(w),N=1/0,ee=[];P--;){var te=e[P];P&&t&&(te=Rt(te,jr(t))),N=mr(te.length,N),S[P]=!s&&(t||f>=120&&te.length>=120)?new an(P&&te):n}te=e[0];var oe=-1,ye=S[0];e:for(;++oe<f&&ee.length<N;){var Oe=te[oe],Le=t?t(Oe):Oe;if(Oe=s||Oe!==0?Oe:0,!(ye?es(ye,Le):u(ee,Le,s))){for(P=w;--P;){var Ke=S[P];if(!(Ke?es(Ke,Le):u(e[P],Le,s)))continue e}ye&&ye.push(Le),ee.push(Oe)}}return ee}function Wv(e,t,s,u){return gi(e,function(f,w,P){t(u,s(f),w,P)}),u}function cs(e,t,s){t=Wi(t,e),e=Ul(e,t);var u=e==null?e:e[vi(Qr(t))];return u==null?n:Fr(u,e,s)}function Xh(e){return jt(e)&&xr(e)==En}function Jv(e){return jt(e)&&xr(e)==Xn}function Zv(e){return jt(e)&&xr(e)==Wn}function us(e,t,s,u,f){return e===t?!0:e==null||t==null||!jt(e)&&!jt(t)?e!==e&&t!==t:Qv(e,t,s,u,us,f)}function Qv(e,t,s,u,f,w){var P=qe(e),S=qe(t),N=P?Ms:_r(e),ee=S?Ms:_r(t);N=N==En?Ii:N,ee=ee==En?Ii:ee;var te=N==Ii,oe=ee==Ii,ye=N==ee;if(ye&&Zi(e)){if(!Zi(t))return!1;P=!0,te=!1}if(ye&&!te)return w||(w=new ni),P||jn(e)?Dl(e,t,s,u,f,w):Im(e,t,N,s,u,f,w);if(!(s&pe)){var Oe=te&&ft.call(e,"__wrapped__"),Le=oe&&ft.call(t,"__wrapped__");if(Oe||Le){var Ke=Oe?e.value():e,Fe=Le?t.value():t;return w||(w=new ni),f(Ke,Fe,s,u,w)}}return ye?(w||(w=new ni),Pm(e,t,s,u,f,w)):!1}function Yv(e){return jt(e)&&_r(e)==ti}function tc(e,t,s,u){var f=s.length,w=f,P=!u;if(e==null)return!w;for(e=vt(e);f--;){var S=s[f];if(P&&S[2]?S[1]!==e[S[0]]:!(S[0]in e))return!1}for(;++f<w;){S=s[f];var N=S[0],ee=e[N],te=S[1];if(P&&S[2]){if(ee===n&&!(N in e))return!1}else{var oe=new ni;if(u)var ye=u(ee,te,N,e,t,oe);if(!(ye===n?us(te,ee,pe|Ge,u,oe):ye))return!1}}return!0}function el(e){if(!Ct(e)||Lm(e))return!1;var t=Ti(e)?Yy:B0;return t.test(ln(e))}function Xv(e){return jt(e)&&xr(e)==Zn}function em(e){return jt(e)&&_r(e)==ri}function tm(e){return jt(e)&&Oo(e.length)&&!!It[xr(e)]}function tl(e){return typeof e=="function"?e:e==null?Dr:typeof e=="object"?qe(e)?nl(e[0],e[1]):il(e):If(e)}function rc(e){if(!fs(e))return nv(e);var t=[];for(var s in vt(e))ft.call(e,s)&&s!="constructor"&&t.push(s);return t}function rm(e){if(!Ct(e))return zm(e);var t=fs(e),s=[];for(var u in e)u=="constructor"&&(t||!ft.call(e,u))||s.push(u);return s}function ic(e,t){return e<t}function rl(e,t){var s=-1,u=Cr(e)?z(e.length):[];return ki(e,function(f,w,P){u[++s]=t(f,w,P)}),u}function il(e){var t=mc(e);return t.length==1&&t[0][2]?Ml(t[0][0],t[0][1]):function(s){return s===e||tc(s,e,t)}}function nl(e,t){return wc(e)&&jl(t)?Ml(vi(e),t):function(s){var u=Cc(s,e);return u===n&&u===t?Tc(s,e):us(t,u,pe|Ge)}}function ho(e,t,s,u,f){e!==t&&Qa(t,function(w,P){if(f||(f=new ni),Ct(w))im(e,t,P,s,ho,u,f);else{var S=u?u(Ec(e,P),w,P+"",e,t,f):n;S===n&&(S=w),Ja(e,P,S)}},Tr)}function im(e,t,s,u,f,w,P){var S=Ec(e,s),N=Ec(t,s),ee=P.get(N);if(ee){Ja(e,s,ee);return}var te=w?w(S,N,s+"",e,t,P):n,oe=te===n;if(oe){var ye=qe(N),Oe=!ye&&Zi(N),Le=!ye&&!Oe&&jn(N);te=N,ye||Oe||Le?qe(S)?te=S:Ht(S)?te=Ar(S):Oe?(oe=!1,te=yl(N,!0)):Le?(oe=!1,te=vl(N,!0)):te=[]:ps(N)||fn(N)?(te=S,fn(S)?te=pf(S):(!Ct(S)||Ti(S))&&(te=Fl(N))):oe=!1}oe&&(P.set(N,te),f(te,N,u,w,P),P.delete(N)),Ja(e,s,te)}function sl(e,t){var s=e.length;if(s)return t+=t<0?s:0,Ci(t,s)?e[t]:n}function ol(e,t,s){t.length?t=Rt(t,function(w){return qe(w)?function(P){return un(P,w.length===1?w[0]:w)}:w}):t=[Dr];var u=-1;t=Rt(t,jr(Ne()));var f=rl(e,function(w,P,S){var N=Rt(t,function(ee){return ee(w)});return{criteria:N,index:++u,value:w}});return Cy(f,function(w,P){return ym(w,P,s)})}function nm(e,t){return al(e,t,function(s,u){return Tc(e,u)})}function al(e,t,s){for(var u=-1,f=t.length,w={};++u<f;){var P=t[u],S=un(e,P);s(S,P)&&hs(w,Wi(P,e),S)}return w}function sm(e){return function(t){return un(t,e)}}function nc(e,t,s,u){var f=u?Ay:Pn,w=-1,P=t.length,S=e;for(e===t&&(t=Ar(t)),s&&(S=Rt(e,jr(s)));++w<P;)for(var N=0,ee=t[w],te=s?s(ee):ee;(N=f(S,te,N,u))>-1;)S!==e&&eo.call(S,N,1),eo.call(e,N,1);return e}function cl(e,t){for(var s=e?t.length:0,u=s-1;s--;){var f=t[s];if(s==u||f!==w){var w=f;Ci(f)?eo.call(e,f,1):cc(e,f)}}return e}function sc(e,t){return e+io(Bh()*(t-e+1))}function om(e,t,s,u){for(var f=-1,w=ar(ro((t-e)/(s||1)),0),P=z(w);w--;)P[u?w:++f]=e,e+=s;return P}function oc(e,t){var s="";if(!e||t<1||t>qi)return s;do t%2&&(s+=e),t=io(t/2),t&&(e+=e);while(t);return s}function Ve(e,t){return xc(zl(e,t,Dr),e+"")}function am(e){return Vh(Mn(e))}function cm(e,t){var s=Mn(e);return bo(s,cn(t,0,s.length))}function hs(e,t,s,u){if(!Ct(e))return e;t=Wi(t,e);for(var f=-1,w=t.length,P=w-1,S=e;S!=null&&++f<w;){var N=vi(t[f]),ee=s;if(N==="__proto__"||N==="constructor"||N==="prototype")return e;if(f!=P){var te=S[N];ee=u?u(te,N,S):n,ee===n&&(ee=Ct(te)?te:Ci(t[f+1])?[]:{})}os(S,N,ee),S=S[N]}return e}var ul=no?function(e,t){return no.set(e,t),e}:Dr,um=to?function(e,t){return to(e,"toString",{configurable:!0,enumerable:!1,value:Nc(t),writable:!0})}:Dr;function hm(e){return bo(Mn(e))}function Zr(e,t,s){var u=-1,f=e.length;t<0&&(t=-t>f?0:f+t),s=s>f?f:s,s<0&&(s+=f),f=t>s?0:s-t>>>0,t>>>=0;for(var w=z(f);++u<f;)w[u]=e[u+t];return w}function lm(e,t){var s;return ki(e,function(u,f,w){return s=t(u,f,w),!s}),!!s}function lo(e,t,s){var u=0,f=e==null?u:e.length;if(typeof t=="number"&&t===t&&f<=d0){for(;u<f;){var w=u+f>>>1,P=e[w];P!==null&&!zr(P)&&(s?P<=t:P<t)?u=w+1:f=w}return f}return ac(e,t,Dr,s)}function ac(e,t,s,u){var f=0,w=e==null?0:e.length;if(w===0)return 0;t=s(t);for(var P=t!==t,S=t===null,N=zr(t),ee=t===n;f<w;){var te=io((f+w)/2),oe=s(e[te]),ye=oe!==n,Oe=oe===null,Le=oe===oe,Ke=zr(oe);if(P)var Fe=u||Le;else ee?Fe=Le&&(u||ye):S?Fe=Le&&ye&&(u||!Oe):N?Fe=Le&&ye&&!Oe&&(u||!Ke):Oe||Ke?Fe=!1:Fe=u?oe<=t:oe<t;Fe?f=te+1:w=te}return mr(w,f0)}function hl(e,t){for(var s=-1,u=e.length,f=0,w=[];++s<u;){var P=e[s],S=t?t(P):P;if(!s||!si(S,N)){var N=S;w[f++]=P===0?0:P}}return w}function ll(e){return typeof e=="number"?e:zr(e)?js:+e}function Mr(e){if(typeof e=="string")return e;if(qe(e))return Rt(e,Mr)+"";if(zr(e))return Hh?Hh.call(e):"";var t=e+"";return t=="0"&&1/e==-rn?"-0":t}function Gi(e,t,s){var u=-1,f=Ks,w=e.length,P=!0,S=[],N=S;if(s)P=!1,f=ja;else if(w>=a){var ee=t?null:Em(e);if(ee)return ks(ee);P=!1,f=es,N=new an}else N=t?[]:S;e:for(;++u<w;){var te=e[u],oe=t?t(te):te;if(te=s||te!==0?te:0,P&&oe===oe){for(var ye=N.length;ye--;)if(N[ye]===oe)continue e;t&&N.push(oe),S.push(te)}else f(N,oe,s)||(N!==S&&N.push(oe),S.push(te))}return S}function cc(e,t){return t=Wi(t,e),e=Ul(e,t),e==null||delete e[vi(Qr(t))]}function fl(e,t,s,u){return hs(e,t,s(un(e,t)),u)}function fo(e,t,s,u){for(var f=e.length,w=u?f:-1;(u?w--:++w<f)&&t(e[w],w,e););return s?Zr(e,u?0:w,u?w+1:f):Zr(e,u?w+1:0,u?f:w)}function dl(e,t){var s=e;return s instanceof Ze&&(s=s.value()),Ma(t,function(u,f){return f.func.apply(f.thisArg,Hi([u],f.args))},s)}function uc(e,t,s){var u=e.length;if(u<2)return u?Gi(e[0]):[];for(var f=-1,w=z(u);++f<u;)for(var P=e[f],S=-1;++S<u;)S!=f&&(w[f]=as(w[f]||P,e[S],t,s));return Gi(gr(w,1),t,s)}function pl(e,t,s){for(var u=-1,f=e.length,w=t.length,P={};++u<f;){var S=u<w?t[u]:n;s(P,e[u],S)}return P}function hc(e){return Ht(e)?e:[]}function lc(e){return typeof e=="function"?e:Dr}function Wi(e,t){return qe(e)?e:wc(e,t)?[e]:Hl(ut(e))}var fm=Ve;function Ji(e,t,s){var u=e.length;return s=s===n?u:s,!t&&s>=u?e:Zr(e,t,s)}var gl=Xy||function(e){return pr.clearTimeout(e)};function yl(e,t){if(t)return e.slice();var s=e.length,u=Mh?Mh(s):new e.constructor(s);return e.copy(u),u}function fc(e){var t=new e.constructor(e.byteLength);return new Ys(t).set(new Ys(e)),t}function dm(e,t){var s=t?fc(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}function pm(e){var t=new e.constructor(e.source,Xu.exec(e));return t.lastIndex=e.lastIndex,t}function gm(e){return ss?vt(ss.call(e)):{}}function vl(e,t){var s=t?fc(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}function ml(e,t){if(e!==t){var s=e!==n,u=e===null,f=e===e,w=zr(e),P=t!==n,S=t===null,N=t===t,ee=zr(t);if(!S&&!ee&&!w&&e>t||w&&P&&N&&!S&&!ee||u&&P&&N||!s&&N||!f)return 1;if(!u&&!w&&!ee&&e<t||ee&&s&&f&&!u&&!w||S&&s&&f||!P&&f||!N)return-1}return 0}function ym(e,t,s){for(var u=-1,f=e.criteria,w=t.criteria,P=f.length,S=s.length;++u<P;){var N=ml(f[u],w[u]);if(N){if(u>=S)return N;var ee=s[u];return N*(ee=="desc"?-1:1)}}return e.index-t.index}function _l(e,t,s,u){for(var f=-1,w=e.length,P=s.length,S=-1,N=t.length,ee=ar(w-P,0),te=z(N+ee),oe=!u;++S<N;)te[S]=t[S];for(;++f<P;)(oe||f<w)&&(te[s[f]]=e[f]);for(;ee--;)te[S++]=e[f++];return te}function wl(e,t,s,u){for(var f=-1,w=e.length,P=-1,S=s.length,N=-1,ee=t.length,te=ar(w-S,0),oe=z(te+ee),ye=!u;++f<te;)oe[f]=e[f];for(var Oe=f;++N<ee;)oe[Oe+N]=t[N];for(;++P<S;)(ye||f<w)&&(oe[Oe+s[P]]=e[f++]);return oe}function Ar(e,t){var s=-1,u=e.length;for(t||(t=z(u));++s<u;)t[s]=e[s];return t}function yi(e,t,s,u){var f=!s;s||(s={});for(var w=-1,P=t.length;++w<P;){var S=t[w],N=u?u(s[S],e[S],S,s,e):n;N===n&&(N=e[S]),f?Oi(s,S,N):os(s,S,N)}return s}function vm(e,t){return yi(e,_c(e),t)}function mm(e,t){return yi(e,Nl(e),t)}function po(e,t){return function(s,u){var f=qe(s)?xy:$v,w=t?t():{};return f(s,e,Ne(u,2),w)}}function Nn(e){return Ve(function(t,s){var u=-1,f=s.length,w=f>1?s[f-1]:n,P=f>2?s[2]:n;for(w=e.length>3&&typeof w=="function"?(f--,w):n,P&&Ir(s[0],s[1],P)&&(w=f<3?n:w,f=1),t=vt(t);++u<f;){var S=s[u];S&&e(t,S,u,w)}return t})}function bl(e,t){return function(s,u){if(s==null)return s;if(!Cr(s))return e(s,u);for(var f=s.length,w=t?f:-1,P=vt(s);(t?w--:++w<f)&&u(P[w],w,P)!==!1;);return s}}function El(e){return function(t,s,u){for(var f=-1,w=vt(t),P=u(t),S=P.length;S--;){var N=P[e?S:++f];if(s(w[N],N,w)===!1)break}return t}}function _m(e,t,s){var u=t&lt,f=ls(e);function w(){var P=this&&this!==pr&&this instanceof w?f:e;return P.apply(u?s:this,arguments)}return w}function xl(e){return function(t){t=ut(t);var s=Sn(t)?ii(t):n,u=s?s[0]:t.charAt(0),f=s?Ji(s,1).join(""):t.slice(1);return u[e]()+f}}function Ln(e){return function(t){return Ma(Ef(bf(t).replace(uy,"")),e,"")}}function ls(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var s=Dn(e.prototype),u=e.apply(s,t);return Ct(u)?u:s}}function wm(e,t,s){var u=ls(e);function f(){for(var w=arguments.length,P=z(w),S=w,N=Fn(f);S--;)P[S]=arguments[S];var ee=w<3&&P[0]!==N&&P[w-1]!==N?[]:Ki(P,N);if(w-=ee.length,w<s)return Rl(e,t,go,f.placeholder,n,P,ee,n,n,s-w);var te=this&&this!==pr&&this instanceof f?u:e;return Fr(te,this,P)}return f}function Il(e){return function(t,s,u){var f=vt(t);if(!Cr(t)){var w=Ne(s,3);t=ur(t),s=function(S){return w(f[S],S,f)}}var P=e(t,s,u);return P>-1?f[w?t[P]:P]:n}}function Pl(e){return Ai(function(t){var s=t.length,u=s,f=Wr.prototype.thru;for(e&&t.reverse();u--;){var w=t[u];if(typeof w!="function")throw new Gr(b);if(f&&!P&&_o(w)=="wrapper")var P=new Wr([],!0)}for(u=P?u:s;++u<s;){w=t[u];var S=_o(w),N=S=="wrapper"?vc(w):n;N&&bc(N[0])&&N[1]==(Bt|nt|Ot|Er)&&!N[4].length&&N[9]==1?P=P[_o(N[0])].apply(P,N[3]):P=w.length==1&&bc(w)?P[S]():P.thru(w)}return function(){var ee=arguments,te=ee[0];if(P&&ee.length==1&&qe(te))return P.plant(te).value();for(var oe=0,ye=s?t[oe].apply(this,ee):te;++oe<s;)ye=t[oe].call(this,ye);return ye}})}function go(e,t,s,u,f,w,P,S,N,ee){var te=t&Bt,oe=t&lt,ye=t&rt,Oe=t&(nt|st),Le=t&$i,Ke=ye?n:ls(e);function Fe(){for(var We=arguments.length,et=z(We),Ur=We;Ur--;)et[Ur]=arguments[Ur];if(Oe)var Pr=Fn(Fe),$r=Dy(et,Pr);if(u&&(et=_l(et,u,f,Oe)),w&&(et=wl(et,w,P,Oe)),We-=$r,Oe&&We<ee){var Kt=Ki(et,Pr);return Rl(e,t,go,Fe.placeholder,s,et,Kt,S,N,ee-We)}var oi=oe?s:this,Ni=ye?oi[e]:e;return We=et.length,S?et=$m(et,S):Le&&We>1&&et.reverse(),te&&N<We&&(et.length=N),this&&this!==pr&&this instanceof Fe&&(Ni=Ke||ls(Ni)),Ni.apply(oi,et)}return Fe}function Sl(e,t){return function(s,u){return Wv(s,e,t(u),{})}}function yo(e,t){return function(s,u){var f;if(s===n&&u===n)return t;if(s!==n&&(f=s),u!==n){if(f===n)return u;typeof s=="string"||typeof u=="string"?(s=Mr(s),u=Mr(u)):(s=ll(s),u=ll(u)),f=e(s,u)}return f}}function dc(e){return Ai(function(t){return t=Rt(t,jr(Ne())),Ve(function(s){var u=this;return e(t,function(f){return Fr(f,u,s)})})})}function vo(e,t){t=t===n?" ":Mr(t);var s=t.length;if(s<2)return s?oc(t,e):t;var u=oc(t,ro(e/On(t)));return Sn(t)?Ji(ii(u),0,e).join(""):u.slice(0,e)}function bm(e,t,s,u){var f=t&lt,w=ls(e);function P(){for(var S=-1,N=arguments.length,ee=-1,te=u.length,oe=z(te+N),ye=this&&this!==pr&&this instanceof P?w:e;++ee<te;)oe[ee]=u[ee];for(;N--;)oe[ee++]=arguments[++S];return Fr(ye,f?s:this,oe)}return P}function Ol(e){return function(t,s,u){return u&&typeof u!="number"&&Ir(t,s,u)&&(s=u=n),t=Di(t),s===n?(s=t,t=0):s=Di(s),u=u===n?t<s?1:-1:Di(u),om(t,s,u,e)}}function mo(e){return function(t,s){return typeof t=="string"&&typeof s=="string"||(t=Yr(t),s=Yr(s)),e(t,s)}}function Rl(e,t,s,u,f,w,P,S,N,ee){var te=t&nt,oe=te?P:n,ye=te?n:P,Oe=te?w:n,Le=te?n:w;t|=te?Ot:br,t&=~(te?br:Ot),t&sr||(t&=~(lt|rt));var Ke=[e,t,f,Oe,oe,Le,ye,S,N,ee],Fe=s.apply(n,Ke);return bc(e)&&$l(Fe,Ke),Fe.placeholder=u,ql(Fe,e,t)}function pc(e){var t=or[e];return function(s,u){if(s=Yr(s),u=u==null?0:mr(Be(u),292),u&&qh(s)){var f=(ut(s)+"e").split("e"),w=t(f[0]+"e"+(+f[1]+u));return f=(ut(w)+"e").split("e"),+(f[0]+"e"+(+f[1]-u))}return t(s)}}var Em=Cn&&1/ks(new Cn([,-0]))[1]==rn?function(e){return new Cn(e)}:jc;function Al(e){return function(t){var s=_r(t);return s==ti?Ka(t):s==ri?Uy(t):Ty(t,e(t))}}function Ri(e,t,s,u,f,w,P,S){var N=t&rt;if(!N&&typeof e!="function")throw new Gr(b);var ee=u?u.length:0;if(ee||(t&=~(Ot|br),u=f=n),P=P===n?P:ar(Be(P),0),S=S===n?S:Be(S),ee-=f?f.length:0,t&br){var te=u,oe=f;u=f=n}var ye=N?n:vc(e),Oe=[e,t,s,u,f,te,oe,w,P,S];if(ye&&Mm(Oe,ye),e=Oe[0],t=Oe[1],s=Oe[2],u=Oe[3],f=Oe[4],S=Oe[9]=Oe[9]===n?N?0:e.length:ar(Oe[9]-ee,0),!S&&t&(nt|st)&&(t&=~(nt|st)),!t||t==lt)var Le=_m(e,t,s);else t==nt||t==st?Le=wm(e,t,S):(t==Ot||t==(lt|Ot))&&!f.length?Le=bm(e,t,s,u):Le=go.apply(n,Oe);var Ke=ye?ul:$l;return ql(Ke(Le,Oe),e,t)}function Cl(e,t,s,u){return e===n||si(e,An[s])&&!ft.call(u,s)?t:e}function Tl(e,t,s,u,f,w){return Ct(e)&&Ct(t)&&(w.set(t,e),ho(e,t,n,Tl,w),w.delete(t)),e}function xm(e){return ps(e)?n:e}function Dl(e,t,s,u,f,w){var P=s&pe,S=e.length,N=t.length;if(S!=N&&!(P&&N>S))return!1;var ee=w.get(e),te=w.get(t);if(ee&&te)return ee==t&&te==e;var oe=-1,ye=!0,Oe=s&Ge?new an:n;for(w.set(e,t),w.set(t,e);++oe<S;){var Le=e[oe],Ke=t[oe];if(u)var Fe=P?u(Ke,Le,oe,t,e,w):u(Le,Ke,oe,e,t,w);if(Fe!==n){if(Fe)continue;ye=!1;break}if(Oe){if(!za(t,function(We,et){if(!es(Oe,et)&&(Le===We||f(Le,We,s,u,w)))return Oe.push(et)})){ye=!1;break}}else if(!(Le===Ke||f(Le,Ke,s,u,w))){ye=!1;break}}return w.delete(e),w.delete(t),ye}function Im(e,t,s,u,f,w,P){switch(s){case xn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Xn:return!(e.byteLength!=t.byteLength||!w(new Ys(e),new Ys(t)));case Gn:case Wn:case Jn:return si(+e,+t);case zs:return e.name==t.name&&e.message==t.message;case Zn:case Qn:return e==t+"";case ti:var S=Ka;case ri:var N=u&pe;if(S||(S=ks),e.size!=t.size&&!N)return!1;var ee=P.get(e);if(ee)return ee==t;u|=Ge,P.set(e,t);var te=Dl(S(e),S(t),u,f,w,P);return P.delete(e),te;case $s:if(ss)return ss.call(e)==ss.call(t)}return!1}function Pm(e,t,s,u,f,w){var P=s&pe,S=gc(e),N=S.length,ee=gc(t),te=ee.length;if(N!=te&&!P)return!1;for(var oe=N;oe--;){var ye=S[oe];if(!(P?ye in t:ft.call(t,ye)))return!1}var Oe=w.get(e),Le=w.get(t);if(Oe&&Le)return Oe==t&&Le==e;var Ke=!0;w.set(e,t),w.set(t,e);for(var Fe=P;++oe<N;){ye=S[oe];var We=e[ye],et=t[ye];if(u)var Ur=P?u(et,We,ye,t,e,w):u(We,et,ye,e,t,w);if(!(Ur===n?We===et||f(We,et,s,u,w):Ur)){Ke=!1;break}Fe||(Fe=ye=="constructor")}if(Ke&&!Fe){var Pr=e.constructor,$r=t.constructor;Pr!=$r&&"constructor"in e&&"constructor"in t&&!(typeof Pr=="function"&&Pr instanceof Pr&&typeof $r=="function"&&$r instanceof $r)&&(Ke=!1)}return w.delete(e),w.delete(t),Ke}function Ai(e){return xc(zl(e,n,Gl),e+"")}function gc(e){return Yh(e,ur,_c)}function yc(e){return Yh(e,Tr,Nl)}var vc=no?function(e){return no.get(e)}:jc;function _o(e){for(var t=e.name+"",s=Tn[t],u=ft.call(Tn,t)?s.length:0;u--;){var f=s[u],w=f.func;if(w==null||w==e)return f.name}return t}function Fn(e){var t=ft.call(v,"placeholder")?v:e;return t.placeholder}function Ne(){var e=v.iteratee||Lc;return e=e===Lc?tl:e,arguments.length?e(arguments[0],arguments[1]):e}function wo(e,t){var s=e.__data__;return Nm(t)?s[typeof t=="string"?"string":"hash"]:s.map}function mc(e){for(var t=ur(e),s=t.length;s--;){var u=t[s],f=e[u];t[s]=[u,f,jl(f)]}return t}function hn(e,t){var s=jy(e,t);return el(s)?s:n}function Sm(e){var t=ft.call(e,sn),s=e[sn];try{e[sn]=n;var u=!0}catch{}var f=Zs.call(e);return u&&(t?e[sn]=s:delete e[sn]),f}var _c=ka?function(e){return e==null?[]:(e=vt(e),Bi(ka(e),function(t){return Uh.call(e,t)}))}:Mc,Nl=ka?function(e){for(var t=[];e;)Hi(t,_c(e)),e=Xs(e);return t}:Mc,_r=xr;(Ga&&_r(new Ga(new ArrayBuffer(1)))!=xn||rs&&_r(new rs)!=ti||Wa&&_r(Wa.resolve())!=Ju||Cn&&_r(new Cn)!=ri||is&&_r(new is)!=Yn)&&(_r=function(e){var t=xr(e),s=t==Ii?e.constructor:n,u=s?ln(s):"";if(u)switch(u){case cv:return xn;case uv:return ti;case hv:return Ju;case lv:return ri;case fv:return Yn}return t});function Om(e,t,s){for(var u=-1,f=s.length;++u<f;){var w=s[u],P=w.size;switch(w.type){case"drop":e+=P;break;case"dropRight":t-=P;break;case"take":t=mr(t,e+P);break;case"takeRight":e=ar(e,t-P);break}}return{start:e,end:t}}function Rm(e){var t=e.match(L0);return t?t[1].split(F0):[]}function Ll(e,t,s){t=Wi(t,e);for(var u=-1,f=t.length,w=!1;++u<f;){var P=vi(t[u]);if(!(w=e!=null&&s(e,P)))break;e=e[P]}return w||++u!=f?w:(f=e==null?0:e.length,!!f&&Oo(f)&&Ci(P,f)&&(qe(e)||fn(e)))}function Am(e){var t=e.length,s=new e.constructor(t);return t&&typeof e[0]=="string"&&ft.call(e,"index")&&(s.index=e.index,s.input=e.input),s}function Fl(e){return typeof e.constructor=="function"&&!fs(e)?Dn(Xs(e)):{}}function Cm(e,t,s){var u=e.constructor;switch(t){case Xn:return fc(e);case Gn:case Wn:return new u(+e);case xn:return dm(e,s);case ma:case _a:case wa:case ba:case Ea:case xa:case Ia:case Pa:case Sa:return vl(e,s);case ti:return new u;case Jn:case Qn:return new u(e);case Zn:return pm(e);case ri:return new u;case $s:return gm(e)}}function Tm(e,t){var s=t.length;if(!s)return e;var u=s-1;return t[u]=(s>1?"& ":"")+t[u],t=t.join(s>2?", ":" "),e.replace(N0,`{
/* [wrapped with `+t+`] */
`)}function Dm(e){return qe(e)||fn(e)||!!($h&&e&&e[$h])}function Ci(e,t){var s=typeof e;return t=t??qi,!!t&&(s=="number"||s!="symbol"&&K0.test(e))&&e>-1&&e%1==0&&e<t}function Ir(e,t,s){if(!Ct(s))return!1;var u=typeof t;return(u=="number"?Cr(s)&&Ci(t,s.length):u=="string"&&t in s)?si(s[t],e):!1}function wc(e,t){if(qe(e))return!1;var s=typeof e;return s=="number"||s=="symbol"||s=="boolean"||e==null||zr(e)?!0:A0.test(e)||!R0.test(e)||t!=null&&e in vt(t)}function Nm(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function bc(e){var t=_o(e),s=v[t];if(typeof s!="function"||!(t in Ze.prototype))return!1;if(e===s)return!0;var u=vc(s);return!!u&&e===u[0]}function Lm(e){return!!jh&&jh in e}var Fm=Ws?Ti:zc;function fs(e){var t=e&&e.constructor,s=typeof t=="function"&&t.prototype||An;return e===s}function jl(e){return e===e&&!Ct(e)}function Ml(e,t){return function(s){return s==null?!1:s[e]===t&&(t!==n||e in vt(s))}}function jm(e){var t=Po(e,function(u){return s.size===R&&s.clear(),u}),s=t.cache;return t}function Mm(e,t){var s=e[1],u=t[1],f=s|u,w=f<(lt|rt|Bt),P=u==Bt&&s==nt||u==Bt&&s==Er&&e[7].length<=t[8]||u==(Bt|Er)&&t[7].length<=t[8]&&s==nt;if(!(w||P))return e;u&lt&&(e[2]=t[2],f|=s&lt?0:sr);var S=t[3];if(S){var N=e[3];e[3]=N?_l(N,S,t[4]):S,e[4]=N?Ki(e[3],B):t[4]}return S=t[5],S&&(N=e[5],e[5]=N?wl(N,S,t[6]):S,e[6]=N?Ki(e[5],B):t[6]),S=t[7],S&&(e[7]=S),u&Bt&&(e[8]=e[8]==null?t[8]:mr(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=f,e}function zm(e){var t=[];if(e!=null)for(var s in vt(e))t.push(s);return t}function Um(e){return Zs.call(e)}function zl(e,t,s){return t=ar(t===n?e.length-1:t,0),function(){for(var u=arguments,f=-1,w=ar(u.length-t,0),P=z(w);++f<w;)P[f]=u[t+f];f=-1;for(var S=z(t+1);++f<t;)S[f]=u[f];return S[t]=s(P),Fr(e,this,S)}}function Ul(e,t){return t.length<2?e:un(e,Zr(t,0,-1))}function $m(e,t){for(var s=e.length,u=mr(t.length,s),f=Ar(e);u--;){var w=t[u];e[u]=Ci(w,s)?f[w]:n}return e}function Ec(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var $l=Bl(ul),ds=tv||function(e,t){return pr.setTimeout(e,t)},xc=Bl(um);function ql(e,t,s){var u=t+"";return xc(e,Tm(u,qm(Rm(u),s)))}function Bl(e){var t=0,s=0;return function(){var u=sv(),f=c0-(u-s);if(s=u,f>0){if(++t>=a0)return arguments[0]}else t=0;return e.apply(n,arguments)}}function bo(e,t){var s=-1,u=e.length,f=u-1;for(t=t===n?u:t;++s<t;){var w=sc(s,f),P=e[w];e[w]=e[s],e[s]=P}return e.length=t,e}var Hl=jm(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(C0,function(s,u,f,w){t.push(f?w.replace(z0,"$1"):u||s)}),t});function vi(e){if(typeof e=="string"||zr(e))return e;var t=e+"";return t=="0"&&1/e==-rn?"-0":t}function ln(e){if(e!=null){try{return Js.call(e)}catch{}try{return e+""}catch{}}return""}function qm(e,t){return kr(p0,function(s){var u="_."+s[0];t&s[1]&&!Ks(e,u)&&e.push(u)}),e.sort()}function Kl(e){if(e instanceof Ze)return e.clone();var t=new Wr(e.__wrapped__,e.__chain__);return t.__actions__=Ar(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Bm(e,t,s){(s?Ir(e,t,s):t===n)?t=1:t=ar(Be(t),0);var u=e==null?0:e.length;if(!u||t<1)return[];for(var f=0,w=0,P=z(ro(u/t));f<u;)P[w++]=Zr(e,f,f+=t);return P}function Hm(e){for(var t=-1,s=e==null?0:e.length,u=0,f=[];++t<s;){var w=e[t];w&&(f[u++]=w)}return f}function Km(){var e=arguments.length;if(!e)return[];for(var t=z(e-1),s=arguments[0],u=e;u--;)t[u-1]=arguments[u];return Hi(qe(s)?Ar(s):[s],gr(t,1))}var Vm=Ve(function(e,t){return Ht(e)?as(e,gr(t,1,Ht,!0)):[]}),km=Ve(function(e,t){var s=Qr(t);return Ht(s)&&(s=n),Ht(e)?as(e,gr(t,1,Ht,!0),Ne(s,2)):[]}),Gm=Ve(function(e,t){var s=Qr(t);return Ht(s)&&(s=n),Ht(e)?as(e,gr(t,1,Ht,!0),n,s):[]});function Wm(e,t,s){var u=e==null?0:e.length;return u?(t=s||t===n?1:Be(t),Zr(e,t<0?0:t,u)):[]}function Jm(e,t,s){var u=e==null?0:e.length;return u?(t=s||t===n?1:Be(t),t=u-t,Zr(e,0,t<0?0:t)):[]}function Zm(e,t){return e&&e.length?fo(e,Ne(t,3),!0,!0):[]}function Qm(e,t){return e&&e.length?fo(e,Ne(t,3),!0):[]}function Ym(e,t,s,u){var f=e==null?0:e.length;return f?(s&&typeof s!="number"&&Ir(e,t,s)&&(s=0,u=f),Kv(e,t,s,u)):[]}function Vl(e,t,s){var u=e==null?0:e.length;if(!u)return-1;var f=s==null?0:Be(s);return f<0&&(f=ar(u+f,0)),Vs(e,Ne(t,3),f)}function kl(e,t,s){var u=e==null?0:e.length;if(!u)return-1;var f=u-1;return s!==n&&(f=Be(s),f=s<0?ar(u+f,0):mr(f,u-1)),Vs(e,Ne(t,3),f,!0)}function Gl(e){var t=e==null?0:e.length;return t?gr(e,1):[]}function Xm(e){var t=e==null?0:e.length;return t?gr(e,rn):[]}function e_(e,t){var s=e==null?0:e.length;return s?(t=t===n?1:Be(t),gr(e,t)):[]}function t_(e){for(var t=-1,s=e==null?0:e.length,u={};++t<s;){var f=e[t];u[f[0]]=f[1]}return u}function Wl(e){return e&&e.length?e[0]:n}function r_(e,t,s){var u=e==null?0:e.length;if(!u)return-1;var f=s==null?0:Be(s);return f<0&&(f=ar(u+f,0)),Pn(e,t,f)}function i_(e){var t=e==null?0:e.length;return t?Zr(e,0,-1):[]}var n_=Ve(function(e){var t=Rt(e,hc);return t.length&&t[0]===e[0]?ec(t):[]}),s_=Ve(function(e){var t=Qr(e),s=Rt(e,hc);return t===Qr(s)?t=n:s.pop(),s.length&&s[0]===e[0]?ec(s,Ne(t,2)):[]}),o_=Ve(function(e){var t=Qr(e),s=Rt(e,hc);return t=typeof t=="function"?t:n,t&&s.pop(),s.length&&s[0]===e[0]?ec(s,n,t):[]});function a_(e,t){return e==null?"":iv.call(e,t)}function Qr(e){var t=e==null?0:e.length;return t?e[t-1]:n}function c_(e,t,s){var u=e==null?0:e.length;if(!u)return-1;var f=u;return s!==n&&(f=Be(s),f=f<0?ar(u+f,0):mr(f,u-1)),t===t?qy(e,t,f):Vs(e,Rh,f,!0)}function u_(e,t){return e&&e.length?sl(e,Be(t)):n}var h_=Ve(Jl);function Jl(e,t){return e&&e.length&&t&&t.length?nc(e,t):e}function l_(e,t,s){return e&&e.length&&t&&t.length?nc(e,t,Ne(s,2)):e}function f_(e,t,s){return e&&e.length&&t&&t.length?nc(e,t,n,s):e}var d_=Ai(function(e,t){var s=e==null?0:e.length,u=Za(e,t);return cl(e,Rt(t,function(f){return Ci(f,s)?+f:f}).sort(ml)),u});function p_(e,t){var s=[];if(!(e&&e.length))return s;var u=-1,f=[],w=e.length;for(t=Ne(t,3);++u<w;){var P=e[u];t(P,u,e)&&(s.push(P),f.push(u))}return cl(e,f),s}function Ic(e){return e==null?e:av.call(e)}function g_(e,t,s){var u=e==null?0:e.length;return u?(s&&typeof s!="number"&&Ir(e,t,s)?(t=0,s=u):(t=t==null?0:Be(t),s=s===n?u:Be(s)),Zr(e,t,s)):[]}function y_(e,t){return lo(e,t)}function v_(e,t,s){return ac(e,t,Ne(s,2))}function m_(e,t){var s=e==null?0:e.length;if(s){var u=lo(e,t);if(u<s&&si(e[u],t))return u}return-1}function __(e,t){return lo(e,t,!0)}function w_(e,t,s){return ac(e,t,Ne(s,2),!0)}function b_(e,t){var s=e==null?0:e.length;if(s){var u=lo(e,t,!0)-1;if(si(e[u],t))return u}return-1}function E_(e){return e&&e.length?hl(e):[]}function x_(e,t){return e&&e.length?hl(e,Ne(t,2)):[]}function I_(e){var t=e==null?0:e.length;return t?Zr(e,1,t):[]}function P_(e,t,s){return e&&e.length?(t=s||t===n?1:Be(t),Zr(e,0,t<0?0:t)):[]}function S_(e,t,s){var u=e==null?0:e.length;return u?(t=s||t===n?1:Be(t),t=u-t,Zr(e,t<0?0:t,u)):[]}function O_(e,t){return e&&e.length?fo(e,Ne(t,3),!1,!0):[]}function R_(e,t){return e&&e.length?fo(e,Ne(t,3)):[]}var A_=Ve(function(e){return Gi(gr(e,1,Ht,!0))}),C_=Ve(function(e){var t=Qr(e);return Ht(t)&&(t=n),Gi(gr(e,1,Ht,!0),Ne(t,2))}),T_=Ve(function(e){var t=Qr(e);return t=typeof t=="function"?t:n,Gi(gr(e,1,Ht,!0),n,t)});function D_(e){return e&&e.length?Gi(e):[]}function N_(e,t){return e&&e.length?Gi(e,Ne(t,2)):[]}function L_(e,t){return t=typeof t=="function"?t:n,e&&e.length?Gi(e,n,t):[]}function Pc(e){if(!(e&&e.length))return[];var t=0;return e=Bi(e,function(s){if(Ht(s))return t=ar(s.length,t),!0}),Ba(t,function(s){return Rt(e,Ua(s))})}function Zl(e,t){if(!(e&&e.length))return[];var s=Pc(e);return t==null?s:Rt(s,function(u){return Fr(t,n,u)})}var F_=Ve(function(e,t){return Ht(e)?as(e,t):[]}),j_=Ve(function(e){return uc(Bi(e,Ht))}),M_=Ve(function(e){var t=Qr(e);return Ht(t)&&(t=n),uc(Bi(e,Ht),Ne(t,2))}),z_=Ve(function(e){var t=Qr(e);return t=typeof t=="function"?t:n,uc(Bi(e,Ht),n,t)}),U_=Ve(Pc);function $_(e,t){return pl(e||[],t||[],os)}function q_(e,t){return pl(e||[],t||[],hs)}var B_=Ve(function(e){var t=e.length,s=t>1?e[t-1]:n;return s=typeof s=="function"?(e.pop(),s):n,Zl(e,s)});function Ql(e){var t=v(e);return t.__chain__=!0,t}function H_(e,t){return t(e),e}function Eo(e,t){return t(e)}var K_=Ai(function(e){var t=e.length,s=t?e[0]:0,u=this.__wrapped__,f=function(w){return Za(w,e)};return t>1||this.__actions__.length||!(u instanceof Ze)||!Ci(s)?this.thru(f):(u=u.slice(s,+s+(t?1:0)),u.__actions__.push({func:Eo,args:[f],thisArg:n}),new Wr(u,this.__chain__).thru(function(w){return t&&!w.length&&w.push(n),w}))});function V_(){return Ql(this)}function k_(){return new Wr(this.value(),this.__chain__)}function G_(){this.__values__===n&&(this.__values__=ff(this.value()));var e=this.__index__>=this.__values__.length,t=e?n:this.__values__[this.__index__++];return{done:e,value:t}}function W_(){return this}function J_(e){for(var t,s=this;s instanceof oo;){var u=Kl(s);u.__index__=0,u.__values__=n,t?f.__wrapped__=u:t=u;var f=u;s=s.__wrapped__}return f.__wrapped__=e,t}function Z_(){var e=this.__wrapped__;if(e instanceof Ze){var t=e;return this.__actions__.length&&(t=new Ze(this)),t=t.reverse(),t.__actions__.push({func:Eo,args:[Ic],thisArg:n}),new Wr(t,this.__chain__)}return this.thru(Ic)}function Q_(){return dl(this.__wrapped__,this.__actions__)}var Y_=po(function(e,t,s){ft.call(e,s)?++e[s]:Oi(e,s,1)});function X_(e,t,s){var u=qe(e)?Sh:Hv;return s&&Ir(e,t,s)&&(t=n),u(e,Ne(t,3))}function ew(e,t){var s=qe(e)?Bi:Zh;return s(e,Ne(t,3))}var tw=Il(Vl),rw=Il(kl);function iw(e,t){return gr(xo(e,t),1)}function nw(e,t){return gr(xo(e,t),rn)}function sw(e,t,s){return s=s===n?1:Be(s),gr(xo(e,t),s)}function Yl(e,t){var s=qe(e)?kr:ki;return s(e,Ne(t,3))}function Xl(e,t){var s=qe(e)?Iy:Jh;return s(e,Ne(t,3))}var ow=po(function(e,t,s){ft.call(e,s)?e[s].push(t):Oi(e,s,[t])});function aw(e,t,s,u){e=Cr(e)?e:Mn(e),s=s&&!u?Be(s):0;var f=e.length;return s<0&&(s=ar(f+s,0)),Ro(e)?s<=f&&e.indexOf(t,s)>-1:!!f&&Pn(e,t,s)>-1}var cw=Ve(function(e,t,s){var u=-1,f=typeof t=="function",w=Cr(e)?z(e.length):[];return ki(e,function(P){w[++u]=f?Fr(t,P,s):cs(P,t,s)}),w}),uw=po(function(e,t,s){Oi(e,s,t)});function xo(e,t){var s=qe(e)?Rt:rl;return s(e,Ne(t,3))}function hw(e,t,s,u){return e==null?[]:(qe(t)||(t=t==null?[]:[t]),s=u?n:s,qe(s)||(s=s==null?[]:[s]),ol(e,t,s))}var lw=po(function(e,t,s){e[s?0:1].push(t)},function(){return[[],[]]});function fw(e,t,s){var u=qe(e)?Ma:Ch,f=arguments.length<3;return u(e,Ne(t,4),s,f,ki)}function dw(e,t,s){var u=qe(e)?Py:Ch,f=arguments.length<3;return u(e,Ne(t,4),s,f,Jh)}function pw(e,t){var s=qe(e)?Bi:Zh;return s(e,So(Ne(t,3)))}function gw(e){var t=qe(e)?Vh:am;return t(e)}function yw(e,t,s){(s?Ir(e,t,s):t===n)?t=1:t=Be(t);var u=qe(e)?zv:cm;return u(e,t)}function vw(e){var t=qe(e)?Uv:hm;return t(e)}function mw(e){if(e==null)return 0;if(Cr(e))return Ro(e)?On(e):e.length;var t=_r(e);return t==ti||t==ri?e.size:rc(e).length}function _w(e,t,s){var u=qe(e)?za:lm;return s&&Ir(e,t,s)&&(t=n),u(e,Ne(t,3))}var ww=Ve(function(e,t){if(e==null)return[];var s=t.length;return s>1&&Ir(e,t[0],t[1])?t=[]:s>2&&Ir(t[0],t[1],t[2])&&(t=[t[0]]),ol(e,gr(t,1),[])}),Io=ev||function(){return pr.Date.now()};function bw(e,t){if(typeof t!="function")throw new Gr(b);return e=Be(e),function(){if(--e<1)return t.apply(this,arguments)}}function ef(e,t,s){return t=s?n:t,t=e&&t==null?e.length:t,Ri(e,Bt,n,n,n,n,t)}function tf(e,t){var s;if(typeof t!="function")throw new Gr(b);return e=Be(e),function(){return--e>0&&(s=t.apply(this,arguments)),e<=1&&(t=n),s}}var Sc=Ve(function(e,t,s){var u=lt;if(s.length){var f=Ki(s,Fn(Sc));u|=Ot}return Ri(e,u,t,s,f)}),rf=Ve(function(e,t,s){var u=lt|rt;if(s.length){var f=Ki(s,Fn(rf));u|=Ot}return Ri(t,u,e,s,f)});function nf(e,t,s){t=s?n:t;var u=Ri(e,nt,n,n,n,n,n,t);return u.placeholder=nf.placeholder,u}function sf(e,t,s){t=s?n:t;var u=Ri(e,st,n,n,n,n,n,t);return u.placeholder=sf.placeholder,u}function of(e,t,s){var u,f,w,P,S,N,ee=0,te=!1,oe=!1,ye=!0;if(typeof e!="function")throw new Gr(b);t=Yr(t)||0,Ct(s)&&(te=!!s.leading,oe="maxWait"in s,w=oe?ar(Yr(s.maxWait)||0,t):w,ye="trailing"in s?!!s.trailing:ye);function Oe(Kt){var oi=u,Ni=f;return u=f=n,ee=Kt,P=e.apply(Ni,oi),P}function Le(Kt){return ee=Kt,S=ds(We,t),te?Oe(Kt):P}function Ke(Kt){var oi=Kt-N,Ni=Kt-ee,Pf=t-oi;return oe?mr(Pf,w-Ni):Pf}function Fe(Kt){var oi=Kt-N,Ni=Kt-ee;return N===n||oi>=t||oi<0||oe&&Ni>=w}function We(){var Kt=Io();if(Fe(Kt))return et(Kt);S=ds(We,Ke(Kt))}function et(Kt){return S=n,ye&&u?Oe(Kt):(u=f=n,P)}function Ur(){S!==n&&gl(S),ee=0,u=N=f=S=n}function Pr(){return S===n?P:et(Io())}function $r(){var Kt=Io(),oi=Fe(Kt);if(u=arguments,f=this,N=Kt,oi){if(S===n)return Le(N);if(oe)return gl(S),S=ds(We,t),Oe(N)}return S===n&&(S=ds(We,t)),P}return $r.cancel=Ur,$r.flush=Pr,$r}var Ew=Ve(function(e,t){return Wh(e,1,t)}),xw=Ve(function(e,t,s){return Wh(e,Yr(t)||0,s)});function Iw(e){return Ri(e,$i)}function Po(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Gr(b);var s=function(){var u=arguments,f=t?t.apply(this,u):u[0],w=s.cache;if(w.has(f))return w.get(f);var P=e.apply(this,u);return s.cache=w.set(f,P)||w,P};return s.cache=new(Po.Cache||Si),s}Po.Cache=Si;function So(e){if(typeof e!="function")throw new Gr(b);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Pw(e){return tf(2,e)}var Sw=fm(function(e,t){t=t.length==1&&qe(t[0])?Rt(t[0],jr(Ne())):Rt(gr(t,1),jr(Ne()));var s=t.length;return Ve(function(u){for(var f=-1,w=mr(u.length,s);++f<w;)u[f]=t[f].call(this,u[f]);return Fr(e,this,u)})}),Oc=Ve(function(e,t){var s=Ki(t,Fn(Oc));return Ri(e,Ot,n,t,s)}),af=Ve(function(e,t){var s=Ki(t,Fn(af));return Ri(e,br,n,t,s)}),Ow=Ai(function(e,t){return Ri(e,Er,n,n,n,t)});function Rw(e,t){if(typeof e!="function")throw new Gr(b);return t=t===n?t:Be(t),Ve(e,t)}function Aw(e,t){if(typeof e!="function")throw new Gr(b);return t=t==null?0:ar(Be(t),0),Ve(function(s){var u=s[t],f=Ji(s,0,t);return u&&Hi(f,u),Fr(e,this,f)})}function Cw(e,t,s){var u=!0,f=!0;if(typeof e!="function")throw new Gr(b);return Ct(s)&&(u="leading"in s?!!s.leading:u,f="trailing"in s?!!s.trailing:f),of(e,t,{leading:u,maxWait:t,trailing:f})}function Tw(e){return ef(e,1)}function Dw(e,t){return Oc(lc(t),e)}function Nw(){if(!arguments.length)return[];var e=arguments[0];return qe(e)?e:[e]}function Lw(e){return Jr(e,Se)}function Fw(e,t){return t=typeof t=="function"?t:n,Jr(e,Se,t)}function jw(e){return Jr(e,Y|Se)}function Mw(e,t){return t=typeof t=="function"?t:n,Jr(e,Y|Se,t)}function zw(e,t){return t==null||Gh(e,t,ur(t))}function si(e,t){return e===t||e!==e&&t!==t}var Uw=mo(Xa),$w=mo(function(e,t){return e>=t}),fn=Xh(function(){return arguments}())?Xh:function(e){return jt(e)&&ft.call(e,"callee")&&!Uh.call(e,"callee")},qe=z.isArray,qw=wh?jr(wh):Jv;function Cr(e){return e!=null&&Oo(e.length)&&!Ti(e)}function Ht(e){return jt(e)&&Cr(e)}function Bw(e){return e===!0||e===!1||jt(e)&&xr(e)==Gn}var Zi=rv||zc,Hw=bh?jr(bh):Zv;function Kw(e){return jt(e)&&e.nodeType===1&&!ps(e)}function Vw(e){if(e==null)return!0;if(Cr(e)&&(qe(e)||typeof e=="string"||typeof e.splice=="function"||Zi(e)||jn(e)||fn(e)))return!e.length;var t=_r(e);if(t==ti||t==ri)return!e.size;if(fs(e))return!rc(e).length;for(var s in e)if(ft.call(e,s))return!1;return!0}function kw(e,t){return us(e,t)}function Gw(e,t,s){s=typeof s=="function"?s:n;var u=s?s(e,t):n;return u===n?us(e,t,n,s):!!u}function Rc(e){if(!jt(e))return!1;var t=xr(e);return t==zs||t==y0||typeof e.message=="string"&&typeof e.name=="string"&&!ps(e)}function Ww(e){return typeof e=="number"&&qh(e)}function Ti(e){if(!Ct(e))return!1;var t=xr(e);return t==Us||t==Wu||t==g0||t==m0}function cf(e){return typeof e=="number"&&e==Be(e)}function Oo(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=qi}function Ct(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function jt(e){return e!=null&&typeof e=="object"}var uf=Eh?jr(Eh):Yv;function Jw(e,t){return e===t||tc(e,t,mc(t))}function Zw(e,t,s){return s=typeof s=="function"?s:n,tc(e,t,mc(t),s)}function Qw(e){return hf(e)&&e!=+e}function Yw(e){if(Fm(e))throw new Ue(d);return el(e)}function Xw(e){return e===null}function e1(e){return e==null}function hf(e){return typeof e=="number"||jt(e)&&xr(e)==Jn}function ps(e){if(!jt(e)||xr(e)!=Ii)return!1;var t=Xs(e);if(t===null)return!0;var s=ft.call(t,"constructor")&&t.constructor;return typeof s=="function"&&s instanceof s&&Js.call(s)==Zy}var Ac=xh?jr(xh):Xv;function t1(e){return cf(e)&&e>=-qi&&e<=qi}var lf=Ih?jr(Ih):em;function Ro(e){return typeof e=="string"||!qe(e)&&jt(e)&&xr(e)==Qn}function zr(e){return typeof e=="symbol"||jt(e)&&xr(e)==$s}var jn=Ph?jr(Ph):tm;function r1(e){return e===n}function i1(e){return jt(e)&&_r(e)==Yn}function n1(e){return jt(e)&&xr(e)==w0}var s1=mo(ic),o1=mo(function(e,t){return e<=t});function ff(e){if(!e)return[];if(Cr(e))return Ro(e)?ii(e):Ar(e);if(ts&&e[ts])return zy(e[ts]());var t=_r(e),s=t==ti?Ka:t==ri?ks:Mn;return s(e)}function Di(e){if(!e)return e===0?e:0;if(e=Yr(e),e===rn||e===-rn){var t=e<0?-1:1;return t*l0}return e===e?e:0}function Be(e){var t=Di(e),s=t%1;return t===t?s?t-s:t:0}function df(e){return e?cn(Be(e),0,pi):0}function Yr(e){if(typeof e=="number")return e;if(zr(e))return js;if(Ct(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ct(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Th(e);var s=q0.test(e);return s||H0.test(e)?by(e.slice(2),s?2:8):$0.test(e)?js:+e}function pf(e){return yi(e,Tr(e))}function a1(e){return e?cn(Be(e),-qi,qi):e===0?e:0}function ut(e){return e==null?"":Mr(e)}var c1=Nn(function(e,t){if(fs(t)||Cr(t)){yi(t,ur(t),e);return}for(var s in t)ft.call(t,s)&&os(e,s,t[s])}),gf=Nn(function(e,t){yi(t,Tr(t),e)}),Ao=Nn(function(e,t,s,u){yi(t,Tr(t),e,u)}),u1=Nn(function(e,t,s,u){yi(t,ur(t),e,u)}),h1=Ai(Za);function l1(e,t){var s=Dn(e);return t==null?s:kh(s,t)}var f1=Ve(function(e,t){e=vt(e);var s=-1,u=t.length,f=u>2?t[2]:n;for(f&&Ir(t[0],t[1],f)&&(u=1);++s<u;)for(var w=t[s],P=Tr(w),S=-1,N=P.length;++S<N;){var ee=P[S],te=e[ee];(te===n||si(te,An[ee])&&!ft.call(e,ee))&&(e[ee]=w[ee])}return e}),d1=Ve(function(e){return e.push(n,Tl),Fr(yf,n,e)});function p1(e,t){return Oh(e,Ne(t,3),gi)}function g1(e,t){return Oh(e,Ne(t,3),Ya)}function y1(e,t){return e==null?e:Qa(e,Ne(t,3),Tr)}function v1(e,t){return e==null?e:Qh(e,Ne(t,3),Tr)}function m1(e,t){return e&&gi(e,Ne(t,3))}function _1(e,t){return e&&Ya(e,Ne(t,3))}function w1(e){return e==null?[]:uo(e,ur(e))}function b1(e){return e==null?[]:uo(e,Tr(e))}function Cc(e,t,s){var u=e==null?n:un(e,t);return u===n?s:u}function E1(e,t){return e!=null&&Ll(e,t,Vv)}function Tc(e,t){return e!=null&&Ll(e,t,kv)}var x1=Sl(function(e,t,s){t!=null&&typeof t.toString!="function"&&(t=Zs.call(t)),e[t]=s},Nc(Dr)),I1=Sl(function(e,t,s){t!=null&&typeof t.toString!="function"&&(t=Zs.call(t)),ft.call(e,t)?e[t].push(s):e[t]=[s]},Ne),P1=Ve(cs);function ur(e){return Cr(e)?Kh(e):rc(e)}function Tr(e){return Cr(e)?Kh(e,!0):rm(e)}function S1(e,t){var s={};return t=Ne(t,3),gi(e,function(u,f,w){Oi(s,t(u,f,w),u)}),s}function O1(e,t){var s={};return t=Ne(t,3),gi(e,function(u,f,w){Oi(s,f,t(u,f,w))}),s}var R1=Nn(function(e,t,s){ho(e,t,s)}),yf=Nn(function(e,t,s,u){ho(e,t,s,u)}),A1=Ai(function(e,t){var s={};if(e==null)return s;var u=!1;t=Rt(t,function(w){return w=Wi(w,e),u||(u=w.length>1),w}),yi(e,yc(e),s),u&&(s=Jr(s,Y|se|Se,xm));for(var f=t.length;f--;)cc(s,t[f]);return s});function C1(e,t){return vf(e,So(Ne(t)))}var T1=Ai(function(e,t){return e==null?{}:nm(e,t)});function vf(e,t){if(e==null)return{};var s=Rt(yc(e),function(u){return[u]});return t=Ne(t),al(e,s,function(u,f){return t(u,f[0])})}function D1(e,t,s){t=Wi(t,e);var u=-1,f=t.length;for(f||(f=1,e=n);++u<f;){var w=e==null?n:e[vi(t[u])];w===n&&(u=f,w=s),e=Ti(w)?w.call(e):w}return e}function N1(e,t,s){return e==null?e:hs(e,t,s)}function L1(e,t,s,u){return u=typeof u=="function"?u:n,e==null?e:hs(e,t,s,u)}var mf=Al(ur),_f=Al(Tr);function F1(e,t,s){var u=qe(e),f=u||Zi(e)||jn(e);if(t=Ne(t,4),s==null){var w=e&&e.constructor;f?s=u?new w:[]:Ct(e)?s=Ti(w)?Dn(Xs(e)):{}:s={}}return(f?kr:gi)(e,function(P,S,N){return t(s,P,S,N)}),s}function j1(e,t){return e==null?!0:cc(e,t)}function M1(e,t,s){return e==null?e:fl(e,t,lc(s))}function z1(e,t,s,u){return u=typeof u=="function"?u:n,e==null?e:fl(e,t,lc(s),u)}function Mn(e){return e==null?[]:Ha(e,ur(e))}function U1(e){return e==null?[]:Ha(e,Tr(e))}function $1(e,t,s){return s===n&&(s=t,t=n),s!==n&&(s=Yr(s),s=s===s?s:0),t!==n&&(t=Yr(t),t=t===t?t:0),cn(Yr(e),t,s)}function q1(e,t,s){return t=Di(t),s===n?(s=t,t=0):s=Di(s),e=Yr(e),Gv(e,t,s)}function B1(e,t,s){if(s&&typeof s!="boolean"&&Ir(e,t,s)&&(t=s=n),s===n&&(typeof t=="boolean"?(s=t,t=n):typeof e=="boolean"&&(s=e,e=n)),e===n&&t===n?(e=0,t=1):(e=Di(e),t===n?(t=e,e=0):t=Di(t)),e>t){var u=e;e=t,t=u}if(s||e%1||t%1){var f=Bh();return mr(e+f*(t-e+wy("1e-"+((f+"").length-1))),t)}return sc(e,t)}var H1=Ln(function(e,t,s){return t=t.toLowerCase(),e+(s?wf(t):t)});function wf(e){return Dc(ut(e).toLowerCase())}function bf(e){return e=ut(e),e&&e.replace(V0,Ny).replace(hy,"")}function K1(e,t,s){e=ut(e),t=Mr(t);var u=e.length;s=s===n?u:cn(Be(s),0,u);var f=s;return s-=t.length,s>=0&&e.slice(s,f)==t}function V1(e){return e=ut(e),e&&P0.test(e)?e.replace(Qu,Ly):e}function k1(e){return e=ut(e),e&&T0.test(e)?e.replace(Oa,"\\$&"):e}var G1=Ln(function(e,t,s){return e+(s?"-":"")+t.toLowerCase()}),W1=Ln(function(e,t,s){return e+(s?" ":"")+t.toLowerCase()}),J1=xl("toLowerCase");function Z1(e,t,s){e=ut(e),t=Be(t);var u=t?On(e):0;if(!t||u>=t)return e;var f=(t-u)/2;return vo(io(f),s)+e+vo(ro(f),s)}function Q1(e,t,s){e=ut(e),t=Be(t);var u=t?On(e):0;return t&&u<t?e+vo(t-u,s):e}function Y1(e,t,s){e=ut(e),t=Be(t);var u=t?On(e):0;return t&&u<t?vo(t-u,s)+e:e}function X1(e,t,s){return s||t==null?t=0:t&&(t=+t),ov(ut(e).replace(Ra,""),t||0)}function eb(e,t,s){return(s?Ir(e,t,s):t===n)?t=1:t=Be(t),oc(ut(e),t)}function tb(){var e=arguments,t=ut(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var rb=Ln(function(e,t,s){return e+(s?"_":"")+t.toLowerCase()});function ib(e,t,s){return s&&typeof s!="number"&&Ir(e,t,s)&&(t=s=n),s=s===n?pi:s>>>0,s?(e=ut(e),e&&(typeof t=="string"||t!=null&&!Ac(t))&&(t=Mr(t),!t&&Sn(e))?Ji(ii(e),0,s):e.split(t,s)):[]}var nb=Ln(function(e,t,s){return e+(s?" ":"")+Dc(t)});function sb(e,t,s){return e=ut(e),s=s==null?0:cn(Be(s),0,e.length),t=Mr(t),e.slice(s,s+t.length)==t}function ob(e,t,s){var u=v.templateSettings;s&&Ir(e,t,s)&&(t=n),e=ut(e),t=Ao({},t,u,Cl);var f=Ao({},t.imports,u.imports,Cl),w=ur(f),P=Ha(f,w),S,N,ee=0,te=t.interpolate||qs,oe="__p += '",ye=Va((t.escape||qs).source+"|"+te.source+"|"+(te===Yu?U0:qs).source+"|"+(t.evaluate||qs).source+"|$","g"),Oe="//# sourceURL="+(ft.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++gy+"]")+`
`;e.replace(ye,function(Fe,We,et,Ur,Pr,$r){return et||(et=Ur),oe+=e.slice(ee,$r).replace(k0,Fy),We&&(S=!0,oe+=`' +
__e(`+We+`) +
'`),Pr&&(N=!0,oe+=`';
`+Pr+`;
__p += '`),et&&(oe+=`' +
((__t = (`+et+`)) == null ? '' : __t) +
'`),ee=$r+Fe.length,Fe}),oe+=`';
`;var Le=ft.call(t,"variable")&&t.variable;if(!Le)oe=`with (obj) {
`+oe+`
}
`;else if(M0.test(Le))throw new Ue(A);oe=(N?oe.replace(b0,""):oe).replace(E0,"$1").replace(x0,"$1;"),oe="function("+(Le||"obj")+`) {
`+(Le?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(S?", __e = _.escape":"")+(N?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+oe+`return __p
}`;var Ke=xf(function(){return ot(w,Oe+"return "+oe).apply(n,P)});if(Ke.source=oe,Rc(Ke))throw Ke;return Ke}function ab(e){return ut(e).toLowerCase()}function cb(e){return ut(e).toUpperCase()}function ub(e,t,s){if(e=ut(e),e&&(s||t===n))return Th(e);if(!e||!(t=Mr(t)))return e;var u=ii(e),f=ii(t),w=Dh(u,f),P=Nh(u,f)+1;return Ji(u,w,P).join("")}function hb(e,t,s){if(e=ut(e),e&&(s||t===n))return e.slice(0,Fh(e)+1);if(!e||!(t=Mr(t)))return e;var u=ii(e),f=Nh(u,ii(t))+1;return Ji(u,0,f).join("")}function lb(e,t,s){if(e=ut(e),e&&(s||t===n))return e.replace(Ra,"");if(!e||!(t=Mr(t)))return e;var u=ii(e),f=Dh(u,ii(t));return Ji(u,f).join("")}function fb(e,t){var s=s0,u=o0;if(Ct(t)){var f="separator"in t?t.separator:f;s="length"in t?Be(t.length):s,u="omission"in t?Mr(t.omission):u}e=ut(e);var w=e.length;if(Sn(e)){var P=ii(e);w=P.length}if(s>=w)return e;var S=s-On(u);if(S<1)return u;var N=P?Ji(P,0,S).join(""):e.slice(0,S);if(f===n)return N+u;if(P&&(S+=N.length-S),Ac(f)){if(e.slice(S).search(f)){var ee,te=N;for(f.global||(f=Va(f.source,ut(Xu.exec(f))+"g")),f.lastIndex=0;ee=f.exec(te);)var oe=ee.index;N=N.slice(0,oe===n?S:oe)}}else if(e.indexOf(Mr(f),S)!=S){var ye=N.lastIndexOf(f);ye>-1&&(N=N.slice(0,ye))}return N+u}function db(e){return e=ut(e),e&&I0.test(e)?e.replace(Zu,By):e}var pb=Ln(function(e,t,s){return e+(s?" ":"")+t.toUpperCase()}),Dc=xl("toUpperCase");function Ef(e,t,s){return e=ut(e),t=s?n:t,t===n?My(e)?Vy(e):Ry(e):e.match(t)||[]}var xf=Ve(function(e,t){try{return Fr(e,n,t)}catch(s){return Rc(s)?s:new Ue(s)}}),gb=Ai(function(e,t){return kr(t,function(s){s=vi(s),Oi(e,s,Sc(e[s],e))}),e});function yb(e){var t=e==null?0:e.length,s=Ne();return e=t?Rt(e,function(u){if(typeof u[1]!="function")throw new Gr(b);return[s(u[0]),u[1]]}):[],Ve(function(u){for(var f=-1;++f<t;){var w=e[f];if(Fr(w[0],this,u))return Fr(w[1],this,u)}})}function vb(e){return Bv(Jr(e,Y))}function Nc(e){return function(){return e}}function mb(e,t){return e==null||e!==e?t:e}var _b=Pl(),wb=Pl(!0);function Dr(e){return e}function Lc(e){return tl(typeof e=="function"?e:Jr(e,Y))}function bb(e){return il(Jr(e,Y))}function Eb(e,t){return nl(e,Jr(t,Y))}var xb=Ve(function(e,t){return function(s){return cs(s,e,t)}}),Ib=Ve(function(e,t){return function(s){return cs(e,s,t)}});function Fc(e,t,s){var u=ur(t),f=uo(t,u);s==null&&!(Ct(t)&&(f.length||!u.length))&&(s=t,t=e,e=this,f=uo(t,ur(t)));var w=!(Ct(s)&&"chain"in s)||!!s.chain,P=Ti(e);return kr(f,function(S){var N=t[S];e[S]=N,P&&(e.prototype[S]=function(){var ee=this.__chain__;if(w||ee){var te=e(this.__wrapped__),oe=te.__actions__=Ar(this.__actions__);return oe.push({func:N,args:arguments,thisArg:e}),te.__chain__=ee,te}return N.apply(e,Hi([this.value()],arguments))})}),e}function Pb(){return pr._===this&&(pr._=Qy),this}function jc(){}function Sb(e){return e=Be(e),Ve(function(t){return sl(t,e)})}var Ob=dc(Rt),Rb=dc(Sh),Ab=dc(za);function If(e){return wc(e)?Ua(vi(e)):sm(e)}function Cb(e){return function(t){return e==null?n:un(e,t)}}var Tb=Ol(),Db=Ol(!0);function Mc(){return[]}function zc(){return!1}function Nb(){return{}}function Lb(){return""}function Fb(){return!0}function jb(e,t){if(e=Be(e),e<1||e>qi)return[];var s=pi,u=mr(e,pi);t=Ne(t),e-=pi;for(var f=Ba(u,t);++s<e;)t(s);return f}function Mb(e){return qe(e)?Rt(e,vi):zr(e)?[e]:Ar(Hl(ut(e)))}function zb(e){var t=++Jy;return ut(e)+t}var Ub=yo(function(e,t){return e+t},0),$b=pc("ceil"),qb=yo(function(e,t){return e/t},1),Bb=pc("floor");function Hb(e){return e&&e.length?co(e,Dr,Xa):n}function Kb(e,t){return e&&e.length?co(e,Ne(t,2),Xa):n}function Vb(e){return Ah(e,Dr)}function kb(e,t){return Ah(e,Ne(t,2))}function Gb(e){return e&&e.length?co(e,Dr,ic):n}function Wb(e,t){return e&&e.length?co(e,Ne(t,2),ic):n}var Jb=yo(function(e,t){return e*t},1),Zb=pc("round"),Qb=yo(function(e,t){return e-t},0);function Yb(e){return e&&e.length?qa(e,Dr):0}function Xb(e,t){return e&&e.length?qa(e,Ne(t,2)):0}return v.after=bw,v.ary=ef,v.assign=c1,v.assignIn=gf,v.assignInWith=Ao,v.assignWith=u1,v.at=h1,v.before=tf,v.bind=Sc,v.bindAll=gb,v.bindKey=rf,v.castArray=Nw,v.chain=Ql,v.chunk=Bm,v.compact=Hm,v.concat=Km,v.cond=yb,v.conforms=vb,v.constant=Nc,v.countBy=Y_,v.create=l1,v.curry=nf,v.curryRight=sf,v.debounce=of,v.defaults=f1,v.defaultsDeep=d1,v.defer=Ew,v.delay=xw,v.difference=Vm,v.differenceBy=km,v.differenceWith=Gm,v.drop=Wm,v.dropRight=Jm,v.dropRightWhile=Zm,v.dropWhile=Qm,v.fill=Ym,v.filter=ew,v.flatMap=iw,v.flatMapDeep=nw,v.flatMapDepth=sw,v.flatten=Gl,v.flattenDeep=Xm,v.flattenDepth=e_,v.flip=Iw,v.flow=_b,v.flowRight=wb,v.fromPairs=t_,v.functions=w1,v.functionsIn=b1,v.groupBy=ow,v.initial=i_,v.intersection=n_,v.intersectionBy=s_,v.intersectionWith=o_,v.invert=x1,v.invertBy=I1,v.invokeMap=cw,v.iteratee=Lc,v.keyBy=uw,v.keys=ur,v.keysIn=Tr,v.map=xo,v.mapKeys=S1,v.mapValues=O1,v.matches=bb,v.matchesProperty=Eb,v.memoize=Po,v.merge=R1,v.mergeWith=yf,v.method=xb,v.methodOf=Ib,v.mixin=Fc,v.negate=So,v.nthArg=Sb,v.omit=A1,v.omitBy=C1,v.once=Pw,v.orderBy=hw,v.over=Ob,v.overArgs=Sw,v.overEvery=Rb,v.overSome=Ab,v.partial=Oc,v.partialRight=af,v.partition=lw,v.pick=T1,v.pickBy=vf,v.property=If,v.propertyOf=Cb,v.pull=h_,v.pullAll=Jl,v.pullAllBy=l_,v.pullAllWith=f_,v.pullAt=d_,v.range=Tb,v.rangeRight=Db,v.rearg=Ow,v.reject=pw,v.remove=p_,v.rest=Rw,v.reverse=Ic,v.sampleSize=yw,v.set=N1,v.setWith=L1,v.shuffle=vw,v.slice=g_,v.sortBy=ww,v.sortedUniq=E_,v.sortedUniqBy=x_,v.split=ib,v.spread=Aw,v.tail=I_,v.take=P_,v.takeRight=S_,v.takeRightWhile=O_,v.takeWhile=R_,v.tap=H_,v.throttle=Cw,v.thru=Eo,v.toArray=ff,v.toPairs=mf,v.toPairsIn=_f,v.toPath=Mb,v.toPlainObject=pf,v.transform=F1,v.unary=Tw,v.union=A_,v.unionBy=C_,v.unionWith=T_,v.uniq=D_,v.uniqBy=N_,v.uniqWith=L_,v.unset=j1,v.unzip=Pc,v.unzipWith=Zl,v.update=M1,v.updateWith=z1,v.values=Mn,v.valuesIn=U1,v.without=F_,v.words=Ef,v.wrap=Dw,v.xor=j_,v.xorBy=M_,v.xorWith=z_,v.zip=U_,v.zipObject=$_,v.zipObjectDeep=q_,v.zipWith=B_,v.entries=mf,v.entriesIn=_f,v.extend=gf,v.extendWith=Ao,Fc(v,v),v.add=Ub,v.attempt=xf,v.camelCase=H1,v.capitalize=wf,v.ceil=$b,v.clamp=$1,v.clone=Lw,v.cloneDeep=jw,v.cloneDeepWith=Mw,v.cloneWith=Fw,v.conformsTo=zw,v.deburr=bf,v.defaultTo=mb,v.divide=qb,v.endsWith=K1,v.eq=si,v.escape=V1,v.escapeRegExp=k1,v.every=X_,v.find=tw,v.findIndex=Vl,v.findKey=p1,v.findLast=rw,v.findLastIndex=kl,v.findLastKey=g1,v.floor=Bb,v.forEach=Yl,v.forEachRight=Xl,v.forIn=y1,v.forInRight=v1,v.forOwn=m1,v.forOwnRight=_1,v.get=Cc,v.gt=Uw,v.gte=$w,v.has=E1,v.hasIn=Tc,v.head=Wl,v.identity=Dr,v.includes=aw,v.indexOf=r_,v.inRange=q1,v.invoke=P1,v.isArguments=fn,v.isArray=qe,v.isArrayBuffer=qw,v.isArrayLike=Cr,v.isArrayLikeObject=Ht,v.isBoolean=Bw,v.isBuffer=Zi,v.isDate=Hw,v.isElement=Kw,v.isEmpty=Vw,v.isEqual=kw,v.isEqualWith=Gw,v.isError=Rc,v.isFinite=Ww,v.isFunction=Ti,v.isInteger=cf,v.isLength=Oo,v.isMap=uf,v.isMatch=Jw,v.isMatchWith=Zw,v.isNaN=Qw,v.isNative=Yw,v.isNil=e1,v.isNull=Xw,v.isNumber=hf,v.isObject=Ct,v.isObjectLike=jt,v.isPlainObject=ps,v.isRegExp=Ac,v.isSafeInteger=t1,v.isSet=lf,v.isString=Ro,v.isSymbol=zr,v.isTypedArray=jn,v.isUndefined=r1,v.isWeakMap=i1,v.isWeakSet=n1,v.join=a_,v.kebabCase=G1,v.last=Qr,v.lastIndexOf=c_,v.lowerCase=W1,v.lowerFirst=J1,v.lt=s1,v.lte=o1,v.max=Hb,v.maxBy=Kb,v.mean=Vb,v.meanBy=kb,v.min=Gb,v.minBy=Wb,v.stubArray=Mc,v.stubFalse=zc,v.stubObject=Nb,v.stubString=Lb,v.stubTrue=Fb,v.multiply=Jb,v.nth=u_,v.noConflict=Pb,v.noop=jc,v.now=Io,v.pad=Z1,v.padEnd=Q1,v.padStart=Y1,v.parseInt=X1,v.random=B1,v.reduce=fw,v.reduceRight=dw,v.repeat=eb,v.replace=tb,v.result=D1,v.round=Zb,v.runInContext=D,v.sample=gw,v.size=mw,v.snakeCase=rb,v.some=_w,v.sortedIndex=y_,v.sortedIndexBy=v_,v.sortedIndexOf=m_,v.sortedLastIndex=__,v.sortedLastIndexBy=w_,v.sortedLastIndexOf=b_,v.startCase=nb,v.startsWith=sb,v.subtract=Qb,v.sum=Yb,v.sumBy=Xb,v.template=ob,v.times=jb,v.toFinite=Di,v.toInteger=Be,v.toLength=df,v.toLower=ab,v.toNumber=Yr,v.toSafeInteger=a1,v.toString=ut,v.toUpper=cb,v.trim=ub,v.trimEnd=hb,v.trimStart=lb,v.truncate=fb,v.unescape=db,v.uniqueId=zb,v.upperCase=pb,v.upperFirst=Dc,v.each=Yl,v.eachRight=Xl,v.first=Wl,Fc(v,function(){var e={};return gi(v,function(t,s){ft.call(v.prototype,s)||(e[s]=t)}),e}(),{chain:!1}),v.VERSION=o,kr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){v[e].placeholder=v}),kr(["drop","take"],function(e,t){Ze.prototype[e]=function(s){s=s===n?1:ar(Be(s),0);var u=this.__filtered__&&!t?new Ze(this):this.clone();return u.__filtered__?u.__takeCount__=mr(s,u.__takeCount__):u.__views__.push({size:mr(s,pi),type:e+(u.__dir__<0?"Right":"")}),u},Ze.prototype[e+"Right"]=function(s){return this.reverse()[e](s).reverse()}}),kr(["filter","map","takeWhile"],function(e,t){var s=t+1,u=s==Gu||s==h0;Ze.prototype[e]=function(f){var w=this.clone();return w.__iteratees__.push({iteratee:Ne(f,3),type:s}),w.__filtered__=w.__filtered__||u,w}}),kr(["head","last"],function(e,t){var s="take"+(t?"Right":"");Ze.prototype[e]=function(){return this[s](1).value()[0]}}),kr(["initial","tail"],function(e,t){var s="drop"+(t?"":"Right");Ze.prototype[e]=function(){return this.__filtered__?new Ze(this):this[s](1)}}),Ze.prototype.compact=function(){return this.filter(Dr)},Ze.prototype.find=function(e){return this.filter(e).head()},Ze.prototype.findLast=function(e){return this.reverse().find(e)},Ze.prototype.invokeMap=Ve(function(e,t){return typeof e=="function"?new Ze(this):this.map(function(s){return cs(s,e,t)})}),Ze.prototype.reject=function(e){return this.filter(So(Ne(e)))},Ze.prototype.slice=function(e,t){e=Be(e);var s=this;return s.__filtered__&&(e>0||t<0)?new Ze(s):(e<0?s=s.takeRight(-e):e&&(s=s.drop(e)),t!==n&&(t=Be(t),s=t<0?s.dropRight(-t):s.take(t-e)),s)},Ze.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ze.prototype.toArray=function(){return this.take(pi)},gi(Ze.prototype,function(e,t){var s=/^(?:filter|find|map|reject)|While$/.test(t),u=/^(?:head|last)$/.test(t),f=v[u?"take"+(t=="last"?"Right":""):t],w=u||/^find/.test(t);f&&(v.prototype[t]=function(){var P=this.__wrapped__,S=u?[1]:arguments,N=P instanceof Ze,ee=S[0],te=N||qe(P),oe=function(We){var et=f.apply(v,Hi([We],S));return u&&ye?et[0]:et};te&&s&&typeof ee=="function"&&ee.length!=1&&(N=te=!1);var ye=this.__chain__,Oe=!!this.__actions__.length,Le=w&&!ye,Ke=N&&!Oe;if(!w&&te){P=Ke?P:new Ze(this);var Fe=e.apply(P,S);return Fe.__actions__.push({func:Eo,args:[oe],thisArg:n}),new Wr(Fe,ye)}return Le&&Ke?e.apply(this,S):(Fe=this.thru(oe),Le?u?Fe.value()[0]:Fe.value():Fe)})}),kr(["pop","push","shift","sort","splice","unshift"],function(e){var t=Gs[e],s=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",u=/^(?:pop|shift)$/.test(e);v.prototype[e]=function(){var f=arguments;if(u&&!this.__chain__){var w=this.value();return t.apply(qe(w)?w:[],f)}return this[s](function(P){return t.apply(qe(P)?P:[],f)})}}),gi(Ze.prototype,function(e,t){var s=v[t];if(s){var u=s.name+"";ft.call(Tn,u)||(Tn[u]=[]),Tn[u].push({name:t,func:s})}}),Tn[go(n,rt).name]=[{name:"wrapper",func:n}],Ze.prototype.clone=dv,Ze.prototype.reverse=pv,Ze.prototype.value=gv,v.prototype.at=K_,v.prototype.chain=V_,v.prototype.commit=k_,v.prototype.next=G_,v.prototype.plant=J_,v.prototype.reverse=Z_,v.prototype.toJSON=v.prototype.valueOf=v.prototype.value=Q_,v.prototype.first=v.prototype.head,ts&&(v.prototype[ts]=W_),v},Rn=ky();nn?((nn.exports=Rn)._=Rn,La._=Rn):pr._=Rn}).call(Vn)})(ua,ua.exports);var Eg=Object.defineProperty,xg=Object.defineProperties,Ig=Object.getOwnPropertyDescriptors,Mu=Object.getOwnPropertySymbols,Pg=Object.prototype.hasOwnProperty,Sg=Object.prototype.propertyIsEnumerable,zu=(h,r,n)=>r in h?Eg(h,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):h[r]=n,Ns=(h,r)=>{for(var n in r||(r={}))Pg.call(r,n)&&zu(h,n,r[n]);if(Mu)for(var n of Mu(r))Sg.call(r,n)&&zu(h,n,r[n]);return h},Og=(h,r)=>xg(h,Ig(r));function Ui(h,r,n){var o;const a=(0,_.DQ)(h);return((o=r.rpcMap)==null?void 0:o[a.reference])||`${bg}?chainId=${a.namespace}:${a.reference}&projectId=${n}`}function tn(h){return h.includes(":")?h.split(":")[1]:h}function Uu(h){return h.map(r=>`${r.split(":")[0]}:${r.split(":")[1]}`)}function Rg(h,r){const n=Object.keys(r.namespaces).filter(a=>a.includes(h));if(!n.length)return[];const o=[];return n.forEach(a=>{const d=r.namespaces[a].accounts;o.push(...d)}),o}function Ag(h={},r={}){const n=$u(h),o=$u(r);return ua.exports.merge(n,o)}function $u(h){var r,n,o,a;const d={};if(!(0,_.L5)(h))return d;for(const[b,A]of Object.entries(h)){const $=(0,_.gp)(b)?[b]:A.chains,R=A.methods||[],B=A.events||[],Y=A.rpcMap||{},se=(0,_.M)(b);d[se]=Og(Ns(Ns({},d[se]),A),{chains:(0,_.eG)($,(r=d[se])==null?void 0:r.chains),methods:(0,_.eG)(R,(n=d[se])==null?void 0:n.methods),events:(0,_.eG)(B,(o=d[se])==null?void 0:o.events),rpcMap:Ns(Ns({},Y),(a=d[se])==null?void 0:a.rpcMap)})}return d}function Cg(h){return h.includes(":")?h.split(":")[2]:h}function Tg(h){const r={};for(const[n,o]of Object.entries(h)){const a=o.methods||[],d=o.events||[],b=o.accounts||[],A=(0,_.gp)(n)?[n]:o.chains?o.chains:Uu(o.accounts);r[n]={chains:A,methods:a,events:d,accounts:b}}return r}function ha(h){return typeof h=="number"?h:h.includes("0x")?parseInt(h,16):h.includes(":")?Number(h.split(":")[1]):Number(h)}const qu={},St=h=>qu[h],la=(h,r)=>{qu[h]=r};class Dg{constructor(r){this.name="polkadot",this.namespace=r.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,n){this.httpProviders[r]||this.setHttpProvider(r,n),this.chainId=r,this.events.emit(xi.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getAccounts(){const r=this.namespace.accounts;return r?r.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(n=>{var o;const a=tn(n);r[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[n])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,n=this.httpProviders[r];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return n}setHttpProvider(r,n){const o=this.createHttpProvider(r,n);o&&(this.httpProviders[r]=o)}createHttpProvider(r,n){const o=n||Ui(r,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);return new qt(new en(o,St("disableProviderPing")))}}class Ng{constructor(r){this.name="eip155",this.namespace=r.namespace,this.events=St("events"),this.client=St("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(r){switch(r.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(r);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(r.request.method)?await this.client.request(r):this.getHttpProvider().request(r.request)}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}setDefaultChain(r,n){this.httpProviders[r]||this.setHttpProvider(parseInt(r),n),this.chainId=parseInt(r),this.events.emit(xi.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}createHttpProvider(r,n){const o=n||Ui(`${this.name}:${r}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);return new qt(new Lu(o,St("disableProviderPing")))}setHttpProvider(r,n){const o=this.createHttpProvider(r,n);o&&(this.httpProviders[r]=o)}createHttpProviders(){const r={};return this.namespace.chains.forEach(n=>{var o;const a=parseInt(tn(n));r[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[n])}),r}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const r=this.chainId,n=this.httpProviders[r];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return n}async handleSwitchChain(r){var n,o;let a=r.request.params?(n=r.request.params[0])==null?void 0:n.chainId:"0x0";a=a.startsWith("0x")?a:`0x${a}`;const d=parseInt(a,16);if(this.isChainApproved(d))this.setDefaultChain(`${d}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:r.topic,request:{method:r.request.method,params:[{chainId:a}]},chainId:(o=this.namespace.chains)==null?void 0:o[0]}),this.setDefaultChain(`${d}`);else throw new Error(`Failed to switch to chain 'eip155:${d}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(r){return this.namespace.chains.includes(`${this.name}:${r}`)}}class Lg{constructor(r){this.name="solana",this.namespace=r.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,n){this.httpProviders[r]||this.setHttpProvider(r,n),this.chainId=r,this.events.emit(xi.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(n=>{var o;const a=tn(n);r[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[n])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,n=this.httpProviders[r];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return n}setHttpProvider(r,n){const o=this.createHttpProvider(r,n);o&&(this.httpProviders[r]=o)}createHttpProvider(r,n){const o=n||Ui(r,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);return new qt(new en(o,St("disableProviderPing")))}}class Fg{constructor(r){this.name="cosmos",this.namespace=r.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,n){this.httpProviders[r]||this.setHttpProvider(r,n),this.chainId=r,this.events.emit(xi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(n=>{var o;const a=tn(n);r[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[n])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,n=this.httpProviders[r];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return n}setHttpProvider(r,n){const o=this.createHttpProvider(r,n);o&&(this.httpProviders[r]=o)}createHttpProvider(r,n){const o=n||Ui(r,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);return new qt(new en(o,St("disableProviderPing")))}}class jg{constructor(r){this.name="cip34",this.namespace=r.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,n){this.httpProviders[r]||this.setHttpProvider(r,n),this.chainId=r,this.events.emit(xi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(n=>{const o=this.getCardanoRPCUrl(n),a=tn(n);r[a]=this.createHttpProvider(a,o)}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,n=this.httpProviders[r];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return n}getCardanoRPCUrl(r){const n=this.namespace.rpcMap;if(n)return n[r]}setHttpProvider(r,n){const o=this.createHttpProvider(r,n);o&&(this.httpProviders[r]=o)}createHttpProvider(r,n){const o=n||this.getCardanoRPCUrl(r);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);return new qt(new en(o,St("disableProviderPing")))}}class Mg{constructor(r){this.name="elrond",this.namespace=r.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,n){this.httpProviders[r]||this.setHttpProvider(r,n),this.chainId=r,this.events.emit(xi.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(n=>{var o;const a=tn(n);r[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[n])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,n=this.httpProviders[r];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return n}setHttpProvider(r,n){const o=this.createHttpProvider(r,n);o&&(this.httpProviders[r]=o)}createHttpProvider(r,n){const o=n||Ui(r,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);return new qt(new en(o,St("disableProviderPing")))}}class zg{constructor(r){this.name="multiversx",this.namespace=r.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,n){this.httpProviders[r]||this.setHttpProvider(r,n),this.chainId=r,this.events.emit(xi.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(n=>{var o;const a=tn(n);r[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[n])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,n=this.httpProviders[r];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return n}setHttpProvider(r,n){const o=this.createHttpProvider(r,n);o&&(this.httpProviders[r]=o)}createHttpProvider(r,n){const o=n||Ui(r,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);return new qt(new en(o,St("disableProviderPing")))}}class Ug{constructor(r){this.name="near",this.namespace=r.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,n){if(this.chainId=r,!this.httpProviders[r]){const o=n||Ui(`${this.name}:${r}`,this.namespace);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);this.setHttpProvider(r,o)}this.events.emit(xi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const r=this.namespace.accounts;return r?r.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(n=>{var o;r[n]=this.createHttpProvider(n,(o=this.namespace.rpcMap)==null?void 0:o[n])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,n=this.httpProviders[r];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return n}setHttpProvider(r,n){const o=this.createHttpProvider(r,n);o&&(this.httpProviders[r]=o)}createHttpProvider(r,n){const o=n||Ui(r,this.namespace);return typeof o>"u"?void 0:new qt(new en(o,St("disableProviderPing")))}}var $g=Object.defineProperty,qg=Object.defineProperties,Bg=Object.getOwnPropertyDescriptors,Bu=Object.getOwnPropertySymbols,Hg=Object.prototype.hasOwnProperty,Kg=Object.prototype.propertyIsEnumerable,Hu=(h,r,n)=>r in h?$g(h,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):h[r]=n,Ls=(h,r)=>{for(var n in r||(r={}))Hg.call(r,n)&&Hu(h,n,r[n]);if(Bu)for(var n of Bu(r))Kg.call(r,n)&&Hu(h,n,r[n]);return h},fa=(h,r)=>qg(h,Bg(r));class da{constructor(r){this.events=new(ve()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=r,this.logger=typeof(r==null?void 0:r.logger)<"u"&&typeof(r==null?void 0:r.logger)!="string"?r.logger:(0,je.pino)((0,je.getDefaultLoggerOptions)({level:(r==null?void 0:r.logger)||Fu})),this.disableProviderPing=(r==null?void 0:r.disableProviderPing)||!1}static async init(r){const n=new da(r);return await n.initialize(),n}async request(r,n){const[o,a]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(o).request({request:Ls({},r),chainId:`${o}:${a}`,topic:this.session.topic})}sendAsync(r,n,o){const a=new Date().getTime();this.request(r,o).then(d=>n(null,vn(a,d))).catch(d=>n(d,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var r;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(r=this.session)==null?void 0:r.topic,reason:(0,_.D6)("USER_DISCONNECTED")}),await this.cleanup()}async connect(r){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(r),await this.cleanupPendingPairings(),!r.skipPairing)return await this.pair(r.pairingTopic)}on(r,n){this.events.on(r,n)}once(r,n){this.events.once(r,n)}removeListener(r,n){this.events.removeListener(r,n)}off(r,n){this.events.off(r,n)}get isWalletConnect(){return!0}async pair(r){this.shouldAbortPairingAttempt=!1;let n=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(n>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:o,approval:a}=await this.client.connect({pairingTopic:r,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});o&&(this.uri=o,this.events.emit("display_uri",o)),await a().then(d=>{this.session=d,this.namespaces||(this.namespaces=Tg(d.namespaces),this.persist("namespaces",this.namespaces))}).catch(d=>{if(d.message!==Ru)throw d;n++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(r,n){try{if(!this.session)return;const[o,a]=this.validateChain(r);this.getProvider(o).setDefaultChain(a,n)}catch(o){if(!/Please call connect/.test(o.message))throw o}}async cleanupPendingPairings(r={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if((0,_.qt)(n)){for(const o of n)r.deletePairings?this.client.core.expirer.set(o.topic,0):await this.client.core.relayer.subscriber.unsubscribe(o.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const r=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[r]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await ca.init({logger:this.providerOpts.logger||Fu,relayUrl:this.providerOpts.relayUrl||mg,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const r=[...new Set(Object.keys(this.session.namespaces).map(n=>(0,_.M)(n)))];la("client",this.client),la("events",this.events),la("disableProviderPing",this.disableProviderPing),r.forEach(n=>{if(!this.session)return;const o=Rg(n,this.session),a=Uu(o),d=Ag(this.namespaces,this.optionalNamespaces),b=fa(Ls({},d[n]),{accounts:o,chains:a});switch(n){case"eip155":this.rpcProviders[n]=new Ng({namespace:b});break;case"solana":this.rpcProviders[n]=new Lg({namespace:b});break;case"cosmos":this.rpcProviders[n]=new Fg({namespace:b});break;case"polkadot":this.rpcProviders[n]=new Dg({namespace:b});break;case"cip34":this.rpcProviders[n]=new jg({namespace:b});break;case"elrond":this.rpcProviders[n]=new Mg({namespace:b});break;case"multiversx":this.rpcProviders[n]=new zg({namespace:b});break;case"near":this.rpcProviders[n]=new Ug({namespace:b});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",r=>{this.events.emit("session_ping",r)}),this.client.on("session_event",r=>{const{params:n}=r,{event:o}=n;if(o.name==="accountsChanged"){const a=o.data;a&&(0,_.qt)(a)&&this.events.emit("accountsChanged",a.map(Cg))}else if(o.name==="chainChanged"){const a=n.chainId,d=n.event.data,b=(0,_.M)(a),A=ha(a)!==ha(d)?`${b}:${ha(d)}`:a;this.onChainChanged(A)}else this.events.emit(o.name,o.data);this.events.emit("session_event",r)}),this.client.on("session_update",({topic:r,params:n})=>{var o;const{namespaces:a}=n,d=(o=this.client)==null?void 0:o.session.get(r);this.session=fa(Ls({},d),{namespaces:a}),this.onSessionUpdate(),this.events.emit("session_update",{topic:r,params:n})}),this.client.on("session_delete",async r=>{await this.cleanup(),this.events.emit("session_delete",r),this.events.emit("disconnect",fa(Ls({},(0,_.D6)("USER_DISCONNECTED")),{data:r.topic}))}),this.on(xi.DEFAULT_CHAIN_CHANGED,r=>{this.onChainChanged(r,!0)})}getProvider(r){if(!this.rpcProviders[r])throw new Error(`Provider not found: ${r}`);return this.rpcProviders[r]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(r=>{var n;this.getProvider(r).updateNamespace((n=this.session)==null?void 0:n.namespaces[r])})}setNamespaces(r){const{namespaces:n,optionalNamespaces:o,sessionProperties:a}=r;n&&Object.keys(n).length&&(this.namespaces=n),o&&Object.keys(o).length&&(this.optionalNamespaces=o),this.sessionProperties=a,this.persist("namespaces",n),this.persist("optionalNamespaces",o)}validateChain(r){const[n,o]=(r==null?void 0:r.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,o];if(n&&!Object.keys(this.namespaces||{}).map(b=>(0,_.M)(b)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&o)return[n,o];const a=(0,_.M)(Object.keys(this.namespaces)[0]),d=this.rpcProviders[a].getDefaultChain();return[a,d]}async requestAccounts(){const[r]=this.validateChain();return await this.getProvider(r).requestAccounts()}onChainChanged(r,n=!1){var o;if(!this.namespaces)return;const[a,d]=this.validateChain(r);n||this.getProvider(a).setDefaultChain(d),((o=this.namespaces[a])!=null?o:this.namespaces[`${a}:${d}`]).defaultChain=d,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",d)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(r,n){this.client.core.storage.setItem(`${ju}/${r}`,n)}async getFromStore(r){return await this.client.core.storage.getItem(`${ju}/${r}`)}}const Vg=da,kg="wc",Gg="ethereum_provider",Wg=`${kg}@2:${Gg}:`,Jg="https://rpc.walletconnect.com/v1/",pa=["eth_sendTransaction","personal_sign"],Zg=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],ga=["chainChanged","accountsChanged"],Qg=["chainChanged","accountsChanged","message","disconnect","connect"];var Yg=Object.defineProperty,Xg=Object.defineProperties,e0=Object.getOwnPropertyDescriptors,Ku=Object.getOwnPropertySymbols,t0=Object.prototype.hasOwnProperty,r0=Object.prototype.propertyIsEnumerable,Vu=(h,r,n)=>r in h?Yg(h,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):h[r]=n,kn=(h,r)=>{for(var n in r||(r={}))t0.call(r,n)&&Vu(h,n,r[n]);if(Ku)for(var n of Ku(r))r0.call(r,n)&&Vu(h,n,r[n]);return h},ku=(h,r)=>Xg(h,e0(r));function Fs(h){return Number(h[0].split(":")[1])}function ya(h){return`0x${h.toString(16)}`}function i0(h){const{chains:r,optionalChains:n,methods:o,optionalMethods:a,events:d,optionalEvents:b,rpcMap:A}=h;if(!(0,_.qt)(r))throw new Error("Invalid chains");const $={chains:r,methods:o||pa,events:d||ga,rpcMap:kn({},r.length?{[Fs(r)]:A[Fs(r)]}:{})},R=d==null?void 0:d.filter(Se=>!ga.includes(Se)),B=o==null?void 0:o.filter(Se=>!pa.includes(Se));if(!n&&!b&&!a&&!(R!=null&&R.length)&&!(B!=null&&B.length))return{required:r.length?$:void 0};const Y=(R==null?void 0:R.length)&&(B==null?void 0:B.length)||!n,se={chains:[...new Set(Y?$.chains.concat(n||[]):n)],methods:[...new Set($.methods.concat(a!=null&&a.length?a:Zg))],events:[...new Set($.events.concat(b!=null&&b.length?b:Qg))],rpcMap:A};return{required:r.length?$:void 0,optional:n.length?se:void 0}}class va{constructor(){this.events=new Z.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=Wg,this.on=(r,n)=>(this.events.on(r,n),this),this.once=(r,n)=>(this.events.once(r,n),this),this.removeListener=(r,n)=>(this.events.removeListener(r,n),this),this.off=(r,n)=>(this.events.off(r,n),this),this.parseAccount=r=>this.isCompatibleChainId(r)?this.parseAccountId(r).address:r,this.signer={},this.rpc={}}static async init(r){const n=new va;return await n.initialize(r),n}async request(r){return await this.signer.request(r,this.formatChainId(this.chainId))}sendAsync(r,n){this.signer.sendAsync(r,n,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(r){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(r);const{required:n,optional:o}=i0(this.rpc);try{const a=await new Promise(async(b,A)=>{var $;this.rpc.showQrModal&&(($=this.modal)==null||$.subscribeModal(R=>{!R.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),A(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(ku(kn({namespaces:kn({},n&&{[this.namespace]:n})},o&&{optionalNamespaces:{[this.namespace]:o}}),{pairingTopic:r==null?void 0:r.pairingTopic})).then(R=>{b(R)}).catch(R=>{A(new Error(R.message))})});if(!a)return;const d=(0,_.gu)(a.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:d),this.setAccounts(d),this.events.emit("connect",{chainId:ya(this.chainId)})}catch(a){throw this.signer.logger.error(a),a}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",r=>{const{params:n}=r,{event:o}=n;o.name==="accountsChanged"?(this.accounts=this.parseAccounts(o.data),this.events.emit("accountsChanged",this.accounts)):o.name==="chainChanged"?this.setChainId(this.formatChainId(o.data)):this.events.emit(o.name,o.data),this.events.emit("session_event",r)}),this.signer.on("chainChanged",r=>{const n=parseInt(r);this.chainId=n,this.events.emit("chainChanged",ya(this.chainId)),this.persist()}),this.signer.on("session_update",r=>{this.events.emit("session_update",r)}),this.signer.on("session_delete",r=>{this.reset(),this.events.emit("session_delete",r),this.events.emit("disconnect",ku(kn({},(0,_.D6)("USER_DISCONNECTED")),{data:r.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",r=>{var n,o;this.rpc.showQrModal&&((n=this.modal)==null||n.closeModal(),(o=this.modal)==null||o.openModal({uri:r})),this.events.emit("display_uri",r)})}switchEthereumChain(r){this.request({method:"wallet_switchEthereumChain",params:[{chainId:r.toString(16)}]})}isCompatibleChainId(r){return typeof r=="string"?r.startsWith(`${this.namespace}:`):!1}formatChainId(r){return`${this.namespace}:${r}`}parseChainId(r){return Number(r.split(":")[1])}setChainIds(r){const n=r.filter(o=>this.isCompatibleChainId(o)).map(o=>this.parseChainId(o));n.length&&(this.chainId=n[0],this.events.emit("chainChanged",ya(this.chainId)),this.persist())}setChainId(r){if(this.isCompatibleChainId(r)){const n=this.parseChainId(r);this.chainId=n,this.switchEthereumChain(n)}}parseAccountId(r){const[n,o,a]=r.split(":");return{chainId:`${n}:${o}`,address:a}}setAccounts(r){this.accounts=r.filter(n=>this.parseChainId(this.parseAccountId(n).chainId)===this.chainId).map(n=>this.parseAccountId(n).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(r){var n,o;const a=(n=r==null?void 0:r.chains)!=null?n:[],d=(o=r==null?void 0:r.optionalChains)!=null?o:[],b=a.concat(d);if(!b.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const A=a.length?(r==null?void 0:r.methods)||pa:[],$=a.length?(r==null?void 0:r.events)||ga:[],R=(r==null?void 0:r.optionalMethods)||[],B=(r==null?void 0:r.optionalEvents)||[],Y=(r==null?void 0:r.rpcMap)||this.buildRpcMap(b,r.projectId),se=(r==null?void 0:r.qrModalOptions)||void 0;return{chains:a==null?void 0:a.map(Se=>this.formatChainId(Se)),optionalChains:d.map(Se=>this.formatChainId(Se)),methods:A,events:$,optionalMethods:R,optionalEvents:B,rpcMap:Y,showQrModal:!!(r!=null&&r.showQrModal),qrModalOptions:se,projectId:r.projectId,metadata:r.metadata}}buildRpcMap(r,n){const o={};return r.forEach(a=>{o[a]=this.getRpcUrl(a,n)}),o}async initialize(r){if(this.rpc=this.getRpcConfig(r),this.chainId=this.rpc.chains.length?Fs(this.rpc.chains):Fs(this.rpc.optionalChains),this.signer=await Vg.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:r.disableProviderPing,relayUrl:r.relayUrl,storageOptions:r.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let n;try{const{WalletConnectModal:o}=await K.e(343).then(K.bind(K,59343));n=o}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(n)try{this.modal=new n(kn({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(o){throw this.signer.logger.error(o),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(r){if(!r)return;const{chains:n,optionalChains:o,rpcMap:a}=r;n&&(0,_.qt)(n)&&(this.rpc.chains=n.map(d=>this.formatChainId(d)),n.forEach(d=>{this.rpc.rpcMap[d]=(a==null?void 0:a[d])||this.getRpcUrl(d)})),o&&(0,_.qt)(o)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=o==null?void 0:o.map(d=>this.formatChainId(d)),o.forEach(d=>{this.rpc.rpcMap[d]=(a==null?void 0:a[d])||this.getRpcUrl(d)}))}getRpcUrl(r,n){var o;return((o=this.rpc.rpcMap)==null?void 0:o[r])||`${Jg}?chainId=eip155:${r}&projectId=${n||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const r=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),n=this.session.namespaces[`${this.namespace}:${r}`]?this.session.namespaces[`${this.namespace}:${r}`]:this.session.namespaces[this.namespace];this.setChainIds(r?[this.formatChainId(r)]:n==null?void 0:n.accounts),this.setAccounts(n==null?void 0:n.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(r){return typeof r=="string"||r instanceof String?[this.parseAccount(r)]:r.map(n=>this.parseAccount(n))}}const n0=va},38200:function(He,q,K){"use strict";K.d(q,{q:function(){return Z}});class Z{}},30997:function(He,q,K){"use strict";K.r(q),K.d(q,{IEvents:function(){return Z.q}});var Z=K(38200)},32568:function(He,q,K){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.HEARTBEAT_EVENTS=q.HEARTBEAT_INTERVAL=void 0;const Z=K(66736);q.HEARTBEAT_INTERVAL=Z.FIVE_SECONDS,q.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},53401:function(He,q,K){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),K(57875).__exportStar(K(32568),q)},38969:function(He,q,K){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.HeartBeat=void 0;const Z=K(57875),ve=K(17187),_=K(66736),Ie=K(1614),J=K(53401);class Ee extends Ie.IHeartBeat{constructor(ae){super(ae),this.events=new ve.EventEmitter,this.interval=J.HEARTBEAT_INTERVAL,this.interval=(ae==null?void 0:ae.interval)||J.HEARTBEAT_INTERVAL}static init(ae){return Z.__awaiter(this,void 0,void 0,function*(){const ue=new Ee(ae);return yield ue.init(),ue})}init(){return Z.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(ae,ue){this.events.on(ae,ue)}once(ae,ue){this.events.once(ae,ue)}off(ae,ue){this.events.off(ae,ue)}removeListener(ae,ue){this.events.removeListener(ae,ue)}initialize(){return Z.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),_.toMiliseconds(this.interval))})}pulse(){this.events.emit(J.HEARTBEAT_EVENTS.pulse)}}q.HeartBeat=Ee},90772:function(He,q,K){"use strict";Object.defineProperty(q,"__esModule",{value:!0});const Z=K(57875);Z.__exportStar(K(38969),q),Z.__exportStar(K(1614),q),Z.__exportStar(K(53401),q)},44174:function(He,q,K){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.IHeartBeat=void 0;const Z=K(30997);class ve extends Z.IEvents{constructor(Ie){super()}}q.IHeartBeat=ve},1614:function(He,q,K){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),K(57875).__exportStar(K(44174),q)},65727:function(He,q){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.PINO_CUSTOM_CONTEXT_KEY=q.PINO_LOGGER_DEFAULTS=void 0,q.PINO_LOGGER_DEFAULTS={level:"info"},q.PINO_CUSTOM_CONTEXT_KEY="custom_context"},9107:function(He,q,K){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.pino=void 0;const Z=K(85906),ve=Z.__importDefault(K(36559));Object.defineProperty(q,"pino",{enumerable:!0,get:function(){return ve.default}}),Z.__exportStar(K(65727),q),Z.__exportStar(K(58048),q)},58048:function(He,q,K){"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.generateChildLogger=q.formatChildLoggerContext=q.getLoggerContext=q.setBrowserLoggerContext=q.getBrowserLoggerContext=q.getDefaultLoggerOptions=void 0;const Z=K(65727);function ve(ae){return Object.assign(Object.assign({},ae),{level:(ae==null?void 0:ae.level)||Z.PINO_LOGGER_DEFAULTS.level})}q.getDefaultLoggerOptions=ve;function _(ae,ue=Z.PINO_CUSTOM_CONTEXT_KEY){return ae[ue]||""}q.getBrowserLoggerContext=_;function Ie(ae,ue,fe=Z.PINO_CUSTOM_CONTEXT_KEY){return ae[fe]=ue,ae}q.setBrowserLoggerContext=Ie;function J(ae,ue=Z.PINO_CUSTOM_CONTEXT_KEY){let fe="";return typeof ae.bindings>"u"?fe=_(ae,ue):fe=ae.bindings().context||"",fe}q.getLoggerContext=J;function Ee(ae,ue,fe=Z.PINO_CUSTOM_CONTEXT_KEY){const Te=J(ae,fe);return Te.trim()?`${Te}/${ue}`:ue}q.formatChildLoggerContext=Ee;function De(ae,ue,fe=Z.PINO_CUSTOM_CONTEXT_KEY){const Te=Ee(ae,ue,fe),Pe=ae.child({context:Te});return Ie(Pe,Te,fe)}q.generateChildLogger=De},43014:function(){},54098:function(He,q){var K=typeof self<"u"?self:this,Z=function(){function _(){this.fetch=!1,this.DOMException=K.DOMException}return _.prototype=K,new _}();(function(_){var Ie=function(J){var Ee={searchParams:"URLSearchParams"in _,iterable:"Symbol"in _&&"iterator"in Symbol,blob:"FileReader"in _&&"Blob"in _&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in _,arrayBuffer:"ArrayBuffer"in _};function De(p){return p&&DataView.prototype.isPrototypeOf(p)}if(Ee.arrayBuffer)var ae=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],ue=ArrayBuffer.isView||function(p){return p&&ae.indexOf(Object.prototype.toString.call(p))>-1};function fe(p){if(typeof p!="string"&&(p=String(p)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(p))throw new TypeError("Invalid character in header field name");return p.toLowerCase()}function Te(p){return typeof p!="string"&&(p=String(p)),p}function Pe(p){var g={next:function(){var y=p.shift();return{done:y===void 0,value:y}}};return Ee.iterable&&(g[Symbol.iterator]=function(){return g}),g}function me(p){this.map={},p instanceof me?p.forEach(function(g,y){this.append(y,g)},this):Array.isArray(p)?p.forEach(function(g){this.append(g[0],g[1])},this):p&&Object.getOwnPropertyNames(p).forEach(function(g){this.append(g,p[g])},this)}me.prototype.append=function(p,g){p=fe(p),g=Te(g);var y=this.map[p];this.map[p]=y?y+", "+g:g},me.prototype.delete=function(p){delete this.map[fe(p)]},me.prototype.get=function(p){return p=fe(p),this.has(p)?this.map[p]:null},me.prototype.has=function(p){return this.map.hasOwnProperty(fe(p))},me.prototype.set=function(p,g){this.map[fe(p)]=Te(g)},me.prototype.forEach=function(p,g){for(var y in this.map)this.map.hasOwnProperty(y)&&p.call(g,this.map[y],y,this)},me.prototype.keys=function(){var p=[];return this.forEach(function(g,y){p.push(y)}),Pe(p)},me.prototype.values=function(){var p=[];return this.forEach(function(g){p.push(g)}),Pe(p)},me.prototype.entries=function(){var p=[];return this.forEach(function(g,y){p.push([y,g])}),Pe(p)},Ee.iterable&&(me.prototype[Symbol.iterator]=me.prototype.entries);function le(p){if(p.bodyUsed)return Promise.reject(new TypeError("Already read"));p.bodyUsed=!0}function ke(p){return new Promise(function(g,y){p.onload=function(){g(p.result)},p.onerror=function(){y(p.error)}})}function at(p){var g=new FileReader,y=ke(g);return g.readAsArrayBuffer(p),y}function Je(p){var g=new FileReader,y=ke(g);return g.readAsText(p),y}function Me(p){for(var g=new Uint8Array(p),y=new Array(g.length),E=0;E<g.length;E++)y[E]=String.fromCharCode(g[E]);return y.join("")}function ce(p){if(p.slice)return p.slice(0);var g=new Uint8Array(p.byteLength);return g.set(new Uint8Array(p)),g.buffer}function re(){return this.bodyUsed=!1,this._initBody=function(p){this._bodyInit=p,p?typeof p=="string"?this._bodyText=p:Ee.blob&&Blob.prototype.isPrototypeOf(p)?this._bodyBlob=p:Ee.formData&&FormData.prototype.isPrototypeOf(p)?this._bodyFormData=p:Ee.searchParams&&URLSearchParams.prototype.isPrototypeOf(p)?this._bodyText=p.toString():Ee.arrayBuffer&&Ee.blob&&De(p)?(this._bodyArrayBuffer=ce(p.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Ee.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(p)||ue(p))?this._bodyArrayBuffer=ce(p):this._bodyText=p=Object.prototype.toString.call(p):this._bodyText="",this.headers.get("content-type")||(typeof p=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Ee.searchParams&&URLSearchParams.prototype.isPrototypeOf(p)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Ee.blob&&(this.blob=function(){var p=le(this);if(p)return p;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?le(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(at)}),this.text=function(){var p=le(this);if(p)return p;if(this._bodyBlob)return Je(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(Me(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Ee.formData&&(this.formData=function(){return this.text().then(Q)}),this.json=function(){return this.text().then(JSON.parse)},this}var he=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function de(p){var g=p.toUpperCase();return he.indexOf(g)>-1?g:p}function L(p,g){g=g||{};var y=g.body;if(p instanceof L){if(p.bodyUsed)throw new TypeError("Already read");this.url=p.url,this.credentials=p.credentials,g.headers||(this.headers=new me(p.headers)),this.method=p.method,this.mode=p.mode,this.signal=p.signal,!y&&p._bodyInit!=null&&(y=p._bodyInit,p.bodyUsed=!0)}else this.url=String(p);if(this.credentials=g.credentials||this.credentials||"same-origin",(g.headers||!this.headers)&&(this.headers=new me(g.headers)),this.method=de(g.method||this.method||"GET"),this.mode=g.mode||this.mode||null,this.signal=g.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&y)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(y)}L.prototype.clone=function(){return new L(this,{body:this._bodyInit})};function Q(p){var g=new FormData;return p.trim().split("&").forEach(function(y){if(y){var E=y.split("="),F=E.shift().replace(/\+/g," "),j=E.join("=").replace(/\+/g," ");g.append(decodeURIComponent(F),decodeURIComponent(j))}}),g}function ne(p){var g=new me,y=p.replace(/\r?\n[\t ]+/g," ");return y.split(/\r?\n/).forEach(function(E){var F=E.split(":"),j=F.shift().trim();if(j){var W=F.join(":").trim();g.append(j,W)}}),g}re.call(L.prototype);function _e(p,g){g||(g={}),this.type="default",this.status=g.status===void 0?200:g.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in g?g.statusText:"OK",this.headers=new me(g.headers),this.url=g.url||"",this._initBody(p)}re.call(_e.prototype),_e.prototype.clone=function(){return new _e(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new me(this.headers),url:this.url})},_e.error=function(){var p=new _e(null,{status:0,statusText:""});return p.type="error",p};var m=[301,302,303,307,308];_e.redirect=function(p,g){if(m.indexOf(g)===-1)throw new RangeError("Invalid status code");return new _e(null,{status:g,headers:{location:p}})},J.DOMException=_.DOMException;try{new J.DOMException}catch{J.DOMException=function(g,y){this.message=g,this.name=y;var E=Error(g);this.stack=E.stack},J.DOMException.prototype=Object.create(Error.prototype),J.DOMException.prototype.constructor=J.DOMException}function I(p,g){return new Promise(function(y,E){var F=new L(p,g);if(F.signal&&F.signal.aborted)return E(new J.DOMException("Aborted","AbortError"));var j=new XMLHttpRequest;function W(){j.abort()}j.onload=function(){var O={status:j.status,statusText:j.statusText,headers:ne(j.getAllResponseHeaders()||"")};O.url="responseURL"in j?j.responseURL:O.headers.get("X-Request-URL");var V="response"in j?j.response:j.responseText;y(new _e(V,O))},j.onerror=function(){E(new TypeError("Network request failed"))},j.ontimeout=function(){E(new TypeError("Network request failed"))},j.onabort=function(){E(new J.DOMException("Aborted","AbortError"))},j.open(F.method,F.url,!0),F.credentials==="include"?j.withCredentials=!0:F.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&Ee.blob&&(j.responseType="blob"),F.headers.forEach(function(O,V){j.setRequestHeader(V,O)}),F.signal&&(F.signal.addEventListener("abort",W),j.onreadystatechange=function(){j.readyState===4&&F.signal.removeEventListener("abort",W)}),j.send(typeof F._bodyInit>"u"?null:F._bodyInit)})}return I.polyfill=!0,_.fetch||(_.fetch=I,_.Headers=me,_.Request=L,_.Response=_e),J.Headers=me,J.Request=L,J.Response=_e,J.fetch=I,Object.defineProperty(J,"__esModule",{value:!0}),J}({})})(Z),Z.fetch.ponyfill=!0,delete Z.fetch.polyfill;var ve=Z;q=ve.fetch,q.default=ve.fetch,q.fetch=ve.fetch,q.Headers=ve.Headers,q.Request=ve.Request,q.Response=ve.Response,He.exports=q},17187:function(He){"use strict";var q=typeof Reflect=="object"?Reflect:null,K=q&&typeof q.apply=="function"?q.apply:function(re,he,de){return Function.prototype.apply.call(re,he,de)},Z;q&&typeof q.ownKeys=="function"?Z=q.ownKeys:Object.getOwnPropertySymbols?Z=function(re){return Object.getOwnPropertyNames(re).concat(Object.getOwnPropertySymbols(re))}:Z=function(re){return Object.getOwnPropertyNames(re)};function ve(ce){console&&console.warn&&console.warn(ce)}var _=Number.isNaN||function(re){return re!==re};function Ie(){Ie.init.call(this)}He.exports=Ie,He.exports.once=at,Ie.EventEmitter=Ie,Ie.prototype._events=void 0,Ie.prototype._eventsCount=0,Ie.prototype._maxListeners=void 0;var J=10;function Ee(ce){if(typeof ce!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ce)}Object.defineProperty(Ie,"defaultMaxListeners",{enumerable:!0,get:function(){return J},set:function(ce){if(typeof ce!="number"||ce<0||_(ce))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ce+".");J=ce}}),Ie.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ie.prototype.setMaxListeners=function(re){if(typeof re!="number"||re<0||_(re))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+re+".");return this._maxListeners=re,this};function De(ce){return ce._maxListeners===void 0?Ie.defaultMaxListeners:ce._maxListeners}Ie.prototype.getMaxListeners=function(){return De(this)},Ie.prototype.emit=function(re){for(var he=[],de=1;de<arguments.length;de++)he.push(arguments[de]);var L=re==="error",Q=this._events;if(Q!==void 0)L=L&&Q.error===void 0;else if(!L)return!1;if(L){var ne;if(he.length>0&&(ne=he[0]),ne instanceof Error)throw ne;var _e=new Error("Unhandled error."+(ne?" ("+ne.message+")":""));throw _e.context=ne,_e}var m=Q[re];if(m===void 0)return!1;if(typeof m=="function")K(m,this,he);else for(var I=m.length,p=me(m,I),de=0;de<I;++de)K(p[de],this,he);return!0};function ae(ce,re,he,de){var L,Q,ne;if(Ee(he),Q=ce._events,Q===void 0?(Q=ce._events=Object.create(null),ce._eventsCount=0):(Q.newListener!==void 0&&(ce.emit("newListener",re,he.listener?he.listener:he),Q=ce._events),ne=Q[re]),ne===void 0)ne=Q[re]=he,++ce._eventsCount;else if(typeof ne=="function"?ne=Q[re]=de?[he,ne]:[ne,he]:de?ne.unshift(he):ne.push(he),L=De(ce),L>0&&ne.length>L&&!ne.warned){ne.warned=!0;var _e=new Error("Possible EventEmitter memory leak detected. "+ne.length+" "+String(re)+" listeners added. Use emitter.setMaxListeners() to increase limit");_e.name="MaxListenersExceededWarning",_e.emitter=ce,_e.type=re,_e.count=ne.length,ve(_e)}return ce}Ie.prototype.addListener=function(re,he){return ae(this,re,he,!1)},Ie.prototype.on=Ie.prototype.addListener,Ie.prototype.prependListener=function(re,he){return ae(this,re,he,!0)};function ue(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function fe(ce,re,he){var de={fired:!1,wrapFn:void 0,target:ce,type:re,listener:he},L=ue.bind(de);return L.listener=he,de.wrapFn=L,L}Ie.prototype.once=function(re,he){return Ee(he),this.on(re,fe(this,re,he)),this},Ie.prototype.prependOnceListener=function(re,he){return Ee(he),this.prependListener(re,fe(this,re,he)),this},Ie.prototype.removeListener=function(re,he){var de,L,Q,ne,_e;if(Ee(he),L=this._events,L===void 0)return this;if(de=L[re],de===void 0)return this;if(de===he||de.listener===he)--this._eventsCount===0?this._events=Object.create(null):(delete L[re],L.removeListener&&this.emit("removeListener",re,de.listener||he));else if(typeof de!="function"){for(Q=-1,ne=de.length-1;ne>=0;ne--)if(de[ne]===he||de[ne].listener===he){_e=de[ne].listener,Q=ne;break}if(Q<0)return this;Q===0?de.shift():le(de,Q),de.length===1&&(L[re]=de[0]),L.removeListener!==void 0&&this.emit("removeListener",re,_e||he)}return this},Ie.prototype.off=Ie.prototype.removeListener,Ie.prototype.removeAllListeners=function(re){var he,de,L;if(de=this._events,de===void 0)return this;if(de.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):de[re]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete de[re]),this;if(arguments.length===0){var Q=Object.keys(de),ne;for(L=0;L<Q.length;++L)ne=Q[L],ne!=="removeListener"&&this.removeAllListeners(ne);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(he=de[re],typeof he=="function")this.removeListener(re,he);else if(he!==void 0)for(L=he.length-1;L>=0;L--)this.removeListener(re,he[L]);return this};function Te(ce,re,he){var de=ce._events;if(de===void 0)return[];var L=de[re];return L===void 0?[]:typeof L=="function"?he?[L.listener||L]:[L]:he?ke(L):me(L,L.length)}Ie.prototype.listeners=function(re){return Te(this,re,!0)},Ie.prototype.rawListeners=function(re){return Te(this,re,!1)},Ie.listenerCount=function(ce,re){return typeof ce.listenerCount=="function"?ce.listenerCount(re):Pe.call(ce,re)},Ie.prototype.listenerCount=Pe;function Pe(ce){var re=this._events;if(re!==void 0){var he=re[ce];if(typeof he=="function")return 1;if(he!==void 0)return he.length}return 0}Ie.prototype.eventNames=function(){return this._eventsCount>0?Z(this._events):[]};function me(ce,re){for(var he=new Array(re),de=0;de<re;++de)he[de]=ce[de];return he}function le(ce,re){for(;re+1<ce.length;re++)ce[re]=ce[re+1];ce.pop()}function ke(ce){for(var re=new Array(ce.length),he=0;he<re.length;++he)re[he]=ce[he].listener||ce[he];return re}function at(ce,re){return new Promise(function(he,de){function L(ne){ce.removeListener(re,Q),de(ne)}function Q(){typeof ce.removeListener=="function"&&ce.removeListener("error",L),he([].slice.call(arguments))}Me(ce,re,Q,{once:!0}),re!=="error"&&Je(ce,L,{once:!0})})}function Je(ce,re,he){typeof ce.on=="function"&&Me(ce,"error",re,he)}function Me(ce,re,he,de){if(typeof ce.on=="function")de.once?ce.once(re,he):ce.on(re,he);else if(typeof ce.addEventListener=="function")ce.addEventListener(re,function L(Q){de.once&&ce.removeEventListener(re,L),he(Q)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ce)}},72307:function(He,q,K){He=K.nmd(He);var Z=200,ve="__lodash_hash_undefined__",_=1,Ie=2,J=9007199254740991,Ee="[object Arguments]",De="[object Array]",ae="[object AsyncFunction]",ue="[object Boolean]",fe="[object Date]",Te="[object Error]",Pe="[object Function]",me="[object GeneratorFunction]",le="[object Map]",ke="[object Number]",at="[object Null]",Je="[object Object]",Me="[object Promise]",ce="[object Proxy]",re="[object RegExp]",he="[object Set]",de="[object String]",L="[object Symbol]",Q="[object Undefined]",ne="[object WeakMap]",_e="[object ArrayBuffer]",m="[object DataView]",I="[object Float32Array]",p="[object Float64Array]",g="[object Int8Array]",y="[object Int16Array]",E="[object Int32Array]",F="[object Uint8Array]",j="[object Uint8ClampedArray]",W="[object Uint16Array]",O="[object Uint32Array]",V=/[\\^$.*+?()[\]{}|]/g,Ae=/^\[object .+?Constructor\]$/,ge=/^(?:0|[1-9]\d*)$/,Re={};Re[I]=Re[p]=Re[g]=Re[y]=Re[E]=Re[F]=Re[j]=Re[W]=Re[O]=!0,Re[Ee]=Re[De]=Re[_e]=Re[ue]=Re[m]=Re[fe]=Re[Te]=Re[Pe]=Re[le]=Re[ke]=Re[Je]=Re[re]=Re[he]=Re[de]=Re[ne]=!1;var Tt=typeof K.g=="object"&&K.g&&K.g.Object===Object&&K.g,wr=typeof self=="object"&&self&&self.Object===Object&&self,Et=Tt||wr||Function("return this")(),H=q&&!q.nodeType&&q,k=H&&!0&&He&&!He.nodeType&&He,M=k&&k.exports===H,l=M&&Tt.process,C=function(){try{return l&&l.binding&&l.binding("util")}catch{}}(),Ce=C&&C.isTypedArray;function $e(x,T){for(var ie=-1,be=x==null?0:x.length,gt=0,ze=[];++ie<be;){var wt=x[ie];T(wt,ie,x)&&(ze[gt++]=wt)}return ze}function it(x,T){for(var ie=-1,be=T.length,gt=x.length;++ie<be;)x[gt+ie]=T[ie];return x}function mt(x,T){for(var ie=-1,be=x==null?0:x.length;++ie<be;)if(T(x[ie],ie,x))return!0;return!1}function Qe(x,T){for(var ie=-1,be=Array(x);++ie<x;)be[ie]=T(ie);return be}function tt(x){return function(T){return x(T)}}function Xt(x,T){return x.has(T)}function cr(x,T){return x==null?void 0:x[T]}function er(x){var T=-1,ie=Array(x.size);return x.forEach(function(be,gt){ie[++T]=[gt,be]}),ie}function Vt(x,T){return function(ie){return x(T(ie))}}function Mt(x){var T=-1,ie=Array(x.size);return x.forEach(function(be){ie[++T]=be}),ie}var Dt=Array.prototype,xt=Function.prototype,ct=Object.prototype,dt=Et["__core-js_shared__"],_t=xt.toString,ht=ct.hasOwnProperty,zt=function(){var x=/[^.]+$/.exec(dt&&dt.keys&&dt.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}(),tr=ct.toString,hr=RegExp("^"+_t.call(ht).replace(V,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lr=M?Et.Buffer:void 0,Nt=Et.Symbol,je=Et.Uint8Array,rr=ct.propertyIsEnumerable,qr=Dt.splice,yr=Nt?Nt.toStringTag:void 0,Xr=Object.getOwnPropertySymbols,mi=lr?lr.isBuffer:void 0,Li=Vt(Object.keys,Object),_i=Qi(Et,"DataView"),ai=Qi(Et,"Map"),Ut=Qi(Et,"Promise"),Lt=Qi(Et,"Set"),$t=Qi(Et,"WeakMap"),Pt=Qi(Object,"create"),ir=ui(_i),kt=ui(ai),Gt=ui(Ut),nr=ui(Lt),Wt=ui($t),Jt=Nt?Nt.prototype:void 0,Ft=Jt?Jt.valueOf:void 0;function pt(x){var T=-1,ie=x==null?0:x.length;for(this.clear();++T<ie;){var be=x[T];this.set(be[0],be[1])}}function Zt(){this.__data__=Pt?Pt(null):{},this.size=0}function we(x){var T=this.has(x)&&delete this.__data__[x];return this.size-=T?1:0,T}function Qt(x){var T=this.__data__;if(Pt){var ie=T[x];return ie===ve?void 0:ie}return ht.call(T,x)?T[x]:void 0}function Yt(x){var T=this.__data__;return Pt?T[x]!==void 0:ht.call(T,x)}function gs(x,T){var ie=this.__data__;return this.size+=this.has(x)?0:1,ie[x]=Pt&&T===void 0?ve:T,this}pt.prototype.clear=Zt,pt.prototype.delete=we,pt.prototype.get=Qt,pt.prototype.has=Yt,pt.prototype.set=gs;function Br(x){var T=-1,ie=x==null?0:x.length;for(this.clear();++T<ie;){var be=x[T];this.set(be[0],be[1])}}function Co(){this.__data__=[],this.size=0}function To(x){var T=this.__data__,ie=pn(T,x);if(ie<0)return!1;var be=T.length-1;return ie==be?T.pop():qr.call(T,ie,1),--this.size,!0}function Do(x){var T=this.__data__,ie=pn(T,x);return ie<0?void 0:T[ie][1]}function No(x){return pn(this.__data__,x)>-1}function Lo(x,T){var ie=this.__data__,be=pn(ie,x);return be<0?(++this.size,ie.push([x,T])):ie[be][1]=T,this}Br.prototype.clear=Co,Br.prototype.delete=To,Br.prototype.get=Do,Br.prototype.has=No,Br.prototype.set=Lo;function ci(x){var T=-1,ie=x==null?0:x.length;for(this.clear();++T<ie;){var be=x[T];this.set(be[0],be[1])}}function Fo(){this.size=0,this.__data__={hash:new pt,map:new(ai||Br),string:new pt}}function jo(x){var T=yn(this,x).delete(x);return this.size-=T?1:0,T}function Uc(x){return yn(this,x).get(x)}function Mo(x){return yn(this,x).has(x)}function zo(x,T){var ie=yn(this,x),be=ie.size;return ie.set(x,T),this.size+=ie.size==be?0:1,this}ci.prototype.clear=Fo,ci.prototype.delete=jo,ci.prototype.get=Uc,ci.prototype.has=Mo,ci.prototype.set=zo;function Fi(x){var T=-1,ie=x==null?0:x.length;for(this.__data__=new ci;++T<ie;)this.add(x[T])}function zn(x){return this.__data__.set(x,ve),this}function dn(x){return this.__data__.has(x)}Fi.prototype.add=Fi.prototype.push=zn,Fi.prototype.has=dn;function Nr(x){var T=this.__data__=new Br(x);this.size=T.size}function ys(){this.__data__=new Br,this.size=0}function $c(x){var T=this.__data__,ie=T.delete(x);return this.size=T.size,ie}function Uo(x){return this.__data__.get(x)}function $o(x){return this.__data__.has(x)}function qo(x,T){var ie=this.__data__;if(ie instanceof Br){var be=ie.__data__;if(!ai||be.length<Z-1)return be.push([x,T]),this.size=++ie.size,this;ie=this.__data__=new ci(be)}return ie.set(x,T),this.size=ie.size,this}Nr.prototype.clear=ys,Nr.prototype.delete=$c,Nr.prototype.get=Uo,Nr.prototype.has=$o,Nr.prototype.set=qo;function qc(x,T){var ie=Mi(x),be=!ie&&Vc(x),gt=!ie&&!be&&hi(x),ze=!ie&&!be&&!gt&&Rs(x),wt=ie||be||gt||ze,At=wt?Qe(x.length,String):[],yt=At.length;for(var Ye in x)(T||ht.call(x,Ye))&&!(wt&&(Ye=="length"||gt&&(Ye=="offset"||Ye=="parent")||ze&&(Ye=="buffer"||Ye=="byteLength"||Ye=="byteOffset")||bs(Ye,yt)))&&At.push(Ye);return At}function pn(x,T){for(var ie=x.length;ie--;)if(Is(x[ie][0],T))return ie;return-1}function Bc(x,T,ie){var be=T(x);return Mi(x)?be:it(be,ie(x))}function ji(x){return x==null?x===void 0?Q:at:yr&&yr in Object(x)?Yi(x):Kc(x)}function vs(x){return mn(x)&&ji(x)==Ee}function Bo(x,T,ie,be,gt){return x===T?!0:x==null||T==null||!mn(x)&&!mn(T)?x!==x&&T!==T:Hc(x,T,ie,be,Bo,gt)}function Hc(x,T,ie,be,gt,ze){var wt=Mi(x),At=Mi(T),yt=wt?De:wi(x),Ye=At?De:wi(T);yt=yt==Ee?Je:yt,Ye=Ye==Ee?Je:Ye;var Sr=yt==Je,qt=Ye==Je,fr=yt==Ye;if(fr&&hi(x)){if(!hi(T))return!1;wt=!0,Sr=!1}if(fr&&!Sr)return ze||(ze=new Nr),wt||Rs(x)?ms(x,T,ie,be,gt,ze):ko(x,T,yt,ie,be,gt,ze);if(!(ie&_)){var Lr=Sr&&ht.call(x,"__wrapped__"),Or=qt&&ht.call(T,"__wrapped__");if(Lr||Or){var li=Lr?x.value():x,Hr=Or?T.value():T;return ze||(ze=new Nr),gt(li,Hr,ie,be,ze)}}return fr?(ze||(ze=new Nr),_s(x,T,ie,be,gt,ze)):!1}function Ho(x){if(!Os(x)||Es(x))return!1;var T=Xi(x)?hr:Ae;return T.test(ui(x))}function Ko(x){return mn(x)&&Ss(x.length)&&!!Re[ji(x)]}function Vo(x){if(!xs(x))return Li(x);var T=[];for(var ie in Object(x))ht.call(x,ie)&&ie!="constructor"&&T.push(ie);return T}function ms(x,T,ie,be,gt,ze){var wt=ie&_,At=x.length,yt=T.length;if(At!=yt&&!(wt&&yt>At))return!1;var Ye=ze.get(x);if(Ye&&ze.get(T))return Ye==T;var Sr=-1,qt=!0,fr=ie&Ie?new Fi:void 0;for(ze.set(x,T),ze.set(T,x);++Sr<At;){var Lr=x[Sr],Or=T[Sr];if(be)var li=wt?be(Or,Lr,Sr,T,x,ze):be(Lr,Or,Sr,x,T,ze);if(li!==void 0){if(li)continue;qt=!1;break}if(fr){if(!mt(T,function(Hr,fi){if(!Xt(fr,fi)&&(Lr===Hr||gt(Lr,Hr,ie,be,ze)))return fr.push(fi)})){qt=!1;break}}else if(!(Lr===Or||gt(Lr,Or,ie,be,ze))){qt=!1;break}}return ze.delete(x),ze.delete(T),qt}function ko(x,T,ie,be,gt,ze,wt){switch(ie){case m:if(x.byteLength!=T.byteLength||x.byteOffset!=T.byteOffset)return!1;x=x.buffer,T=T.buffer;case _e:return!(x.byteLength!=T.byteLength||!ze(new je(x),new je(T)));case ue:case fe:case ke:return Is(+x,+T);case Te:return x.name==T.name&&x.message==T.message;case re:case de:return x==T+"";case le:var At=er;case he:var yt=be&_;if(At||(At=Mt),x.size!=T.size&&!yt)return!1;var Ye=wt.get(x);if(Ye)return Ye==T;be|=Ie,wt.set(x,T);var Sr=ms(At(x),At(T),be,gt,ze,wt);return wt.delete(x),Sr;case L:if(Ft)return Ft.call(x)==Ft.call(T)}return!1}function _s(x,T,ie,be,gt,ze){var wt=ie&_,At=gn(x),yt=At.length,Ye=gn(T),Sr=Ye.length;if(yt!=Sr&&!wt)return!1;for(var qt=yt;qt--;){var fr=At[qt];if(!(wt?fr in T:ht.call(T,fr)))return!1}var Lr=ze.get(x);if(Lr&&ze.get(T))return Lr==T;var Or=!0;ze.set(x,T),ze.set(T,x);for(var li=wt;++qt<yt;){fr=At[qt];var Hr=x[fr],fi=T[fr];if(be)var As=wt?be(fi,Hr,fr,T,x,ze):be(Hr,fi,fr,x,T,ze);if(!(As===void 0?Hr===fi||gt(Hr,fi,ie,be,ze):As)){Or=!1;break}li||(li=fr=="constructor")}if(Or&&!li){var _n=x.constructor,wn=T.constructor;_n!=wn&&"constructor"in x&&"constructor"in T&&!(typeof _n=="function"&&_n instanceof _n&&typeof wn=="function"&&wn instanceof wn)&&(Or=!1)}return ze.delete(x),ze.delete(T),Or}function gn(x){return Bc(x,Wo,ws)}function yn(x,T){var ie=x.__data__;return Go(T)?ie[typeof T=="string"?"string":"hash"]:ie.map}function Qi(x,T){var ie=cr(x,T);return Ho(ie)?ie:void 0}function Yi(x){var T=ht.call(x,yr),ie=x[yr];try{x[yr]=void 0;var be=!0}catch{}var gt=tr.call(x);return be&&(T?x[yr]=ie:delete x[yr]),gt}var ws=Xr?function(x){return x==null?[]:(x=Object(x),$e(Xr(x),function(T){return rr.call(x,T)}))}:Jo,wi=ji;(_i&&wi(new _i(new ArrayBuffer(1)))!=m||ai&&wi(new ai)!=le||Ut&&wi(Ut.resolve())!=Me||Lt&&wi(new Lt)!=he||$t&&wi(new $t)!=ne)&&(wi=function(x){var T=ji(x),ie=T==Je?x.constructor:void 0,be=ie?ui(ie):"";if(be)switch(be){case ir:return m;case kt:return le;case Gt:return Me;case nr:return he;case Wt:return ne}return T});function bs(x,T){return T=T??J,!!T&&(typeof x=="number"||ge.test(x))&&x>-1&&x%1==0&&x<T}function Go(x){var T=typeof x;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?x!=="__proto__":x===null}function Es(x){return!!zt&&zt in x}function xs(x){var T=x&&x.constructor,ie=typeof T=="function"&&T.prototype||ct;return x===ie}function Kc(x){return tr.call(x)}function ui(x){if(x!=null){try{return _t.call(x)}catch{}try{return x+""}catch{}}return""}function Is(x,T){return x===T||x!==x&&T!==T}var Vc=vs(function(){return arguments}())?vs:function(x){return mn(x)&&ht.call(x,"callee")&&!rr.call(x,"callee")},Mi=Array.isArray;function Ps(x){return x!=null&&Ss(x.length)&&!Xi(x)}var hi=mi||Zo;function vn(x,T){return Bo(x,T)}function Xi(x){if(!Os(x))return!1;var T=ji(x);return T==Pe||T==me||T==ae||T==ce}function Ss(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=J}function Os(x){var T=typeof x;return x!=null&&(T=="object"||T=="function")}function mn(x){return x!=null&&typeof x=="object"}var Rs=Ce?tt(Ce):Ko;function Wo(x){return Ps(x)?qc(x):Vo(x)}function Jo(){return[]}function Zo(){return!1}He.exports=vn},85346:function(He){"use strict";function q(Z){try{return JSON.stringify(Z)}catch{return'"[Circular]"'}}He.exports=K;function K(Z,ve,_){var Ie=_&&_.stringify||q,J=1;if(typeof Z=="object"&&Z!==null){var Ee=ve.length+J;if(Ee===1)return Z;var De=new Array(Ee);De[0]=Ie(Z);for(var ae=1;ae<Ee;ae++)De[ae]=Ie(ve[ae]);return De.join(" ")}if(typeof Z!="string")return Z;var ue=ve.length;if(ue===0)return Z;for(var fe="",Te=1-J,Pe=-1,me=Z&&Z.length||0,le=0;le<me;){if(Z.charCodeAt(le)===37&&le+1<me){switch(Pe=Pe>-1?Pe:0,Z.charCodeAt(le+1)){case 100:case 102:if(Te>=ue||ve[Te]==null)break;Pe<le&&(fe+=Z.slice(Pe,le)),fe+=Number(ve[Te]),Pe=le+2,le++;break;case 105:if(Te>=ue||ve[Te]==null)break;Pe<le&&(fe+=Z.slice(Pe,le)),fe+=Math.floor(Number(ve[Te])),Pe=le+2,le++;break;case 79:case 111:case 106:if(Te>=ue||ve[Te]===void 0)break;Pe<le&&(fe+=Z.slice(Pe,le));var ke=typeof ve[Te];if(ke==="string"){fe+="'"+ve[Te]+"'",Pe=le+2,le++;break}if(ke==="function"){fe+=ve[Te].name||"<anonymous>",Pe=le+2,le++;break}fe+=Ie(ve[Te]),Pe=le+2,le++;break;case 115:if(Te>=ue)break;Pe<le&&(fe+=Z.slice(Pe,le)),fe+=String(ve[Te]),Pe=le+2,le++;break;case 37:Pe<le&&(fe+=Z.slice(Pe,le)),fe+="%",Pe=le+2,le++,Te--;break}++Te}++le}return Pe===-1?Z:(Pe<me&&(fe+=Z.slice(Pe)),fe)}},57026:function(He){"use strict";He.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},36559:function(He,q,K){"use strict";const Z=K(85346);He.exports=J;const ve=de().console||{},_={mapHttpRequest:ke,mapHttpResponse:ke,wrapRequestSerializer:at,wrapResponseSerializer:at,wrapErrorSerializer:at,req:ke,res:ke,err:me};function Ie(L,Q){return Array.isArray(L)?L.filter(function(_e){return _e!=="!stdSerializers.err"}):L===!0?Object.keys(Q):!1}function J(L){L=L||{},L.browser=L.browser||{};const Q=L.browser.transmit;if(Q&&typeof Q.send!="function")throw Error("pino: transmit option must have a send function");const ne=L.browser.write||ve;L.browser.write&&(L.browser.asObject=!0);const _e=L.serializers||{},m=Ie(L.browser.serialize,_e);let I=L.browser.serialize;Array.isArray(L.browser.serialize)&&L.browser.serialize.indexOf("!stdSerializers.err")>-1&&(I=!1);const p=["error","fatal","warn","info","debug","trace"];typeof ne=="function"&&(ne.error=ne.fatal=ne.warn=ne.info=ne.debug=ne.trace=ne),L.enabled===!1&&(L.level="silent");const g=L.level||"info",y=Object.create(ne);y.log||(y.log=Je),Object.defineProperty(y,"levelVal",{get:F}),Object.defineProperty(y,"level",{get:j,set:W});const E={transmit:Q,serialize:m,asObject:L.browser.asObject,levels:p,timestamp:le(L)};y.levels=J.levels,y.level=g,y.setMaxListeners=y.getMaxListeners=y.emit=y.addListener=y.on=y.prependListener=y.once=y.prependOnceListener=y.removeListener=y.removeAllListeners=y.listeners=y.listenerCount=y.eventNames=y.write=y.flush=Je,y.serializers=_e,y._serialize=m,y._stdErrSerialize=I,y.child=O,Q&&(y._logEvent=Pe());function F(){return this.level==="silent"?1/0:this.levels.values[this.level]}function j(){return this._level}function W(V){if(V!=="silent"&&!this.levels.values[V])throw Error("unknown level "+V);this._level=V,Ee(E,y,"error","log"),Ee(E,y,"fatal","error"),Ee(E,y,"warn","error"),Ee(E,y,"info","log"),Ee(E,y,"debug","log"),Ee(E,y,"trace","log")}function O(V,Ae){if(!V)throw new Error("missing bindings for child Pino");Ae=Ae||{},m&&V.serializers&&(Ae.serializers=V.serializers);const ge=Ae.serializers;if(m&&ge){var Re=Object.assign({},_e,ge),Tt=L.browser.serialize===!0?Object.keys(Re):m;delete V.serializers,ue([V],Tt,Re,this._stdErrSerialize)}function wr(Et){this._childLevel=(Et._childLevel|0)+1,this.error=fe(Et,V,"error"),this.fatal=fe(Et,V,"fatal"),this.warn=fe(Et,V,"warn"),this.info=fe(Et,V,"info"),this.debug=fe(Et,V,"debug"),this.trace=fe(Et,V,"trace"),Re&&(this.serializers=Re,this._serialize=Tt),Q&&(this._logEvent=Pe([].concat(Et._logEvent.bindings,V)))}return wr.prototype=this,new wr(this)}return y}J.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},J.stdSerializers=_,J.stdTimeFunctions=Object.assign({},{nullTime:Me,epochTime:ce,unixTime:re,isoTime:he});function Ee(L,Q,ne,_e){const m=Object.getPrototypeOf(Q);Q[ne]=Q.levelVal>Q.levels.values[ne]?Je:m[ne]?m[ne]:ve[ne]||ve[_e]||Je,De(L,Q,ne)}function De(L,Q,ne){!L.transmit&&Q[ne]===Je||(Q[ne]=function(_e){return function(){const I=L.timestamp(),p=new Array(arguments.length),g=Object.getPrototypeOf&&Object.getPrototypeOf(this)===ve?ve:this;for(var y=0;y<p.length;y++)p[y]=arguments[y];if(L.serialize&&!L.asObject&&ue(p,this._serialize,this.serializers,this._stdErrSerialize),L.asObject?_e.call(g,ae(this,ne,p,I)):_e.apply(g,p),L.transmit){const E=L.transmit.level||Q.level,F=J.levels.values[E],j=J.levels.values[ne];if(j<F)return;Te(this,{ts:I,methodLevel:ne,methodValue:j,transmitLevel:E,transmitValue:J.levels.values[L.transmit.level||Q.level],send:L.transmit.send,val:Q.levelVal},p)}}}(Q[ne]))}function ae(L,Q,ne,_e){L._serialize&&ue(ne,L._serialize,L.serializers,L._stdErrSerialize);const m=ne.slice();let I=m[0];const p={};_e&&(p.time=_e),p.level=J.levels.values[Q];let g=(L._childLevel|0)+1;if(g<1&&(g=1),I!==null&&typeof I=="object"){for(;g--&&typeof m[0]=="object";)Object.assign(p,m.shift());I=m.length?Z(m.shift(),m):void 0}else typeof I=="string"&&(I=Z(m.shift(),m));return I!==void 0&&(p.msg=I),p}function ue(L,Q,ne,_e){for(const m in L)if(_e&&L[m]instanceof Error)L[m]=J.stdSerializers.err(L[m]);else if(typeof L[m]=="object"&&!Array.isArray(L[m]))for(const I in L[m])Q&&Q.indexOf(I)>-1&&I in ne&&(L[m][I]=ne[I](L[m][I]))}function fe(L,Q,ne){return function(){const _e=new Array(1+arguments.length);_e[0]=Q;for(var m=1;m<_e.length;m++)_e[m]=arguments[m-1];return L[ne].apply(this,_e)}}function Te(L,Q,ne){const _e=Q.send,m=Q.ts,I=Q.methodLevel,p=Q.methodValue,g=Q.val,y=L._logEvent.bindings;ue(ne,L._serialize||Object.keys(L.serializers),L.serializers,L._stdErrSerialize===void 0?!0:L._stdErrSerialize),L._logEvent.ts=m,L._logEvent.messages=ne.filter(function(E){return y.indexOf(E)===-1}),L._logEvent.level.label=I,L._logEvent.level.value=p,_e(I,L._logEvent,g),L._logEvent=Pe(y)}function Pe(L){return{ts:0,messages:[],bindings:L||[],level:{label:"",value:0}}}function me(L){const Q={type:L.constructor.name,msg:L.message,stack:L.stack};for(const ne in L)Q[ne]===void 0&&(Q[ne]=L[ne]);return Q}function le(L){return typeof L.timestamp=="function"?L.timestamp:L.timestamp===!1?Me:ce}function ke(){return{}}function at(L){return L}function Je(){}function Me(){return!1}function ce(){return Date.now()}function re(){return Math.round(Date.now()/1e3)}function he(){return new Date(Date.now()).toISOString()}function de(){function L(Q){return typeof Q<"u"&&Q}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return L(self)||L(window)||L(this)||{}}}}}]);
